(function(a){a.fn.ligerPanel=function(b){return a.ligerui.run.call(this,"ligerPanel",arguments)};a.ligerDefaults.Panel={width:400,height:300,title:"Panel",content:null,url:null,frameName:null,data:null,showClose:false,showToggle:true,icon:null,onClose:null,onClosed:null,onLoaded:null};a.ligerMethos.Panel={};a.ligerui.controls.Panel=function(c,b){a.ligerui.controls.Panel.base.constructor.call(this,c,b)};a.ligerui.controls.Panel.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Panel"},__idPrev:function(){return"Panel"},_extendMethods:function(){return a.ligerMethos.Panel},_init:function(){var b=this,c=this.options;a.ligerui.controls.Panel.base._init.call(this);c.content=c.content||a(b.element).html()},_render:function(){var b=this,c=this.options;b.panel=a(b.element).addClass("l-panel").html("");b.panel.append('<div class="l-panel-header"><span></span><div class="icons"></div></div><div class="l-panel-content"></div>');b.set(c);b.panel.bind("click.panel",function(f){var d=(f.target||f.srcElement),g=a(d);if(g.hasClass("l-panel-header-toggle")){b.toggle()}else{if(g.hasClass("l-panel-header-close")){b.close()}}})},collapse:function(){var c=this,d=this.options;var b=c.panel.find(".l-panel-header .l-panel-header-toggle:first");if(b.hasClass("l-panel-header-toggle-hide")){return}c.toggle()},expand:function(){var c=this,d=this.options;var b=c.panel.find(".l-panel-header .l-panel-header-toggle:first");if(!b.hasClass("l-panel-header-toggle-hide")){return}c.toggle()},toggle:function(){var c=this,d=this.options;var b=c.panel.find(".l-panel-header .l-panel-header-toggle:first");if(b.hasClass("l-panel-header-toggle-hide")){b.removeClass("l-panel-header-toggle-hide")}else{b.addClass("l-panel-header-toggle-hide")}c.panel.find(".l-panel-content:first").toggle("normal")},_setShowToggle:function(c){var d=this,e=this.options;var f=d.panel.find(".l-panel-header:first");if(c){var b=a("<div class='l-panel-header-toggle'></div>");b.appendTo(f.find(".icons"))}else{f.find(".l-panel-header-toggle").remove()}},_setContent:function(b){var d=this,e=this.options;var c=d.panel.find(".l-panel-content:first");if(b){c.html(b)}},_setUrl:function(b){var e=this,f=this.options;var d=e.panel.find(".l-panel-content:first");if(b){e.jiframe=a("<iframe frameborder='0'></iframe>");var c=f.frameName?f.frameName:"ligerpanel"+new Date().getTime();e.jiframe.attr("name",c);e.jiframe.attr("id",c);d.prepend(e.jiframe);setTimeout(function(){if(d.find(".l-panel-loading:first").length==0){d.append("<div class='l-panel-loading' style='display:block;'></div>")}var g=a(".l-panel-loading:first",d);e.jiframe[0].panel=e;e.jiframe.attr("src",f.url).bind("load.panel",function(){g.hide();e.trigger("loaded")});e.frame=window.frames[e.jiframe.attr("name")]},0)}},_setShowClose:function(b){var d=this,e=this.options;var f=d.panel.find(".l-panel-header:first");if(b){var c=a("<div class='l-panel-header-close'></div>");c.appendTo(f.find(".icons"))}else{f.find(".l-panel-header-close").remove()}},close:function(){var b=this,c=this.options;if(b.trigger("close")==false){return}b.panel.remove();b.trigger("closed")},show:function(){this.panel.show()},_setIcon:function(b){var c=this;if(!b){c.panel.removeClass("l-panel-hasicon");c.panel.find("img").remove()}else{c.panel.addClass("l-panel-hasicon");c.panel.append('<img src="'+b+'" />')}},_setWidth:function(b){b&&this.panel.width(b)},_setHeight:function(c){var b=this,d=this.options;var e=b.panel.find(".l-panel-header:first");this.panel.find(".l-panel-content:first").height(c-e.height())},_setTitle:function(b){this.panel.find(".l-panel-header span:first").text(b)}})})(jQuery);