(function(a){a.fn.ligerTextBox=function(){return a.ligerui.run.call(this,"ligerTextBox",arguments)};a.fn.ligerGetTextBoxManager=function(){return a.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)};a.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:false,value:null,nullText:null,digits:false,number:false,currency:false,readonly:false};a.ligerui.controls.TextBox=function(d,c){a.ligerui.controls.TextBox.base.constructor.call(this,d,c)};a.ligerui.controls.TextBox.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){a.ligerui.controls.TextBox.base._init.call(this);var c=this,d=this.options;if(!d.width){d.width=a(c.element).width()}if(a(this.element).attr("readonly")){d.readonly=true}else{if(d.readonly){a(this.element).attr("readonly",true)}}},_render:function(){var c=this,d=this.options;c.inputText=a(this.element);c.wrapper=c.inputText.wrap('<div class="l-text"></div>').parent();c.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>');if(!c.inputText.hasClass("l-text-field")){c.inputText.addClass("l-text-field")}this._setEvent();if(d.digits||d.number||d.currency){c.inputText.addClass("l-text-field-number")}c.set(d);c.checkValue()},destroy:function(){var c=this;if(c.wrapper){c.wrapper.remove()}c.options=null;liger.remove(this)},_getValue:function(){return this.inputText.val()},_setNullText:function(){this.checkNotNull()},checkValue:function(){var f=this,h=this.options;var d=f.inputText.val()||"";if(h.currency){d=d.replace(/\$|\,/g,"")}var c=h.number||h.currency,e=h.digits;if(d!=""&&c&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d)||e&&!/^\d+$/.test(d)){if(f.value!=null){f.inputText.val(f.value)}else{f.inputText.val("")}h.currency&&f.inputText.val(b(f.value));return}f.value=d;h.currency&&f.inputText.val(b(f.value))},checkNotNull:function(){var c=this,d=this.options;if(d.nullText&&!d.disabled){if(!c.inputText.val()){c.inputText.addClass("l-text-field-null").val(d.nullText)}}},_setEvent:function(){var c=this,d=this.options;c.inputText.bind("blur.textBox",function(){c.trigger("blur");c.checkNotNull();c.checkValue();c.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){c.trigger("focus");if(d.nullText){if(a(this).hasClass("l-text-field-null")){a(this).removeClass("l-text-field-null").val("")}}c.wrapper.addClass("l-text-focus")}).change(function(){c.trigger("changeValue",[this.value])});c.wrapper.hover(function(){c.trigger("mouseOver");c.wrapper.addClass("l-text-over")},function(){c.trigger("mouseOut");c.wrapper.removeClass("l-text-over")})},_setDisabled:function(d){var c=this,e=this.options;if(d){this.inputText.attr("readonly","readonly");this.wrapper.addClass("l-text-disabled")}else{if(!e.readonly){this.inputText.removeAttr("readonly");this.wrapper.removeClass("l-text-disabled")}}},_setWidth:function(c){if(c>20){this.wrapper.css({width:c});this.inputText.css({width:c-4})}},_setHeight:function(c){if(c>10){this.wrapper.height(c);this.inputText.height(c-2)}},_setValue:function(c){if(c!=null){this.inputText.val(c)}},_setLabel:function(e){var d=this,f=this.options;if(!d.labelwrapper){d.labelwrapper=d.wrapper.wrap('<div class="l-labeltext"></div>').parent();var c=a('<div class="l-text-label" style="float:left;">'+e+":&nbsp</div>");d.labelwrapper.prepend(c);d.wrapper.css("float","left");if(!f.labelWidth){f.labelWidth=c.width()}else{d._setLabelWidth(f.labelWidth)}c.height(d.wrapper.height());if(f.labelAlign){d._setLabelAlign(f.labelAlign)}d.labelwrapper.append('<br style="clear:both;" />');d.labelwrapper.width(f.labelWidth+f.width+2)}else{d.labelwrapper.find(".l-text-label").html(e+":&nbsp")}},_setLabelWidth:function(d){var c=this,e=this.options;if(!c.labelwrapper){return}c.labelwrapper.find(".l-text-label").width(d)},_setLabelAlign:function(d){var c=this,e=this.options;if(!c.labelwrapper){return}c.labelwrapper.find(".l-text-label").css("text-align",d)},updateStyle:function(){var c=this,d=this.options;if(c.inputText.attr("readonly")){c.wrapper.addClass("l-text-readonly");d.disabled=true}else{c.wrapper.removeClass("l-text-readonly");d.disabled=false}if(c.inputText.attr("disabled")){c.wrapper.addClass("l-text-disabled");d.disabled=true}else{c.wrapper.removeClass("l-text-disabled");d.disabled=false}if(c.inputText.hasClass("l-text-field-null")&&c.inputText.val()!=d.nullText){c.inputText.removeClass("l-text-field-null")}c.checkValue()}});function b(c){if(!c){return"0.00"}c=c.toString().replace(/\$|\,/g,"");if(isNaN(c)){c="0.00"}sign=(c==(c=Math.abs(c)));c=Math.floor(c*100+0.50000000001);cents=c%100;c=Math.floor(c/100).toString();if(cents<10){cents="0"+cents}for(var d=0;d<Math.floor((c.length-(1+d))/3);d++){c=c.substring(0,c.length-(4*d+3))+","+c.substring(c.length-(4*d+3))}return""+(((sign)?"":"-")+""+c+"."+cents)}})(jQuery);