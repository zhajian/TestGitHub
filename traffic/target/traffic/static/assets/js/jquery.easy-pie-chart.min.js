(function(a){a.easyPieChart=function(q,e){var b,h,v,d,p,m,j,g,k=this;this.el=q;this.$el=a(q);this.$el.data("easyPieChart",this);this.init=function(){var c,f;k.options=a.extend({},a.easyPieChart.defaultOptions,e);c=parseInt(k.$el.data("percent"),10);k.percentage=0;k.canvas=a("<canvas width='"+k.options.size+"' height='"+k.options.size+"'></canvas>").get(0);k.$el.append(k.canvas);typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager!==null&&G_vmlCanvasManager.initElement(k.canvas);k.ctx=k.canvas.getContext("2d");if(window.devicePixelRatio>1){f=window.devicePixelRatio;a(k.canvas).css({width:k.options.size,height:k.options.size});k.canvas.width*=f;k.canvas.height*=f;k.ctx.scale(f,f)}k.ctx.translate(k.options.size/2,k.options.size/2);k.ctx.rotate(k.options.rotate*Math.PI/180);k.$el.addClass("easyPieChart");k.$el.css({width:k.options.size,height:k.options.size,lineHeight:""+k.options.size+"px"});k.update(c);return k};this.update=function(c){c=parseFloat(c)||0;k.options.animate===!1?v(c):h(k.percentage,c);return k};j=function(){var f,c,i;k.ctx.fillStyle=k.options.scaleColor;k.ctx.lineWidth=1;i=[];for(f=c=0;c<=24;f=++c){i.push(b(f))}return i};b=function(f){var c;c=f%6===0?0:k.options.size*0.017;k.ctx.save();k.ctx.rotate(f*Math.PI/12);k.ctx.fillRect(k.options.size/2-c,0,-k.options.size*0.05+c,1);k.ctx.restore()};g=function(){var c;c=k.options.size/2-k.options.lineWidth/2;k.options.scaleColor!==!1&&(c-=k.options.size*0.08);k.ctx.beginPath();k.ctx.arc(0,0,c,0,Math.PI*2,!0);k.ctx.closePath();k.ctx.strokeStyle=k.options.trackColor;k.ctx.lineWidth=k.options.lineWidth;k.ctx.stroke()};m=function(){k.options.scaleColor!==!1&&j();k.options.trackColor!==!1&&g()};v=function(c){var f;m();k.ctx.strokeStyle=a.isFunction(k.options.barColor)?k.options.barColor(c):k.options.barColor;k.ctx.lineCap=k.options.lineCap;k.ctx.lineWidth=k.options.lineWidth;f=k.options.size/2-k.options.lineWidth/2;k.options.scaleColor!==!1&&(f-=k.options.size*0.08);k.ctx.save();k.ctx.rotate(-Math.PI/2);k.ctx.beginPath();k.ctx.arc(0,0,f,0,Math.PI*2*c/100,!1);k.ctx.stroke();k.ctx.restore()};p=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){return window.setTimeout(c,1000/60)}}();h=function(i,c){var l,f;k.options.onStart.call(k);k.percentage=c;Date.now||(Date.now=function(){return +(new Date)});f=Date.now();l=function(){var n,o;o=Date.now()-f;o<k.options.animate&&p(l);k.ctx.clearRect(-k.options.size/2,-k.options.size/2,k.options.size,k.options.size);m.call(k);n=[d(o,i,c-i,k.options.animate)];k.options.onStep.call(k,n);v.call(k,n);if(o>=k.options.animate){return k.options.onStop.call(k,n,c)}};p(l)};d=function(u,f,w,o){var c,l;c=function(i){return Math.pow(i,2)};l=function(i){return i<1?c(i):2-c(i/2*-2+2)};u/=o/2;return w/2*l(u)+f};return this.init()};a.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:!1,onStart:a.noop,onStop:a.noop,onStep:a.noop};a.fn.easyPieChart=function(b){return a.each(this,function(f,e){var c,d;c=a(e);if(!c.data("easyPieChart")){d=a.extend({},b,c.data());return c.data("easyPieChart",new a.easyPieChart(e,d))}})};return void 0})(jQuery);