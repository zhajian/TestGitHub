/*!
 * FullCalendar v2.1.1
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","moment"],a)}else{a(jQuery,moment)}})(function(au,v){var N={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:W,day:"dddd"},timeFormat:{"default":q},displayEventEnd:{month:false,basicWeek:false,"default":true},isRTL:false,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};function q(aP,aO){return aO.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function W(aP,aO){var aQ=aO.longDateFormat("L");aQ=aQ.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(aP.isRTL){aQ+=" ddd"}else{aQ="ddd "+aQ}return aQ}var av={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}};var S={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var aG=au.fullCalendar={version:"2.1.1"};var ai=aG.views={};au.fn.fullCalendar=function(aP){var aO=Array.prototype.slice.call(arguments,1);var aQ=this;this.each(function(aT,aR){var aS=au(aR);var aV=aS.data("fullCalendar");var aU;if(typeof aP==="string"){if(aV&&au.isFunction(aV[aP])){aU=aV[aP].apply(aV,aO);if(!aT){aQ=aU}if(aP==="destroy"){aS.removeData("fullCalendar")}}}else{if(!aV){aV=new n(aS,aP);aS.data("fullCalendar",aV);aV.render()}}});return aQ};function am(aO){aC(N,aO)}function aC(aQ){function aP(aR,aS){if(au.isPlainObject(aS)&&au.isPlainObject(aQ[aR])&&!T(aR)){aQ[aR]=aC({},aQ[aR],aS)}else{if(aS!==undefined){aQ[aR]=aS}}}for(var aO=1;aO<arguments.length;aO++){au.each(arguments[aO],aP)}return aQ}function T(aO){return/(Time|Duration)$/.test(aO)}aG.langs=av;aG.datepickerLang=function(aR,aO,aP){var aQ=av[aR];if(!aQ){aQ=av[aR]={}}aC(aQ,{isRTL:aP.isRTL,weekNumberTitle:aP.weekHeader,titleFormat:{month:aP.showMonthAfterYear?"YYYY["+aP.yearSuffix+"] MMMM":"MMMM YYYY["+aP.yearSuffix+"]"},defaultButtonText:{prev:V(aP.prevText),next:V(aP.nextText),today:V(aP.currentText)}});if(au.datepicker){au.datepicker.regional[aO]=au.datepicker.regional[aR]=aP;au.datepicker.regional.en=au.datepicker.regional[""];au.datepicker.setDefaults(aP)}};aG.lang=function(aQ,aO){var aP;if(aO){aP=av[aQ];if(!aP){aP=av[aQ]={}}aC(aP,aO||{})}N.lang=aQ};function n(a8,a2){var bz=this;a2=a2||{};var bg=aC({},N,a2);var br;if(bg.lang in av){br=av[bg.lang]}else{br=av[N.lang]}if(br){bg=aC({},N,br,a2)}if(bg.isRTL){bg=aC({},N,S,br||{},a2)}bz.options=bg;bz.render=bo;bz.destroy=bB;bz.refetchEvents=a3;bz.reportEvents=a6;bz.reportEventChange=bD;bz.rerenderEvents=aV;bz.changeView=aY;bz.select=bA;bz.unselect=aZ;bz.prev=bl;bz.next=aR;bz.prevYear=bC;bz.nextYear=aP;bz.today=a9;bz.gotoDate=bn;bz.incrementDate=bd;bz.zoomTo=bH;bz.getDate=be;bz.getCalendar=bt;bz.getView=bj;bz.option=bw;bz.trigger=bm;function a4(bK){var bJ=v.localeData||v.langData;return bJ.call(v,bK)||bJ.call(v,"en")}var bq=L(a4(bg.lang));if(bg.monthNames){bq._months=bg.monthNames}if(bg.monthNamesShort){bq._monthsShort=bg.monthNamesShort}if(bg.dayNames){bq._weekdays=bg.dayNames}if(bg.dayNamesShort){bq._weekdaysShort=bg.dayNamesShort}if(bg.firstDay!=null){var aQ=L(bq._week);aQ.dow=bg.firstDay;bq._week=aQ}bz.defaultAllDayEventDuration=v.duration(bg.defaultAllDayEventDuration);bz.defaultTimedEventDuration=v.duration(bg.defaultTimedEventDuration);bz.moment=function(){var bJ;if(bg.timezone==="local"){bJ=aG.moment.apply(null,arguments);if(bJ.hasTime()){bJ.local()}}else{if(bg.timezone==="UTC"){bJ=aG.moment.utc.apply(null,arguments)}else{bJ=aG.moment.parseZone.apply(null,arguments)}}if("_locale" in bJ){bJ._locale=bq}else{bJ._lang=bq}return bJ};bz.getIsAmbigTimezone=function(){return bg.timezone!=="local"&&bg.timezone!=="UTC"};bz.rezoneDate=function(bJ){return bz.moment(bJ.toArray())};bz.getNow=function(){var bJ=bg.now;if(typeof bJ==="function"){bJ=bJ()}return bz.moment(bJ)};bz.calculateWeekNumber=function(bK){var bJ=bg.weekNumberCalculation;if(typeof bJ==="function"){return bJ(bK)}else{if(bJ==="local"){return bK.week()}else{if(bJ.toUpperCase()==="ISO"){return bK.isoWeek()}}}};bz.getEventEnd=function(bJ){if(bJ.end){return bJ.end.clone()}else{return bz.getDefaultEventEnd(bJ.allDay,bJ.start)}};bz.getDefaultEventEnd=function(bK,bL){var bJ=bL.clone();if(bK){bJ.stripTime().add(bz.defaultAllDayEventDuration)}else{bJ.add(bz.defaultTimedEventDuration)}if(bz.getIsAmbigTimezone()){bJ.stripZone()}return bJ};bz.formatRange=function(bL,bK,bJ){if(typeof bJ==="function"){bJ=bJ.call(bz,bg,bq)}return I(bL,bK,bJ,null,bg.isRTL)};bz.formatDate=function(bK,bJ){if(typeof bJ==="function"){bJ=bJ.call(bz,bg,bq)}return z(bK,bJ)};m.call(bz,bg);var aO=bz.isFetchNeeded;var bG=bz.fetchEvents;var bx=a8[0];var aT;var bp;var a1;var bI;var a0;var aW;var bF;var by=0;var bE;var bi=[];if(bg.defaultDate!=null){bE=bz.moment(bg.defaultDate)}else{bE=bz.getNow()}function bo(bJ){if(!a1){bh()}else{if(bv()){bs();bf(bJ)}}}function bh(){bI=bg.theme?"ui":"fc";a8.addClass("fc");if(bg.isRTL){a8.addClass("fc-rtl")}else{a8.addClass("fc-ltr")}if(bg.theme){a8.addClass("ui-widget")}else{a8.addClass("fc-unthemed")}a1=au("<div class='fc-view-container'/>").prependTo(a8);aT=new U(bz,bg);bp=aT.render();if(bp){a8.prepend(bp)}aY(bg.defaultView);if(bg.handleWindowResize){bF=aN(a5,bg.windowResizeDelay);au(window).resize(bF)}}function bB(){if(a0){a0.destroy()}aT.destroy();a1.remove();a8.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");au(window).unbind("resize",bF)}function bv(){return a8.is(":visible")}function aY(bJ){bf(0,bJ)}function bf(bK,bJ){by++;if(a0&&bJ&&a0.name!==bJ){aT.deactivateButton(a0.name);aS();if(a0.start){a0.destroy()}a0.el.remove();a0=null}if(!a0&&bJ){a0=new ai[bJ](bz);a0.el=au("<div class='fc-view fc-"+bJ+"-view' />").appendTo(a1);aT.activateButton(bJ)}if(a0){if(bK){bE=a0.incrementDate(bE,bK)}if(!a0.start||bK||!bE.isWithin(a0.intervalStart,a0.intervalEnd)){if(bv()){aS();if(a0.start){a0.destroy()}a0.render(bE);a7();ba();bk();aX()}}}a7();by--}bz.getSuggestedViewHeight=function(){if(aW===undefined){bs()}return aW};bz.isHeightAuto=function(){return bg.contentHeight==="auto"||bg.height==="auto"};function bb(bJ){if(bv()){if(bJ){aU()}by++;a0.updateSize(true);by--;return true}}function bs(){if(bv()){aU()}}function aU(){if(typeof bg.contentHeight==="number"){aW=bg.contentHeight}else{if(typeof bg.height==="number"){aW=bg.height-(bp?bp.outerHeight(true):0)}else{aW=Math.round(a1.width()/Math.max(bg.aspectRatio,0.5))}}}function a5(bJ){if(!by&&bJ.target===window&&a0.start){if(bb(true)){a0.trigger("windowResize",bx)}}}function a3(){bc();bu()}function aV(){if(bv()){aS();a0.destroyEvents();a0.renderEvents(bi);a7()}}function bc(){aS();a0.destroyEvents();a7()}function aX(){if(!bg.lazyFetching||aO(a0.start,a0.end)){bu()}else{aV()}}function bu(){bG(a0.start,a0.end)}function a6(bJ){bi=bJ;aV()}function bD(){aV()}function ba(){aT.updateTitle(a0.title)}function bk(){var bJ=bz.getNow();if(bJ.isWithin(a0.intervalStart,a0.intervalEnd)){aT.disableButton("today")}else{aT.enableButton("today")}}function bA(bK,bJ){bK=bz.moment(bK);if(bJ){bJ=bz.moment(bJ)}else{if(bK.hasTime()){bJ=bK.clone().add(bz.defaultTimedEventDuration)}else{bJ=bK.clone().add(bz.defaultAllDayEventDuration)}}a0.select(bK,bJ)}function aZ(){if(a0){a0.unselect()}}function bl(){bf(-1)}function aR(){bf(1)}function bC(){bE.add(-1,"years");bf()}function aP(){bE.add(1,"years");bf()}function a9(){bE=bz.getNow();bf()}function bn(bJ){bE=bz.moment(bJ);bf()}function bd(bJ){bE.add(v.duration(bJ));bf()}function bH(bK,bM){var bJ;var bL;if(!bM||ai[bM]===undefined){bM=bM||"day";bJ=aT.getViewsWithButtons().join(" ");bL=bJ.match(new RegExp("\\w+"+az(bM)));if(!bL){bL=bJ.match(/\w+Day/)}bM=bL?bL[0]:"agendaDay"}bE=bK;aY(bM)}function be(){return bE.clone()}function aS(){a1.css({width:"100%",height:a1.height(),overflow:"hidden"})}function a7(){a1.css({width:"",height:"",overflow:""})}function bt(){return bz}function bj(){return a0}function bw(bJ,bK){if(bK===undefined){return bg[bJ]}if(bJ=="height"||bJ=="contentHeight"||bJ=="aspectRatio"){bg[bJ]=bK;bb(true)}}function bm(bJ,bK){if(bg[bJ]){return bg[bJ].apply(bK||bx,Array.prototype.slice.call(arguments,2))}}}function U(aT,a2){var a1=this;a1.render=aP;a1.destroy=aW;a1.updateTitle=aU;a1.activateButton=aO;a1.deactivateButton=aZ;a1.disableButton=aS;a1.enableButton=aV;a1.getViewsWithButtons=aR;var aQ=au();var aX=[];var aY;function aP(){var a3=a2.header;aY=a2.theme?"ui":"fc";if(a3){aQ=au("<div class='fc-toolbar'/>").append(a0("left")).append(a0("right")).append(a0("center")).append('<div class="fc-clear"/>');return aQ}}function aW(){aQ.remove()}function a0(a3){var a4=au('<div class="fc-'+a3+'"/>');var a5=a2.header[a3];if(a5){au.each(a5.split(" "),function(a6){var a7=au();var a8=true;var a9;au.each(this.split(","),function(be,bj){var bh;var ba;var bd;var bi;var bg;var bb;var bc;var bf;if(bj=="title"){a7=a7.add(au("<h2>&nbsp;</h2>"));a8=false}else{if(aT[bj]){bh=function(){aT[bj]()}}else{if(ai[bj]){bh=function(){aT.changeView(bj)};aX.push(bj)}}if(bh){ba=C(a2.themeButtonIcons,bj);bd=C(a2.buttonIcons,bj);bi=C(a2.defaultButtonText,bj);bg=C(a2.buttonText,bj);if(bg){bb=aK(bg)}else{if(ba&&a2.theme){bb="<span class='ui-icon ui-icon-"+ba+"'></span>"}else{if(bd&&!a2.theme){bb="<span class='fc-icon fc-icon-"+bd+"'></span>"}else{bb=aK(bi||bj)}}}bc=["fc-"+bj+"-button",aY+"-button",aY+"-state-default"];bf=au('<button type="button" class="'+bc.join(" ")+'">'+bb+"</button>").click(function(){if(!bf.hasClass(aY+"-state-disabled")){bh();if(bf.hasClass(aY+"-state-active")||bf.hasClass(aY+"-state-disabled")){bf.removeClass(aY+"-state-hover")}}}).mousedown(function(){bf.not("."+aY+"-state-active").not("."+aY+"-state-disabled").addClass(aY+"-state-down")}).mouseup(function(){bf.removeClass(aY+"-state-down")}).hover(function(){bf.not("."+aY+"-state-active").not("."+aY+"-state-disabled").addClass(aY+"-state-hover")},function(){bf.removeClass(aY+"-state-hover").removeClass(aY+"-state-down")});a7=a7.add(bf)}}});if(a8){a7.first().addClass(aY+"-corner-left").end().last().addClass(aY+"-corner-right").end()}if(a7.length>1){a9=au("<div/>");if(a8){a9.addClass("fc-button-group")}a9.append(a7);a4.append(a9)}else{a4.append(a7)}})}return a4}function aU(a3){aQ.find("h2").text(a3)}function aO(a3){aQ.find(".fc-"+a3+"-button").addClass(aY+"-state-active")}function aZ(a3){aQ.find(".fc-"+a3+"-button").removeClass(aY+"-state-active")}function aS(a3){aQ.find(".fc-"+a3+"-button").attr("disabled","disabled").addClass(aY+"-state-disabled")}function aV(a3){aQ.find(".fc-"+a3+"-button").removeAttr("disabled").removeClass(aY+"-state-disabled")}function aR(){return aX}}aG.sourceNormalizers=[];aG.sourceFetchers=[];var k={dataType:"json",cache:false};var Y=1;function m(aY){var a7=this;a7.isFetchNeeded=a1;a7.fetchEvents=a6;a7.addEventSource=aV;a7.removeEventSource=aW;a7.updateEvent=ba;a7.renderEvent=a5;a7.removeEvents=bl;a7.clientEvents=bg;a7.mutateEvent=a4;var a9=a7.trigger;var aP=a7.getView;var bb=a7.reportEvents;var bf=a7.getEventEnd;var bd={events:[]};var aQ=[bd];var bi,be;var aT=0;var bj=0;var bh=0;var a8=[];au.each((aY.events?[aY.events]:[]).concat(aY.eventSources||[]),function(bm,bo){var bn=a0(bo);if(bn){aQ.push(bn)}});function a1(bn,bm){return !bi||bn.clone().stripZone()<bi.clone().stripZone()||bm.clone().stripZone()>be.clone().stripZone()}function a6(bq,bn){bi=bq;be=bn;a8=[];var bp=++aT;var bm=aQ.length;bj=bm;for(var bo=0;bo<bm;bo++){aZ(aQ[bo],bp)}}function aZ(bn,bm){bc(bn,function(bp){var br=au.isArray(bn.events);var bo;var bq;if(bm==aT){if(bp){for(bo=0;bo<bp.length;bo++){bq=bp[bo];if(!br){bq=aR(bq,bn)}if(bq){a8.push(bq)}}}bj--;if(!bj){bb(a8)}}})}function bc(bm,bx){var br;var bv=aG.sourceFetchers;var bt;for(br=0;br<bv.length;br++){bt=bv[br].call(a7,bm,bi.clone(),be.clone(),aY.timezone,bx);if(bt===true){return}else{if(typeof bt=="object"){bc(bt,bx);return}}}var bz=bm.events;if(bz){if(au.isFunction(bz)){a2();bz.call(a7,bi.clone(),be.clone(),aY.timezone,function(bB){bx(bB);bk()})}else{if(au.isArray(bz)){bx(bz)}else{bx()}}}else{var bn=bm.url;if(bn){var by=bm.success;var bu=bm.error;var bo=bm.complete;var bA;if(au.isFunction(bm.data)){bA=bm.data()}else{bA=bm.data}var bq=au.extend({},bA||{});var bs=aL(bm.startParam,aY.startParam);var bp=aL(bm.endParam,aY.endParam);var bw=aL(bm.timezoneParam,aY.timezoneParam);if(bs){bq[bs]=bi.format()}if(bp){bq[bp]=be.format()}if(aY.timezone&&aY.timezone!="local"){bq[bw]=aY.timezone}a2();au.ajax(au.extend({},k,bm,{data:bq,success:function(bC){bC=bC||[];var bB=H(by,this,arguments);if(au.isArray(bB)){bC=bB}bx(bC)},error:function(){H(bu,this,arguments);bx()},complete:function(){H(bo,this,arguments);bk()}}))}else{bx()}}}function aV(bn){var bm=a0(bn);if(bm){aQ.push(bm);bj++;aZ(bm,aT)}}function a0(bp){var bn=aG.sourceNormalizers;var bo;var bm;if(au.isFunction(bp)||au.isArray(bp)){bo={events:bp}}else{if(typeof bp==="string"){bo={url:bp}}else{if(typeof bp==="object"){bo=au.extend({},bp)}}}if(bo){if(bo.className){if(typeof bo.className==="string"){bo.className=bo.className.split(/\s+/)}}else{bo.className=[]}if(au.isArray(bo.events)){bo.origArray=bo.events;bo.events=au.map(bo.events,function(bq){return aR(bq,bo)})}for(bm=0;bm<bn.length;bm++){bn[bm].call(a7,bo)}return bo}}function aW(bm){aQ=au.grep(aQ,function(bn){return !a3(bn,bm)});a8=au.grep(a8,function(bn){return !a3(bn.source,bm)});bb(a8)}function a3(bn,bm){return bn&&bm&&aX(bn)==aX(bm)}function aX(bm){return((typeof bm==="object")?(bm.origArray||bm.url||bm.events):null)||bm}function ba(bm){bm.start=a7.moment(bm.start);if(bm.end){bm.end=a7.moment(bm.end)}a4(bm);aO(bm);bb(a8)}var aS=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];function aO(bp){var bn;var bo;var bm;var bq;for(bn=0;bn<a8.length;bn++){bo=a8[bn];if(bo._id==bp._id&&bo!==bp){for(bm=0;bm<aS.length;bm++){bq=aS[bm];if(bp[bq]!==undefined){bo[bq]=bp[bq]}}}}}function a5(bo,bm){var bn=aR(bo);if(bn){if(!bn.source){if(bm){bd.events.push(bn);bn.source=bd}a8.push(bn)}bb(a8)}}function bl(bo){var bn;var bm;if(bo==null){bo=function(){return true}}else{if(!au.isFunction(bo)){bn=bo+"";bo=function(bp){return bp._id==bn}}}a8=au.grep(a8,bo,true);for(bm=0;bm<aQ.length;bm++){if(au.isArray(aQ[bm].events)){aQ[bm].events=au.grep(aQ[bm].events,bo,true)}}bb(a8)}function bg(bm){if(au.isFunction(bm)){return au.grep(a8,bm)}else{if(bm!=null){bm+="";return au.grep(a8,function(bn){return bn._id==bm})}}return a8}function a2(){if(!(bh++)){a9("loading",null,true,aP())}}function bk(){if(!(--bh)){a9("loading",null,false,aP())}}function aR(br,bq){var bn={};var bs;var bm;var bp;var bo;if(aY.eventDataTransform){br=aY.eventDataTransform(br)}if(bq&&bq.eventDataTransform){br=bq.eventDataTransform(br)}bs=a7.moment(br.start||br.date);if(!bs.isValid()){return}bm=null;if(br.end){bm=a7.moment(br.end);if(!bm.isValid()){return}}bp=br.allDay;if(bp===undefined){bo=aL(bq?bq.allDayDefault:undefined,aY.allDayDefault);if(bo!==undefined){bp=bo}else{bp=!bs.hasTime()&&(!bm||!bm.hasTime())}}if(bp){if(bs.hasTime()){bs.stripTime()}if(bm&&bm.hasTime()){bm.stripTime()}}else{if(!bs.hasTime()){bs=a7.rezoneDate(bs)}if(bm&&!bm.hasTime()){bm=a7.rezoneDate(bm)}}au.extend(bn,br);if(bq){bn.source=bq}bn._id=br._id||(br.id===undefined?"_fc"+Y++:br.id+"");if(br.className){if(typeof br.className=="string"){bn.className=br.className.split(/\s+/)}else{bn.className=br.className}}else{bn.className=[]}bn.allDay=bp;bn.start=bs;bn.end=bm;if(aY.forceEventDuration&&!bn.end){bn.end=bf(bn)}af(bn);return bn}function a4(bn,bt,br){var bw=bn._allDay;var bs=bn._start;var bv=bn._end;var bm=false;var bo;var bq;var bu;var bp;if(!bt&&!br){bt=bn.start;br=bn.end}if(bn.allDay!=bw){bo=bn.allDay}else{bo=!(bt||br).hasTime()}if(bo){if(bt){bt=bt.clone().stripTime()}if(br){br=br.clone().stripTime()}}if(bt){if(bo){bq=at(bt,bs.clone().stripTime())}else{bq=at(bt,bs)}}if(bo!=bw){bm=true}else{if(br){bu=at(br||a7.getDefaultEventEnd(bo,bt||bs),bt||bs).subtract(at(bv||a7.getDefaultEventEnd(bw,bs),bs))}}bp=aU(bg(bn._id),bm,bo,bq,bu);return{dateDelta:bq,durationDelta:bu,undo:bp}}function aU(bq,bs,bo,br,bp){var bn=a7.getIsAmbigTimezone();var bm=[];au.each(bq,function(bu,bz){var by=bz._allDay;var bx=bz._start;var bv=bz._end;var bA=bo!=null?bo:by;var bt=bx.clone();var bw=(!bs&&bv)?bv.clone():null;if(bA){bt.stripTime();if(bw){bw.stripTime()}}else{if(!bt.hasTime()){bt=a7.rezoneDate(bt)}if(bw&&!bw.hasTime()){bw=a7.rezoneDate(bw)}}if(!bw&&(aY.forceEventDuration||+bp)){bw=a7.getDefaultEventEnd(bA,bt)}bt.add(br);if(bw){bw.add(br).add(bp)}if(bn){if(+br||+bp){bt.stripZone();if(bw){bw.stripZone()}}}bz.allDay=bA;bz.start=bt;bz.end=bw;af(bz);bm.push(function(){bz.allDay=by;bz.start=bx;bz.end=bv;af(bz)})});return function(){for(var bt=0;bt<bm.length;bt++){bm[bt]()}}}}function af(aO){aO._allDay=aO.allDay;aO._start=aO.start.clone();aO._end=aO.end?aO.end.clone():null}function aD(aP,aO){if(aO.left){aP.css({"border-left-width":1,"margin-left":aO.left-1})}if(aO.right){aP.css({"border-right-width":1,"margin-right":aO.right-1})}}function Z(aO){aO.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function B(aT,aS,aP){var aQ=Math.floor(aS/aT.length);var aO=Math.floor(aS-aQ*(aT.length-1));var aU=[];var aV=[];var aR=[];var aW=0;c(aT);aT.each(function(aY,aZ){var a0=aY===aT.length-1?aO:aQ;var aX=au(aZ).outerHeight(true);if(aX<a0){aU.push(aZ);aV.push(aX);aR.push(au(aZ).height())}else{aW+=aX}});if(aP){aS-=aW;aQ=Math.floor(aS/aU.length);aO=Math.floor(aS-aQ*(aU.length-1))}au(aU).each(function(aZ,a0){var a2=aZ===aU.length-1?aO:aQ;var aY=aV[aZ];var a1=aR[aZ];var aX=a2-(aY-a1);if(aY<a2){au(a0).height(aX)}})}function c(aO){aO.height("")}function E(aO){var aP=0;aO.find("> *").each(function(aR,aS){var aQ=au(aS).outerWidth();if(aQ>aP){aP=aQ}});aP++;aO.width(aP);return aP}function aE(aP,aO){aP.height(aO).addClass("fc-scroller");if(aP[0].scrollHeight-1>aP[0].clientHeight){return true}o(aP);return false}function o(aO){aO.height("").removeClass("fc-scroller")}function ad(aP){var aO=aP.css("position"),aQ=aP.parents().filter(function(){var aR=au(this);return(/(auto|scroll)/).test(aR.css("overflow")+aR.css("overflow-y")+aR.css("overflow-x"))}).eq(0);return aO==="fixed"||!aQ.length?au(aP[0].ownerDocument||document):aQ}function h(aO){var aQ=aO.offset().left;var aS=aQ+aO.width();var aP=aO.children();var aR=aP.offset().left;var aT=aR+aP.outerWidth();return{left:aR-aQ,right:aS-aT}}function O(aO){return aO.which==1&&!aO.ctrlKey}function aq(aS,aP,aV,aR){var aQ,aT;var aO,aU;if(aP>aV&&aS<aR){if(aS>=aV){aQ=aS.clone();aO=true}else{aQ=aV.clone();aO=false}if(aP<=aR){aT=aP.clone();aU=true}else{aT=aR.clone();aU=false}return{start:aQ,end:aT,isStart:aO,isEnd:aU}}}function C(aS,aO){aS=aS||{};if(aS[aO]!==undefined){return aS[aO]}var aR=aO.split(/(?=[A-Z])/),aQ=aR.length-1,aP;for(;aQ>=0;aQ--){aP=aS[aR[aQ].toLowerCase()];if(aP!==undefined){return aP}}return aS["default"]}var R=["sun","mon","tue","wed","thu","fri","sat"];function at(aP,aO){return v.duration({days:aP.clone().stripTime().diff(aO.clone().stripTime(),"days"),ms:aP.time()-aO.time()})}function F(aO){return Object.prototype.toString.call(aO)==="[object Date]"||aO instanceof Date}function a(aP,aO){return aP-aO}aG.applyAll=H;function L(aO){var aP=function(){};aP.prototype=aO;return new aP()}function ab(aP,aO){for(var aQ in aO){if(aO.hasOwnProperty(aQ)){aP[aQ]=aO[aQ]}}}function H(aR,aS,aP){if(au.isFunction(aR)){aR=[aR]}if(aR){var aQ;var aO;for(aQ=0;aQ<aR.length;aQ++){aO=aR[aQ].apply(aS,aP)||aO}return aO}}function aL(){for(var aO=0;aO<arguments.length;aO++){if(arguments[aO]!==undefined){return arguments[aO]}}}function aK(aO){return(aO+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function V(aO){return aO.replace(/&.*?;/g,"")}function az(aO){return aO.charAt(0).toUpperCase()+aO.slice(1)}function aN(aR,aT){var aU;var aP;var aQ;var aS;var aO=function(){var aV=+new Date()-aS;if(aV<aT&&aV>0){aU=setTimeout(aO,aT-aV)}else{aU=null;aR.apply(aQ,aP);if(!aU){aQ=aP=null}}};return function(){aQ=this;aP=arguments;aS=+new Date();if(!aU){aU=setTimeout(aO,aT)}}}var r=/^\s*\d{4}-\d\d$/;var M=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;aG.moment=function(){return s(arguments)};aG.moment.utc=function(){var aO=s(arguments,true);if(aO.hasTime()){aO.utc()}return aO};aG.moment.parseZone=function(){return s(arguments,true,true)};function s(aU,aT,aS){var aW=aU[0];var aR=aU.length==1&&typeof aW==="string";var aQ;var aV;var aO;var aP;if(v.isMoment(aW)){aP=v.apply(null,aU);if(aW._ambigTime){aP._ambigTime=true}if(aW._ambigZone){aP._ambigZone=true}}else{if(F(aW)||aW===undefined){aP=v.apply(null,aU)}else{aQ=false;aV=false;if(aR){if(r.test(aW)){aW+="-01";aU=[aW];aQ=true;aV=true}else{if((aO=M.exec(aW))){aQ=!aO[5];aV=true}}}else{if(au.isArray(aW)){aV=true}}if(aT){aP=v.utc.apply(v,aU)}else{aP=v.apply(null,aU)}if(aQ){aP._ambigTime=true;aP._ambigZone=true}else{if(aS){if(aV){aP._ambigZone=true}else{if(aR){aP.zone(aW)}}}}}}return new d(aP)}function d(aO){ab(this,aO)}d.prototype=L(v.fn);d.prototype.clone=function(){return s([this])};d.prototype.time=function(aP){if(aP==null){return v.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{delete this._ambigTime;if(!v.isDuration(aP)&&!v.isMoment(aP)){aP=v.duration(aP)}var aO=0;if(v.isDuration(aP)){aO=Math.floor(aP.asDays())*24}return this.hours(aO+aP.hours()).minutes(aP.minutes()).seconds(aP.seconds()).milliseconds(aP.milliseconds())}};d.prototype.stripTime=function(){var aO=this.toArray();v.fn.utc.call(this);this.year(aO[0]).month(aO[1]).date(aO[2]).hours(0).minutes(0).seconds(0).milliseconds(0);this._ambigTime=true;this._ambigZone=true;return this};d.prototype.hasTime=function(){return !this._ambigTime};d.prototype.stripZone=function(){var aO=this.toArray();var aP=this._ambigTime;v.fn.utc.call(this);this.year(aO[0]).month(aO[1]).date(aO[2]).hours(aO[3]).minutes(aO[4]).seconds(aO[5]).milliseconds(aO[6]);if(aP){this._ambigTime=true}this._ambigZone=true;return this};d.prototype.hasZone=function(){return !this._ambigZone};d.prototype.zone=function(aO){if(aO!=null){delete this._ambigTime;delete this._ambigZone}return v.fn.zone.apply(this,arguments)};d.prototype.local=function(){var aO=this.toArray();var aP=this._ambigZone;delete this._ambigTime;delete this._ambigZone;v.fn.local.apply(this,arguments);if(aP){this.year(aO[0]).month(aO[1]).date(aO[2]).hours(aO[3]).minutes(aO[4]).seconds(aO[5]).milliseconds(aO[6])}return this};d.prototype.utc=function(){delete this._ambigTime;delete this._ambigZone;return v.fn.utc.apply(this,arguments)};d.prototype.format=function(){if(arguments[0]){return z(this,arguments[0])}if(this._ambigTime){return ao(this,"YYYY-MM-DD")}if(this._ambigZone){return ao(this,"YYYY-MM-DD[T]HH:mm:ss")}return ao(this)};d.prototype.toISOString=function(){if(this._ambigTime){return ao(this,"YYYY-MM-DD")}if(this._ambigZone){return ao(this,"YYYY-MM-DD[T]HH:mm:ss")}return v.fn.toISOString.apply(this,arguments)};d.prototype.isWithin=function(aQ,aP){var aO=an([this,aQ,aP]);return aO[0]>=aO[1]&&aO[0]<aO[2]};d.prototype.isSame=function(aQ,aP){var aO;if(aP){aO=an([this,aQ],true);return v.fn.isSame.call(aO[0],aO[1],aP)}else{aQ=aG.moment.parseZone(aQ);return v.fn.isSame.call(this,aQ)&&Boolean(this._ambigTime)===Boolean(aQ._ambigTime)&&Boolean(this._ambigZone)===Boolean(aQ._ambigZone)}};au.each(["isBefore","isAfter"],function(aP,aO){d.prototype[aO]=function(aS,aR){var aQ=an([this,aS]);return v.fn[aO].call(aQ[0],aQ[1],aR)}});function an(aO,aS){var aT=[];var aP=false;var aR=false;var aQ;for(aQ=0;aQ<aO.length;aQ++){aT.push(aG.moment.parseZone(aO[aQ]));aP=aP||aT[aQ]._ambigTime;aR=aR||aT[aQ]._ambigZone}for(aQ=0;aQ<aT.length;aQ++){if(aP&&!aS){aT[aQ].stripTime()}else{if(aR){aT[aQ].stripZone()}}}return aT}function ao(aP,aO){return v.fn.format.call(aP,aO)}function z(aP,aO){return aH(aP,p(aO))}function aH(aO,aR){var aQ="";var aP;for(aP=0;aP<aR.length;aP++){aQ+=Q(aO,aR[aP])}return aQ}var e={t:function(aO){return ao(aO,"a").charAt(0)},T:function(aO){return ao(aO,"A").charAt(0)}};function Q(aP,aO){var aQ;var aR;if(typeof aO==="string"){return aO}else{if((aQ=aO.token)){if(e[aQ]){return e[aQ](aP)}return ao(aP,aQ)}else{if(aO.maybe){aR=aH(aP,aO.maybe);if(aR.match(/[1-9]/)){return aR}}}}return""}function I(aT,aR,aO,aS,aP){var aQ;aT=aG.moment.parseZone(aT);aR=aG.moment.parseZone(aR);aQ=(aT.localeData||aT.lang).call(aT);aO=aQ.longDateFormat(aO)||aO;aS=aS||" - ";return ah(aT,aR,p(aO),aS,aP)}aG.formatRange=I;function ah(a1,aZ,aT,aS,aP){var aX;var a0;var aR="";var aO;var aV="";var aY;var aW="";var aU="";var aQ="";for(a0=0;a0<aT.length;a0++){aX=ar(a1,aZ,aT[a0]);if(aX===false){break}aR+=aX}for(aO=aT.length-1;aO>a0;aO--){aX=ar(a1,aZ,aT[aO]);if(aX===false){break}aV=aX+aV}for(aY=a0;aY<=aO;aY++){aW+=Q(a1,aT[aY]);aU+=Q(aZ,aT[aY])}if(aW||aU){if(aP){aQ=aU+aS+aW}else{aQ=aW+aS+aU}}return aR+aQ+aV}var aB={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function ar(aS,aR,aO){var aP;var aQ;if(typeof aO==="string"){return aO}else{if((aP=aO.token)){aQ=aB[aP.charAt(0)];if(aQ&&aS.isSame(aR,aQ)){return ao(aS,aP)}}}return false}var aI={};function p(aO){if(aO in aI){return aI[aO]}return(aI[aO]=ac(aO))}function ac(aP){var aR=[];var aO=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;var aQ;while((aQ=aO.exec(aP))){if(aQ[1]){aR.push(aQ[1])}else{if(aQ[2]){aR.push({maybe:ac(aQ[2])})}else{if(aQ[3]){aR.push({token:aQ[3]})}else{if(aQ[5]){aR.push(aQ[5])}}}}}return aR}function j(aO){this.options=aO||{}}j.prototype={isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var aP=this;var aO=this.options;this.el=au('<div class="fc-popover"/>').addClass(aO.className||"").css({top:0,left:0}).append(aO.content).appendTo(aO.parentEl);this.el.on("click",".fc-close",function(){aP.hide()});if(aO.autoHide){au(document).on("mousedown",this.documentMousedownProxy=au.proxy(this,"documentMousedown"))}},documentMousedown:function(aO){if(this.el&&!au(aO.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}au(document).off("mousedown",this.documentMousedownProxy)},position:function(){var aY=this.options;var aU=this.el.offsetParent().offset();var aO=this.el.outerWidth();var aW=this.el.outerHeight();var aV=au(window);var aT=ad(this.el);var aP;var aR;var aX;var aS;var aQ;aS=aY.top||0;if(aY.left!==undefined){aQ=aY.left}else{if(aY.right!==undefined){aQ=aY.right-aO}else{aQ=0}}if(aT.is(window)||aT.is(document)){aT=aV;aP=0;aR=0}else{aX=aT.offset();aP=aX.top;aR=aX.left}aP+=aV.scrollTop();aR+=aV.scrollLeft();if(aY.viewportConstrain!==false){aS=Math.min(aS,aP+aT.outerHeight()-aW-this.margin);aS=Math.max(aS,aP+this.margin);aQ=Math.min(aQ,aR+aT.outerWidth()-aO-this.margin);aQ=Math.max(aQ,aR+this.margin)}this.el.css({top:aS-aU.top,left:aQ-aU.left})},trigger:function(aO){if(this.options[aO]){this.options[aO].apply(this,Array.prototype.slice.call(arguments,1))}}};function X(aO){this.grid=aO}X.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]);this.computeBounds()},getCell:function(aP,aV){var aO=null;var aS=this.rows;var aT=this.cols;var aR=-1;var aU=-1;var aQ;if(this.inBounds(aP,aV)){for(aQ=0;aQ<aS.length;aQ++){if(aV>=aS[aQ][0]&&aV<aS[aQ][1]){aR=aQ;break}}for(aQ=0;aQ<aT.length;aQ++){if(aP>=aT[aQ][0]&&aP<aT[aQ][1]){aU=aQ;break}}if(aR>=0&&aU>=0){aO={row:aR,col:aU};aO.grid=this.grid;aO.date=this.grid.getCellDate(aO)}}return aO},computeBounds:function(){var aO;if(this.containerEl){aO=this.containerEl.offset();this.minX=aO.left;this.maxX=aO.left+this.containerEl.outerWidth();this.minY=aO.top;this.maxY=aO.top+this.containerEl.outerHeight()}},inBounds:function(aO,aP){if(this.containerEl){return aO>=this.minX&&aO<this.maxX&&aP>=this.minY&&aP<this.maxY}return true}};function y(aO){this.coordMaps=aO}y.prototype={coordMaps:null,build:function(){var aP=this.coordMaps;var aO;for(aO=0;aO<aP.length;aO++){aP[aO].build()}},getCell:function(aP,aS){var aR=this.coordMaps;var aO=null;var aQ;for(aQ=0;aQ<aR.length&&!aO;aQ++){aO=aR[aQ].getCell(aP,aS)}return aO}};function ay(aP,aO){this.coordMap=aP;this.options=aO||{}}ay.prototype={coordMap:null,options:null,isListening:false,isDragging:false,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(aO){if(O(aO)){aO.preventDefault();this.startListening(aO);if(!this.options.distance){this.startDrag(aO)}}},startListening:function(aP){var aQ;var aO;if(!this.isListening){if(aP&&this.options.scroll){aQ=ad(au(aP.target));if(!aQ.is(window)&&!aQ.is(document)){this.scrollEl=aQ;this.scrollHandlerProxy=aN(au.proxy(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}this.computeCoords();if(aP){aO=this.getCell(aP);this.origCell=aO;this.origDate=aO?aO.date:null;this.mouseX0=aP.pageX;this.mouseY0=aP.pageY}au(document).on("mousemove",this.mousemoveProxy=au.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=au.proxy(this,"mouseup")).on("selectstart",this.preventDefault);this.isListening=true;this.trigger("listenStart",aP)}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(aP){var aQ;var aO;if(!this.isDragging){aQ=this.options.distance||1;aO=Math.pow(aP.pageX-this.mouseX0,2)+Math.pow(aP.pageY-this.mouseY0,2);if(aO>=aQ*aQ){this.startDrag(aP)}}if(this.isDragging){this.drag(aP)}},startDrag:function(aP){var aO;if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.trigger("dragStart",aP);aO=this.getCell(aP);if(aO){this.cellOver(aO,true)}}},drag:function(aP){var aO;if(this.isDragging){aO=this.getCell(aP);if(!D(aO,this.cell)){if(this.cell){this.cellOut()}if(aO){this.cellOver(aO)}}this.dragScroll(aP)}},cellOver:function(aO){this.cell=aO;this.date=aO.date;this.trigger("cellOver",aO,aO.date)},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cell=null;this.date=null}},mouseup:function(aO){this.stopDrag(aO);this.stopListening(aO)},stopDrag:function(aO){if(this.isDragging){this.stopScrolling();this.trigger("dragStop",aO);this.isDragging=false}},stopListening:function(aO){if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}au(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.trigger("listenStop",aO);this.origCell=this.cell=null;this.origDate=this.date=null}},getCell:function(aO){return this.coordMap.getCell(aO.pageX,aO.pageY)},trigger:function(aO){if(this.options[aO]){this.options[aO].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(aO){aO.preventDefault()},computeScrollBounds:function(){var aO=this.scrollEl;var aP;if(aO){aP=aO.offset();this.scrollBounds={top:aP.top,left:aP.left,bottom:aP.top+aO.outerHeight(),right:aP.left+aO.outerWidth()}}},dragScroll:function(aU){var aQ=this.scrollSensitivity;var aO=this.scrollBounds;var aP,aR;var aV,aW;var aT=0;var aS=0;if(aO){aP=(aQ-(aU.pageY-aO.top))/aQ;aR=(aQ-(aO.bottom-aU.pageY))/aQ;aV=(aQ-(aU.pageX-aO.left))/aQ;aW=(aQ-(aO.right-aU.pageX))/aQ;if(aP>=0&&aP<=1){aT=aP*this.scrollSpeed*-1}else{if(aR>=0&&aR<=1){aT=aR*this.scrollSpeed}}if(aV>=0&&aV<=1){aS=aV*this.scrollSpeed*-1}else{if(aW>=0&&aW<=1){aS=aW*this.scrollSpeed}}}this.setScrollVel(aT,aS)},setScrollVel:function(aP,aO){this.scrollTopVel=aP;this.scrollLeftVel=aO;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(au.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var aO=this.scrollEl;if(this.scrollTopVel<0){if(aO.scrollTop()<=0){this.scrollTopVel=0}}else{if(this.scrollTopVel>0){if(aO.scrollTop()+aO[0].clientHeight>=aO[0].scrollHeight){this.scrollTopVel=0}}}if(this.scrollLeftVel<0){if(aO.scrollLeft()<=0){this.scrollLeftVel=0}}else{if(this.scrollLeftVel>0){if(aO.scrollLeft()+aO[0].clientWidth>=aO[0].scrollWidth){this.scrollLeftVel=0}}}},scrollIntervalFunc:function(){var aP=this.scrollEl;var aO=this.scrollIntervalMs/1000;if(this.scrollTopVel){aP.scrollTop(aP.scrollTop()+this.scrollTopVel*aO)}if(this.scrollLeftVel){aP.scrollLeft(aP.scrollLeft()+this.scrollLeftVel*aO)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.computeCoords()}},scrollHandler:function(){if(!this.scrollIntervalId){this.computeCoords()}}};function D(aP,aO){if(!aP&&!aO){return true}if(aP&&aO){return aP.grid===aO.grid&&aP.row===aO.row&&aP.col===aO.col}return false}function x(aO,aP){this.options=aP=aP||{};this.sourceEl=aO;this.parentEl=aP.parentEl?au(aP.parentEl):aO.parent()}x.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,start:function(aO){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=aO.pageY;this.mouseX0=aO.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}au(document).on("mousemove",this.mousemoveProxy=au.proxy(this,"mousemove"))}},stop:function(aP,aS){var aR=this;var aQ=this.options.revertDuration;function aO(){this.isAnimating=false;aR.destroyEl();this.top0=this.left0=null;if(aS){aS()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;au(document).off("mousemove",this.mousemoveProxy);if(aP&&aQ&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:aQ,complete:aO})}else{aO()}}},getEl:function(){var aO=this.el;if(!aO){this.sourceEl.width();aO=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return aO},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var aP;var aO;this.getEl();if(this.top0===null){this.sourceEl.width();aP=this.sourceEl.offset();aO=this.el.offsetParent().offset();this.top0=aP.top-aO.top;this.left0=aP.left-aO.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(aO){this.topDelta=aO.pageY-this.mouseY0;this.leftDelta=aO.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}};function P(aO){this.view=aO}P.prototype={view:null,cellHtml:"<td/>",rowHtml:function(aS,aT){var aP=this.view;var aO=this.getHtmlRenderer("cell",aS);var aU="";var aR;var aQ;aT=aT||0;for(aR=0;aR<aP.colCnt;aR++){aQ=aP.cellToDate(aT,aR);aU+=aO(aT,aR,aQ)}aU=this.bookendCells(aU,aS,aT);return"<tr>"+aU+"</tr>"},bookendCells:function(aU,aP,aW){var aS=this.view;var aT=this.getHtmlRenderer("intro",aP)(aW||0);var aQ=this.getHtmlRenderer("outro",aP)(aW||0);var aO=aS.opt("isRTL");var aR=aO?aQ:aT;var aV=aO?aT:aQ;if(typeof aU==="string"){return aR+aU+aV}else{return aU.prepend(aR).append(aV)}},getHtmlRenderer:function(aP,aQ){var aO=this.view;var aU;var aR;var aT;var aS;aU=aP+"Html";if(aQ){aR=aQ+az(aP)+"Html"}if(aR&&(aS=aO[aR])){aT=aO}else{if(aR&&(aS=this[aR])){aT=this}else{if((aS=aO[aU])){aT=aO}else{if((aS=this[aU])){aT=this}}}}if(typeof aS==="function"){return function(aV){return aS.apply(aT,arguments)||""}}return function(){return aS||""}}};function ak(aO){P.call(this,aO);this.coordMap=new X(this)}ak.prototype=L(P.prototype);au.extend(ak.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(aO,aP){},getCellDate:function(aO){},getCellDayEl:function(aO){},rangeToSegs:function(aP,aO){},bindHandlers:function(){var aO=this;this.el.on("mousedown",function(aP){if(!au(aP.target).is(".fc-event-container *, .fc-more")&&!au(aP.target).closest(".fc-popover").length){aO.dayMousedown(aP)}});this.bindSegHandlers()},dayMousedown:function(aV){var aT=this;var aW=this.view;var aS=aW.opt("selectable");var aP=null;var aQ;var aR;var aU;var aO=new ay(this.coordMap,{scroll:aW.opt("dragScroll"),dragStart:function(){aW.unselect()},cellOver:function(aX,aY){if(aO.origDate){aU=aT.getCellDayEl(aX);aP=[aY,aO.origDate].sort(a);aQ=aP[0];aR=aP[1].clone().add(aT.cellDuration);if(aS){aT.renderSelection(aQ,aR)}}},cellOut:function(aX,aY){aP=null;aT.destroySelection()},listenStop:function(aX){if(aP){if(aP[0].isSame(aP[1])){aW.trigger("dayClick",aU[0],aQ,aX)}if(aS){aW.reportSelection(aQ,aR,aX)}}}});aO.mousedown(aV)},renderDrag:function(aQ,aP,aO){},destroyDrag:function(){},renderResize:function(aQ,aP,aO){},destroyResize:function(){},renderRangeHelper:function(aS,aP,aQ){var aO=this.view;var aR;if(!aP&&aO.opt("forceEventDuration")){aP=aO.calendar.getDefaultEventEnd(!aS.hasTime(),aS)}aR=aQ?L(aQ.event):{};aR.start=aS;aR.end=aP;aR.allDay=!(aS.hasTime()||(aP&&aP.hasTime()));aR.className=(aR.className||[]).concat("fc-helper");if(!aQ){aR.editable=false}this.renderHelper(aR,aQ)},renderHelper:function(aP,aO){},destroyHelper:function(){},renderSelection:function(aP,aO){this.renderHighlight(aP,aO)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(aP,aO){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(aT,aQ,aP){var aO=this.view;var aS=aO.calendar;var aR=aO.opt("columnFormat");return'<th class="fc-day-header '+aO.widgetHeaderClass+" fc-"+R[aP.day()]+'">'+aK(aS.formatDate(aP,aR))+"</th>"},bgCellHtml:function(aS,aQ,aP){var aO=this.view;var aR=this.getDayClasses(aP);aR.unshift("fc-day",aO.widgetContentClass);return'<td class="'+aR.join(" ")+'" data-date="'+aP.format()+'"></td>'},getDayClasses:function(aQ){var aO=this.view;var aP=aO.calendar.getNow().stripTime();var aR=["fc-"+R[aQ.day()]];if(aO.name==="month"&&aQ.month()!=aO.intervalStart.month()){aR.push("fc-other-month")}if(aQ.isSame(aP,"day")){aR.push("fc-today",aO.highlightStateClass)}else{if(aQ<aP){aR.push("fc-past")}else{aR.push("fc-future")}}return aR}});au.extend(ak.prototype,{mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,renderEvents:function(aO){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(aQ,aP){var aO=this.view;var aT="";var aS=[];var aR;for(aR=0;aR<aQ.length;aR++){aT+=this.renderSegHtml(aQ[aR],aP)}au(aT).each(function(aV,aX){var aU=aQ[aV];var aW=aO.resolveEventEl(aU.event,au(aX));if(aW){aW.data("fc-seg",aU);aU.el=aW;aS.push(aU)}});return aS},renderSegHtml:function(aP,aO){},eventsToSegs:function(aP,aQ,aO){var aR=this;return au.map(aP,function(aS){return aR.eventToSegs(aS,aQ,aO)})},eventToSegs:function(aU,aV,aS){var aR=aU.start.clone().stripZone();var aO=this.view.calendar.getEventEnd(aU).stripZone();var aQ;var aT,aP;if(aV&&aS){aP=aq(aR,aO,aV,aS);aQ=aP?[aP]:[]}else{aQ=this.rangeToSegs(aR,aO)}for(aT=0;aT<aQ.length;aT++){aP=aQ[aT];aP.event=aU;aP.eventStartMS=+aR;aP.eventDurationMS=aO-aR}return aQ},bindSegHandlers:function(){var aP=this;var aO=this.view;au.each({mouseenter:function(aQ,aR){aP.triggerSegMouseover(aQ,aR)},mouseleave:function(aQ,aR){aP.triggerSegMouseout(aQ,aR)},click:function(aQ,aR){return aO.trigger("eventClick",this,aQ.event,aR)},mousedown:function(aQ,aR){if(au(aR.target).is(".fc-resizer")&&aO.isEventResizable(aQ.event)){aP.segResizeMousedown(aQ,aR)}else{if(aO.isEventDraggable(aQ.event)){aP.segDragMousedown(aQ,aR)}}}},function(aQ,aR){aP.el.on(aQ,".fc-event-container > *",function(aT){var aS=au(this).data("fc-seg");if(aS&&!aP.isDraggingSeg&&!aP.isResizingSeg){return aR.call(this,aS,aT)}})})},triggerSegMouseover:function(aO,aP){if(!this.mousedOverSeg){this.mousedOverSeg=aO;this.view.trigger("eventMouseover",aO.el[0],aO.event,aP)}},triggerSegMouseout:function(aO,aP){aP=aP||{};if(this.mousedOverSeg){aO=aO||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",aO.el[0],aO.event,aP)}},segDragMousedown:function(aT,aW){var aV=this;var aX=this.view;var aR=aT.el;var aQ=aT.event;var aU,aS;var aP=new x(aT.el,{parentEl:aX.el,opacity:aX.opt("dragOpacity"),revertDuration:aX.opt("dragRevertDuration"),zIndex:2});var aO=new ay(aX.coordMap,{distance:5,scroll:aX.opt("dragScroll"),listenStart:function(aY){aP.hide();aP.start(aY)},dragStart:function(aY){aV.triggerSegMouseout(aT,aY);aV.isDraggingSeg=true;aX.hideEvent(aQ);aX.trigger("eventDragStart",aR[0],aQ,aY,{})},cellOver:function(aY,a0){var aZ=aT.cellDate||aO.origDate;var a1=aV.computeDraggedEventDates(aT,aZ,a0);aU=a1.start;aS=a1.end;if(aX.renderDrag(aU,aS,aT)){aP.hide()}else{aP.show()}},cellOut:function(){aU=null;aX.destroyDrag();aP.show()},dragStop:function(aZ){var aY=aU&&!aU.isSame(aQ.start);aP.stop(!aY,function(){aV.isDraggingSeg=false;aX.destroyDrag();aX.showEvent(aQ);aX.trigger("eventDragStop",aR[0],aQ,aZ,{});if(aY){aX.eventDrop(aR[0],aQ,aU,aZ)}})},listenStop:function(){aP.stop()}});aO.mousedown(aW)},computeDraggedEventDates:function(aT,aR,aW){var aV=this.view;var aO=aT.event;var aP=aO.start;var aS=aV.calendar.getEventEnd(aO);var aX;var aU;var aQ;if(aW.hasTime()===aR.hasTime()){aX=at(aW,aR);aU=aP.clone().add(aX);if(aO.end===null){aQ=null}else{aQ=aS.clone().add(aX)}}else{aU=aW;aQ=null}return{start:aU,end:aQ}},segResizeMousedown:function(aU,aW){var aV=this;var aX=this.view;var aR=aU.el;var aP=aU.event;var aQ=aP.start;var aT=aX.calendar.getEventEnd(aP);var aS=null;var aO;function aY(){aV.destroyResize();aX.showEvent(aP)}aO=new ay(this.coordMap,{distance:5,scroll:aX.opt("dragScroll"),dragStart:function(aZ){aV.triggerSegMouseout(aU,aZ);aV.isResizingSeg=true;aX.trigger("eventResizeStart",aR[0],aP,aZ,{})},cellOver:function(aZ,a0){if(a0.isBefore(aQ)){a0=aQ}aS=a0.clone().add(aV.cellDuration);if(aS.isSame(aT)){aS=null;aY()}else{aV.renderResize(aQ,aS,aU);aX.hideEvent(aP)}},cellOut:function(){aS=null;aY()},dragStop:function(aZ){aV.isResizingSeg=false;aY();aX.trigger("eventResizeStop",aR[0],aP,aZ,{});if(aS){aX.eventResize(aR[0],aP,aS,aZ)}}});aO.mousedown(aW)},getSegClasses:function(aO,aQ,aS){var aR=aO.event;var aP=["fc-event",aO.isStart?"fc-start":"fc-not-start",aO.isEnd?"fc-end":"fc-not-end"].concat(aR.className,aR.source?aR.source.className:[]);if(aQ){aP.push("fc-draggable")}if(aS){aP.push("fc-resizable")}return aP},getEventSkinCss:function(aP){var aU=this.view;var aO=aP.source||{};var aV=aP.color;var aS=aO.color;var aR=aU.opt("eventColor");var aW=aP.backgroundColor||aV||aO.backgroundColor||aS||aU.opt("eventBackgroundColor")||aR;var aQ=aP.borderColor||aV||aO.borderColor||aS||aU.opt("eventBorderColor")||aR;var aX=aP.textColor||aO.textColor||aU.opt("eventTextColor");var aT=[];if(aW){aT.push("background-color:"+aW)}if(aQ){aT.push("border-color:"+aQ)}if(aX){aT.push("color:"+aX)}return aT.join(";")}});function u(aP,aO){return aP.eventStartMS-aO.eventStartMS||aO.eventDurationMS-aP.eventDurationMS||aO.event.allDay-aP.event.allDay||(aP.event.title||"").localeCompare(aO.event.title)}function aA(aO){ak.call(this,aO)}aA.prototype=L(ak.prototype);au.extend(aA.prototype,{numbersVisible:false,cellDuration:v.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(aP){var aO=this.view;var aQ="";var aR;for(aR=0;aR<aO.rowCnt;aR++){aQ+=this.dayRowHtml(aR,aP)}this.el.html(aQ);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");this.dayEls.each(function(aT,aU){var aS=aO.cellToDate(Math.floor(aT/aO.colCnt),aT%aO.colCnt);aO.trigger("dayRender",null,aS,au(aU))});ak.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(aR,aP){var aO=this.view;var aQ=["fc-row","fc-week",aO.widgetContentClass];if(aP){aQ.push("fc-rigid")}return'<div class="'+aQ.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",aR)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",aR)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(aQ,aP,aO){return this.bgCellHtml(aQ,aP,aO)},buildCoords:function(aP,aS){var aO=this.view.colCnt;var aR,aT,aQ;this.dayEls.slice(0,aO).each(function(aV,aU){aR=au(aU);aT=aR.offset().left;if(aV){aQ[1]=aT}aQ=[aT];aS[aV]=aQ});aQ[1]=aT+aR.outerWidth();this.rowEls.each(function(aV,aU){aR=au(aU);aT=aR.offset().top;if(aV){aQ[1]=aT}aQ=[aT];aP[aV]=aQ});aQ[1]=aT+aR.outerHeight()+this.bottomCoordPadding},getCellDate:function(aO){return this.view.cellToDate(aO)},getCellDayEl:function(aO){return this.dayEls.eq(aO.row*this.view.colCnt+aO.col)},rangeToSegs:function(aP,aO){return this.view.rangeToSegments(aP,aO)},renderDrag:function(aR,aP,aO){var aQ;this.renderHighlight(aR,aP||this.view.calendar.getDefaultEventEnd(true,aR));if(aO&&!aO.el.closest(this.el).length){this.renderRangeHelper(aR,aP,aO);aQ=this.view.opt("dragOpacity");if(aQ!==undefined){this.helperEls.css("opacity",aQ)}return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderResize:function(aQ,aP,aO){this.renderHighlight(aQ,aP);this.renderRangeHelper(aQ,aP,aO)},destroyResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(aR,aP){var aO=[];var aQ=this.renderEventRows([aR]);this.rowEls.each(function(aW,aU){var aT=au(aU);var aV=au('<div class="fc-helper-skeleton"><table/></div>');var aS;if(aP&&aP.row===aW){aS=aP.el.position().top}else{aS=aT.find(".fc-content-skeleton tbody").position().top}aV.css("top",aS).find("table").append(aQ[aW].tbodyEl);aT.append(aV);aO.push(aV[0])});this.helperEls=au(aO)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},renderHighlight:function(aU,aQ){var aP=this.rangeToSegs(aU,aQ);var aT=[];var aR,aO;var aS;for(aR=0;aR<aP.length;aR++){aO=aP[aR];aS=au(this.highlightSkeletonHtml(aO.leftCol,aO.rightCol+1));aS.appendTo(this.rowEls[aO.row]);aT.push(aS[0])}this.highlightEls=au(aT)},destroyHighlight:function(){if(this.highlightEls){this.highlightEls.remove();this.highlightEls=null}},highlightSkeletonHtml:function(aQ,aP){var aO=this.view.colCnt;var aR="";if(aQ>0){aR+='<td colspan="'+aQ+'"/>'}if(aP>aQ){aR+='<td colspan="'+(aP-aQ)+'" class="fc-highlight" />'}if(aO>aP){aR+='<td colspan="'+(aO-aP)+'"/>'}aR=this.bookendCells(aR,"highlight");return'<div class="fc-highlight-skeleton"><table><tr>'+aR+"</tr></table></div>"}});au.extend(aA.prototype,{segs:null,rowStructs:null,renderEvents:function(aQ){var aP=this.rowStructs=this.renderEventRows(aQ);var aO=[];this.rowEls.each(function(aR,aS){au(aS).find(".fc-content-skeleton > table").append(aP[aR].tbodyEl);aO.push.apply(aO,aP[aR].segs)});this.segs=aO},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var aP;var aO;ak.prototype.destroyEvents.call(this);aP=this.rowStructs||[];while((aO=aP.pop())){aO.tbodyEl.remove()}this.segs=null;this.destroySegPopover()},renderEventRows:function(aR){var aP=this.eventsToSegs(aR);var aQ=[];var aO;var aS;aP=this.renderSegs(aP);aO=this.groupSegRows(aP);for(aS=0;aS<aO.length;aS++){aQ.push(this.renderEventRow(aS,aO[aS]))}return aQ},renderSegHtml:function(aU,aQ){var aX=this.view;var aS=aX.opt("isRTL");var aP=aU.event;var aO=aX.isEventDraggable(aP);var aR=!aQ&&aP.allDay&&aU.isEnd&&aX.isEventResizable(aP);var aT=this.getSegClasses(aU,aO,aR);var aY=this.getEventSkinCss(aP);var aW="";var aV;aT.unshift("fc-day-grid-event");if(!aP.allDay&&aU.isStart){aW='<span class="fc-time">'+aK(aX.getEventTimeText(aP))+"</span>"}aV='<span class="fc-title">'+(aK(aP.title||"")||"&nbsp;")+"</span>";return'<a class="'+aT.join(" ")+'"'+(aP.url?' href="'+aK(aP.url)+'"':"")+(aY?' style="'+aY+'"':"")+'><div class="fc-content">'+(aS?aV+" "+aW:aW+" "+aV)+"</div>"+(aR?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(aV,aO){var a0=this.view;var a1=a0.colCnt;var a5=this.buildSegLevels(aO);var aW=Math.max(1,a5.length);var aP=au("<tbody/>");var aU=[];var aS=[];var aY=[];var a3,aR;var aT;var aQ;var a2,a4;var aX;function aZ(a6){while(aT<a6){aX=(aY[a3-1]||[])[aT];if(aX){aX.attr("rowspan",parseInt(aX.attr("rowspan")||1,10)+1)}else{aX=au("<td/>");aQ.append(aX)}aS[a3][aT]=aX;aY[a3][aT]=aX;aT++}}for(a3=0;a3<aW;a3++){aR=a5[a3];aT=0;aQ=au("<tr/>");aU.push([]);aS.push([]);aY.push([]);if(aR){for(a2=0;a2<aR.length;a2++){a4=aR[a2];aZ(a4.leftCol);aX=au('<td class="fc-event-container"/>').append(a4.el);if(a4.leftCol!=a4.rightCol){aX.attr("colspan",a4.rightCol-a4.leftCol+1)}else{aY[a3][aT]=aX}while(aT<=a4.rightCol){aS[a3][aT]=aX;aU[a3][aT]=a4;aT++}aQ.append(aX)}}aZ(a1);this.bookendCells(aQ,"eventSkeleton");aP.append(aQ)}return{row:aV,tbodyEl:aP,cellMatrix:aS,segMatrix:aU,segLevels:a5,segs:aO}},buildSegLevels:function(aP){var aS=[];var aR,aO;var aQ;aP.sort(u);for(aR=0;aR<aP.length;aR++){aO=aP[aR];for(aQ=0;aQ<aS.length;aQ++){if(!w(aO,aS[aQ])){break}}aO.level=aQ;(aS[aQ]||(aS[aQ]=[])).push(aO)}for(aQ=0;aQ<aS.length;aQ++){aS[aQ].sort(aj)}return aS},groupSegRows:function(aQ){var aP=this.view;var aO=[];var aR;for(aR=0;aR<aP.rowCnt;aR++){aO.push([])}for(aR=0;aR<aQ.length;aR++){aO[aQ[aR].row].push(aQ[aR])}return aO}});function w(aO,aR){var aP,aQ;for(aP=0;aP<aR.length;aP++){aQ=aR[aP];if(aQ.leftCol<=aO.rightCol&&aQ.rightCol>=aO.leftCol){return true}}return false}function aj(aP,aO){return aP.leftCol-aO.leftCol}au.extend(aA.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(aQ){var aO=this.rowStructs||[];var aR;var aP;for(aR=0;aR<aO.length;aR++){this.unlimitRow(aR);if(!aQ){aP=false}else{if(typeof aQ==="number"){aP=aQ}else{aP=this.computeRowLevelLimit(aR)}}if(aP!==false){this.limitRow(aR,aP)}}},computeRowLevelLimit:function(aT){var aP=this.rowEls.eq(aT);var aS=aP.height();var aO=this.rowStructs[aT].tbodyEl.children();var aQ,aR;for(aQ=0;aQ<aO.length;aQ++){aR=aO.eq(aQ).removeClass("fc-limited");if(aR.position().top+aR.outerHeight()>aS){return aQ}}return false},limitRow:function(aX,a1){var a4=this;var a2=this.view;var aR=this.rowStructs[aX];var aW=[];var aV=0;var aO;var aP;var aU;var a9;var a7,a8;var bb;var aY;var aQ;var aZ,ba;var aT;var a5;var aS,a6,a3;function a0(bc){while(aV<bc){aO={row:aX,col:aV};bb=a4.getCellSegs(aO,a1);if(bb.length){aZ=aU[a1-1][aV];a3=a4.renderMoreLink(aO,bb);a6=au("<div/>").append(a3);aZ.append(a6);aW.push(a6[0])}aV++}}if(a1&&a1<aR.segLevels.length){aP=aR.segLevels[a1-1];aU=aR.cellMatrix;a9=aR.tbodyEl.children().slice(a1).addClass("fc-limited").get();for(a7=0;a7<aP.length;a7++){a8=aP[a7];a0(a8.leftCol);aQ=[];aY=0;while(aV<=a8.rightCol){aO={row:aX,col:aV};bb=this.getCellSegs(aO,a1);aQ.push(bb);aY+=bb.length;aV++}if(aY){aZ=aU[a1-1][a8.leftCol];ba=aZ.attr("rowspan")||1;aT=[];for(a5=0;a5<aQ.length;a5++){aS=au('<td class="fc-more-cell"/>').attr("rowspan",ba);bb=aQ[a5];aO={row:aX,col:a8.leftCol+a5};a3=this.renderMoreLink(aO,[a8].concat(bb));a6=au("<div/>").append(a3);aS.append(a6);aT.push(aS[0]);aW.push(aS[0])}aZ.addClass("fc-limited").after(au(aT));a9.push(aZ[0])}}a0(a2.colCnt);aR.moreEls=au(aW);aR.limitedEls=au(a9)}},unlimitRow:function(aP){var aO=this.rowStructs[aP];if(aO.moreEls){aO.moreEls.remove();aO.moreEls=null}if(aO.limitedEls){aO.limitedEls.removeClass("fc-limited");aO.limitedEls=null}},renderMoreLink:function(aO,aQ){var aR=this;var aP=this.view;return au('<a class="fc-more"/>').text(this.getMoreLinkText(aQ.length)).on("click",function(aW){var aZ=aP.opt("eventLimitClick");var aT=aP.cellToDate(aO);var aX=au(this);var aY=aR.getCellDayEl(aO);var aS=aR.getCellSegs(aO);var aU=aR.resliceDaySegs(aS,aT);var aV=aR.resliceDaySegs(aQ,aT);if(typeof aZ==="function"){aZ=aP.trigger("eventLimitClick",null,{date:aT,dayEl:aY,moreEl:aX,segs:aU,hiddenSegs:aV},aW)}if(aZ==="popover"){aR.showSegPopover(aT,aO,aX,aU)}else{if(typeof aZ==="string"){aP.calendar.zoomTo(aT,aZ)}}})},showSegPopover:function(aQ,aV,aU,aO){var aR=this;var aT=this.view;var aP=aU.parent();var aS;var aW;if(aT.rowCnt==1){aS=this.view.el}else{aS=this.rowEls.eq(aV.row)}aW={className:"fc-more-popover",content:this.renderSegPopoverContent(aQ,aO),parentEl:this.el,top:aS.offset().top,autoHide:true,viewportConstrain:aT.opt("popoverViewportConstrain"),hide:function(){aR.segPopover.destroy();aR.segPopover=null;aR.popoverSegs=null}};if(aT.opt("isRTL")){aW.right=aP.offset().left+aP.outerWidth()+1}else{aW.left=aP.offset().left-1}this.segPopover=new j(aW);this.segPopover.show()},renderSegPopoverContent:function(aQ,aP){var aO=this.view;var aV=aO.opt("theme");var aU=aQ.format(aO.opt("dayPopoverFormat"));var aT=au('<div class="fc-header '+aO.widgetHeaderClass+'"><span class="fc-close '+(aV?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+aK(aU)+'</span><div class="fc-clear"/></div><div class="fc-body '+aO.widgetContentClass+'"><div class="fc-event-container"></div></div>');var aS=aT.find(".fc-event-container");var aR;aP=this.renderSegs(aP,true);this.popoverSegs=aP;for(aR=0;aR<aP.length;aR++){aP[aR].cellDate=aQ;aS.append(aP[aR].el)}return aT},resliceDaySegs:function(aQ,aO){var aR=au.map(aQ,function(aT){return aT.event});var aP=aO.clone().stripTime();var aS=aP.clone().add(1,"days");return this.eventsToSegs(aR,aP,aS)},getMoreLinkText:function(aP){var aO=this.view;var aQ=aO.opt("eventLimitText");if(typeof aQ==="function"){return aQ(aP)}else{return"+"+aP+" "+aQ}},getCellSegs:function(aO,aR){var aS=this.rowStructs[aO.row].segMatrix;var aT=aR||0;var aQ=[];var aP;while(aT<aS.length){aP=aS[aT][aO.col];if(aP){aQ.push(aP)}aT++}return aQ}});function g(aO){ak.call(this,aO)}g.prototype=L(ak.prototype);au.extend(g.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions();this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();ak.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(aQ,aP,aO){return this.bgCellHtml(aQ,aP,aO)},slatRowHtml:function(){var aW=this.view;var aQ=aW.calendar;var aO=aW.opt("isRTL");var aR="";var aV=this.slotDuration.asMinutes()%15===0;var aS=v.duration(+this.minTime);var aT;var aP;var aU;while(aS<this.maxTime){aT=aW.start.clone().time(aS);aP=aT.minutes();aU='<td class="fc-axis fc-time '+aW.widgetContentClass+'" '+aW.axisStyleAttr()+">"+((!aV||!aP)?"<span>"+aK(aQ.formatDate(aT,aW.opt("axisFormat")))+"</span>":"")+"</td>";aR+="<tr "+(!aP?"":'class="fc-minor"')+">"+(!aO?aU:"")+'<td class="'+aW.widgetContentClass+'"/>'+(aO?aU:"")+"</tr>";aS.add(this.slotDuration)}return aR},processOptions:function(){var aO=this.view;var aQ=aO.opt("slotDuration");var aP=aO.opt("snapDuration");aQ=v.duration(aQ);aP=aP?v.duration(aP):aQ;this.slotDuration=aQ;this.snapDuration=aP;this.cellDuration=aP;this.minTime=v.duration(aO.opt("minTime"));this.maxTime=v.duration(aO.opt("maxTime"))},rangeToSegs:function(aV,aO){var aU=this.view;var aP=[];var aS;var aQ;var aR;var aT,aW;aV=aV.clone().stripZone();aO=aO.clone().stripZone();for(aQ=0;aQ<aU.colCnt;aQ++){aR=aU.cellToDate(0,aQ);aT=aR.clone().time(this.minTime);aW=aR.clone().time(this.maxTime);aS=aq(aV,aO,aT,aW);if(aS){aS.col=aQ;aP.push(aS)}}return aP},resize:function(){this.computeSlatTops();this.updateSegVerticals()},buildCoords:function(aR,aU){var aP=this.view.colCnt;var aQ=this.el.offset().top;var aO=v.duration(+this.minTime);var aT=null;var aS,aV;this.dayEls.slice(0,aP).each(function(aX,aW){aS=au(aW);aV=aS.offset().left;if(aT){aT[1]=aV}aT=[aV];aU[aX]=aT});aT[1]=aV+aS.outerWidth();aT=null;while(aO<this.maxTime){aV=aQ+this.computeTimeTop(aO);if(aT){aT[1]=aV}aT=[aV];aR.push(aT);aO.add(this.snapDuration)}aT[1]=aQ+this.computeTimeTop(aO)},getCellDate:function(aO){var aP=this.view;var aQ=aP.calendar;return aQ.rezoneDate(aP.cellToDate(0,aO.col).time(this.minTime+this.snapDuration*aO.row))},getCellDayEl:function(aO){return this.dayEls.eq(aO.col)},computeDateTop:function(aO,aP){return this.computeTimeTop(v.duration(aO.clone().stripZone()-aP.clone().stripTime()))},computeTimeTop:function(aT){var aR=(aT-this.minTime)/this.slotDuration;var aQ;var aP;var aS;var aO;aR=Math.max(0,aR);aR=Math.min(this.slatEls.length,aR);aQ=Math.floor(aR);aP=aR-aQ;aS=this.slatTops[aQ];if(aP){aO=this.slatTops[aQ+1];return aS+(aO-aS)*aP}else{return aS}},computeSlatTops:function(){var aP=[];var aO;this.slatEls.each(function(aQ,aR){aO=au(aR).position().top;aP.push(aO)});aP.push(aO+this.slatEls.last().outerHeight());this.slatTops=aP},renderDrag:function(aR,aP,aO){var aQ;if(aO){this.renderRangeHelper(aR,aP,aO);aQ=this.view.opt("dragOpacity");if(aQ!==undefined){this.helperEl.css("opacity",aQ)}return true}else{this.renderHighlight(aR,aP||this.view.calendar.getDefaultEventEnd(false,aR))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderResize:function(aQ,aP,aO){this.renderRangeHelper(aQ,aP,aO)},destroyResize:function(){this.destroyHelper()},renderHelper:function(aV,aS){var aU=this.renderEventTable([aV]);var aQ=aU.tableEl;var aP=aU.segs;var aT,aO;var aR;for(aT=0;aT<aP.length;aT++){aO=aP[aT];if(aS&&aS.col===aO.col){aR=aS.el;aO.el.css({left:aR.css("left"),right:aR.css("right"),"margin-left":aR.css("margin-left"),"margin-right":aR.css("margin-right")})}}this.helperEl=au('<div class="fc-helper-skeleton"/>').append(aQ).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(aP,aO){if(this.view.opt("selectHelper")){this.renderRangeHelper(aP,aO)}else{this.renderHighlight(aP,aO)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderHighlight:function(aP,aO){this.highlightEl=au(this.highlightSkeletonHtml(aP,aO)).appendTo(this.el)},destroyHighlight:function(){if(this.highlightEl){this.highlightEl.remove();this.highlightEl=null}},highlightSkeletonHtml:function(aQ,aT){var aY=this.view;var aR=this.rangeToSegs(aQ,aT);var aW="";var aS=0;var aV,aU;var aP;var aX,aO;for(aV=0;aV<aR.length;aV++){aU=aR[aV];if(aS<aU.col){aW+='<td colspan="'+(aU.col-aS)+'"/>';aS=aU.col}aP=aY.cellToDate(0,aS);aX=this.computeDateTop(aU.start,aP);aO=this.computeDateTop(aU.end,aP);aW+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+aX+"px;bottom:-"+aO+'px"/></div></td>';aS++}if(aS<aY.colCnt){aW+='<td colspan="'+(aY.colCnt-aS)+'"/>'}aW=this.bookendCells(aW,"highlight");return'<div class="fc-highlight-skeleton"><table><tr>'+aW+"</tr></table></div>"}});au.extend(g.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(aP){var aO=this.renderEventTable(aP);this.eventSkeletonEl=au('<div class="fc-content-skeleton"/>').append(aO.tableEl);this.el.append(this.eventSkeletonEl);this.segs=aO.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){ak.prototype.destroyEvents.call(this);if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}this.segs=null},renderEventTable:function(aX){var aQ=au("<table><tr/></table>");var aV=aQ.find("tr");var aO=this.eventsToSegs(aX);var aR;var aT,aS;var aP,aW;var aU;aO=this.renderSegs(aO);aR=this.groupSegCols(aO);this.computeSegVerticals(aO);for(aP=0;aP<aR.length;aP++){aW=aR[aP];al(aW);aU=au('<div class="fc-event-container"/>');for(aT=0;aT<aW.length;aT++){aS=aW[aT];aS.el.css(this.generateSegPositionCss(aS));if(aS.bottom-aS.top<30){aS.el.addClass("fc-short")}aU.append(aS.el)}aV.append(au("<td/>").append(aU))}this.bookendCells(aV,"eventSkeleton");return{tableEl:aQ,segs:aO}},updateSegVerticals:function(){var aO=this.segs;var aP;if(aO){this.computeSegVerticals(aO);for(aP=0;aP<aO.length;aP++){aO[aP].el.css(this.generateSegVerticalCss(aO[aP]))}}},computeSegVerticals:function(aP){var aQ,aO;for(aQ=0;aQ<aP.length;aQ++){aO=aP[aQ];aO.top=this.computeDateTop(aO.start,aO.start);aO.bottom=this.computeDateTop(aO.end,aO.start)}},renderSegHtml:function(aV,aQ){var aX=this.view;var aP=aV.event;var aO=aX.isEventDraggable(aP);var aS=!aQ&&aV.isEnd&&aX.isEventResizable(aP);var aU=this.getSegClasses(aV,aO,aS);var aY=this.getEventSkinCss(aP);var aT;var aW;var aR;aU.unshift("fc-time-grid-event");if(aX.isMultiDayEvent(aP)){if(aV.isStart||aV.isEnd){aT=aX.getEventTimeText(aV.start,aV.end);aW=aX.getEventTimeText(aV.start,aV.end,"LT");aR=aX.getEventTimeText(aV.start,null)}}else{aT=aX.getEventTimeText(aP);aW=aX.getEventTimeText(aP,"LT");aR=aX.getEventTimeText(aP.start,null)}return'<a class="'+aU.join(" ")+'"'+(aP.url?' href="'+aK(aP.url)+'"':"")+(aY?' style="'+aY+'"':"")+'><div class="fc-content">'+(aT?'<div class="fc-time" data-start="'+aK(aR)+'" data-full="'+aK(aW)+'"><span>'+aK(aT)+"</span></div>":"")+(aP.title?'<div class="fc-title">'+aK(aP.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(aS?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(aS){var aU=this.view;var aP=aU.opt("isRTL");var aQ=aU.opt("slotEventOverlap");var aO=aS.backwardCoord;var aW=aS.forwardCoord;var aT=this.generateSegVerticalCss(aS);var aR;var aV;if(aQ){aW=Math.min(1,aO+(aW-aO)*2)}if(aP){aR=1-aW;aV=aO}else{aR=aO;aV=1-aW}aT.zIndex=aS.level+1;aT.left=aR*100+"%";aT.right=aV*100+"%";if(aQ&&aS.forwardPressure){aT[aP?"marginLeft":"marginRight"]=10*2}return aT},generateSegVerticalCss:function(aO){return{top:aO.top,bottom:-aO.bottom}},groupSegCols:function(aQ){var aP=this.view;var aO=[];var aR;for(aR=0;aR<aP.colCnt;aR++){aO.push([])}for(aR=0;aR<aQ.length;aR++){aO[aQ[aR].col].push(aQ[aR])}return aO}});function al(aO){var aQ;var aR;var aP;aO.sort(u);aQ=A(aO);aa(aQ);if((aR=aQ[0])){for(aP=0;aP<aR.length;aP++){ae(aR[aP])}for(aP=0;aP<aR.length;aP++){K(aR[aP],0,0)}}}function A(aP){var aS=[];var aR,aO;var aQ;for(aR=0;aR<aP.length;aR++){aO=aP[aR];for(aQ=0;aQ<aS.length;aQ++){if(!aM(aO,aS[aQ]).length){break}}aO.level=aQ;(aS[aQ]||(aS[aQ]=[])).push(aO)}return aS}function aa(aS){var aR,aT;var aQ,aO;var aP;for(aR=0;aR<aS.length;aR++){aT=aS[aR];for(aQ=0;aQ<aT.length;aQ++){aO=aT[aQ];aO.forwardSegs=[];for(aP=aR+1;aP<aS.length;aP++){aM(aO,aS[aP],aO.forwardSegs)}}}}function ae(aP){var aO=aP.forwardSegs;var aS=0;var aR,aQ;if(aP.forwardPressure===undefined){for(aR=0;aR<aO.length;aR++){aQ=aO[aR];ae(aQ);aS=Math.max(aS,1+aQ.forwardPressure)}aP.forwardPressure=aS}}function K(aP,aR,aS){var aO=aP.forwardSegs;var aQ;if(aP.forwardCoord===undefined){if(!aO.length){aP.forwardCoord=1}else{aO.sort(ax);K(aO[0],aR+1,aS);aP.forwardCoord=aO[0].backwardCoord}aP.backwardCoord=aP.forwardCoord-(aP.forwardCoord-aS)/(aR+1);for(aQ=0;aQ<aO.length;aQ++){K(aO[aQ],0,aP.forwardCoord)}}}function aM(aO,aR,aQ){aQ=aQ||[];for(var aP=0;aP<aR.length;aP++){if(f(aO,aR[aP])){aQ.push(aR[aP])}}return aQ}function f(aP,aO){return aP.bottom>aO.top&&aP.top<aO.bottom}function ax(aP,aO){return aO.forwardPressure-aP.forwardPressure||(aP.backwardCoord||0)-(aO.backwardCoord||0)||u(aP,aO)}aJ.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var aO=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=aO+"-widget-header";this.widgetContentClass=aO+"-widget-content";this.highlightStateClass=aO+"-state-highlight";this.documentMousedownProxy=au.proxy(this,"documentMousedown");this.documentDragStartProxy=au.proxy(this,"documentDragStart")},render:function(){this.updateSize();this.trigger("viewRender",this,this,this.el);au(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect();this.trigger("viewDestroy",this,this,this.el);this.destroyEvents();this.el.empty();au(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(aO,aP){},updateSize:function(aO){if(aO){this.recordScroll()}this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var aO=this.calendar;this.setHeight(aO.getSuggestedViewHeight(),aO.isHeightAuto())},setHeight:function(aP,aO){},computeScrollerHeight:function(aO){var aQ=this.el.add(this.scrollerEl);var aP;aQ.css({position:"relative",left:-1});aP=this.el.outerHeight()-this.scrollerEl.height();aQ.css({position:"",left:""});return aO-aP},recordScroll:function(){if(this.scrollerEl){this.scrollTop=this.scrollerEl.scrollTop()}},restoreScroll:function(){if(this.scrollTop!==null){this.scrollerEl.scrollTop(this.scrollTop)}},renderEvents:function(aO){this.segEach(function(aP){this.trigger("eventAfterRender",aP.event,aP.event,aP.el)});this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(aO){this.trigger("eventDestroy",aO.event,aO.event,aO.el)})},resolveEventEl:function(aP,aO){var aQ=this.trigger("eventRender",aP,aP,aO);if(aQ===false){aO=null}else{if(aQ&&aQ!==true){aO=au(aQ)}}return aO},showEvent:function(aO){this.segEach(function(aP){aP.el.css("visibility","")},aO)},hideEvent:function(aO){this.segEach(function(aP){aP.el.css("visibility","hidden")},aO)},segEach:function(aR,aQ){var aO=this.getSegs();var aP;for(aP=0;aP<aO.length;aP++){if(!aQ||aO[aP].event._id===aQ._id){aR.call(this,aO[aP])}}},getSegs:function(){},renderDrag:function(aQ,aP,aO){},destroyDrag:function(){},documentDragStart:function(aQ,aR){var aS=this;var aO=null;var aP;if(this.opt("droppable")){aP=new ay(this.coordMap,{cellOver:function(aT,aU){aO=aU;aS.renderDrag(aU)},cellOut:function(){aO=null;aS.destroyDrag()}});au(document).one("dragstop",function(aT,aU){aS.destroyDrag();if(aO){aS.trigger("drop",aT.target,aO,aT,aU)}});aP.startDrag(aQ)}},select:function(aQ,aO,aP){this.unselect(aP);this.renderSelection(aQ,aO);this.reportSelection(aQ,aO,aP)},renderSelection:function(aP,aO){},reportSelection:function(aQ,aO,aP){this.isSelected=true;this.trigger("select",null,aQ,aO,aP)},unselect:function(aO){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,aO)}},destroySelection:function(){},documentMousedown:function(aO){var aP;if(this.isSelected&&this.opt("unselectAuto")&&O(aO)){aP=this.opt("unselectCancel");if(!aP||!au(aO.target).closest(aP).length){this.unselect(aO)}}}};function aJ(a6){var a4=this;a4.calendar=a6;a4.opt=aP;a4.trigger=a7;a4.isEventDraggable=ba;a4.isEventResizable=bc;a4.eventDrop=a9;a4.eventResize=aQ;var aZ=a6.reportEventChange;var aR=a6.options;var bd=v.duration(aR.nextDayThreshold);a4.init();function aP(bk){var bj=aR[bk];if(au.isPlainObject(bj)&&!T(bk)){return C(bj,a4.name)}return bj}function a7(bj,bk){return a6.trigger.apply(a6,[bj,bk||a4].concat(Array.prototype.slice.call(arguments,2),[a4]))}function ba(bj){var bk=bj.source||{};return aL(bj.startEditable,bk.startEditable,aP("eventStartEditable"),bj.editable,bk.editable,aP("editable"))}function bc(bj){var bk=bj.source||{};return aL(bj.durationEditable,bk.durationEditable,aP("eventDurationEditable"),bj.editable,bk.editable,aP("editable"))}a4.getEventTimeText=function(bl,bk){var bm;var bj;if(typeof bl==="object"&&typeof bk==="object"){bm=bl;bj=bk;bk=arguments[2]}else{bm=bl.start;bj=bl.end}bk=bk||aP("timeFormat");if(bj&&aP("displayEventEnd")){return a6.formatRange(bm,bj,bk)}else{return a6.formatDate(bm,bk)}};function a9(bk,bm,bj,bl){var bn=a6.mutateEvent(bm,bj,null);a7("eventDrop",bk,bm,bn.dateDelta,function(){bn.undo();aZ()},bl,{});aZ()}function aQ(bj,bm,bl,bk){var bn=a6.mutateEvent(bm,null,bl);a7("eventResize",bj,bm,bn.durationDelta,function(){bn.undo();aZ()},bk,{});aZ()}a4.isHiddenDay=aY;a4.skipHiddenDays=a0;a4.getCellsPerWeek=a1;a4.dateToCell=bh;a4.dateToDayOffset=be;a4.dayOffsetToCellOffset=a5;a4.cellOffsetToCell=aV;a4.cellToDate=aW;a4.cellToCellOffset=bi;a4.cellOffsetToDayOffset=aO;a4.dayOffsetToDate=a8;a4.rangeToSegments=a2;a4.isMultiDayEvent=bg;var bf=aP("hiddenDays")||[];var aU=[];var a3;var aS=[];var bb=[];var aT=aP("isRTL");(function(){if(aP("weekends")===false){bf.push(0,6)}for(var bk=0,bj=0;bk<7;bk++){aS[bk]=bj;aU[bk]=au.inArray(bk,bf)!=-1;if(!aU[bk]){bb[bj]=bk;bj++}}a3=bj;if(!a3){throw"invalid hiddenDays"}})();function aY(bj){if(v.isMoment(bj)){bj=bj.day()}return aU[bj]}function a1(){return a3}function a0(bl,bm,bj){var bk=bl.clone();bm=bm||1;while(aU[(bk.day()+(bj?bm:0)+7)%7]){bk.add(bm,"days")}return bk}function aW(){var bl=bi.apply(null,arguments);var bj=aO(bl);var bk=a8(bj);return bk}function bi(bo,bm){var bl=a4.colCnt;var bk=aT?-1:1;var bj=aT?bl-1:0;if(typeof bo=="object"){bm=bo.col;bo=bo.row}var bn=bo*bl+(bm*bk+bj);return bn}function aO(bk){var bj=a4.start.day();bk+=aS[bj];return Math.floor(bk/a3)*7+bb[(bk%a3+a3)%a3]-bj}function a8(bj){return a4.start.clone().add(bj,"days")}function bh(bl){var bk=be(bl);var bm=a5(bk);var bj=aV(bm);return bj}function be(bj){return bj.clone().stripTime().diff(a4.start,"days")}function a5(bk){var bj=a4.start.day();bk+=bj;return Math.floor(bk/7)*a3+aS[(bk%7+7)%7]-aS[bj]}function aV(bo){var bm=a4.colCnt;var bk=aT?-1:1;var bj=aT?bm-1:0;var bn=Math.floor(bo/bm);var bl=((bo%bm+bm)%bm)*bk+bj;return{row:bn,col:bl}}function a2(bn,bl){var bo=a4.rowCnt;var by=a4.colCnt;var bz=[];var bB=aX(bn,bl);var bC=be(bB.start);var bx=be(bB.end);var bA=a5(bC);var bp=a5(bx)-1;for(var bq=0;bq<bo;bq++){var bk=bq*by;var bu=bk+by-1;var bv=Math.max(bA,bk);var bm=Math.min(bp,bu);if(bv<=bm){var bj=aV(bv);var bw=aV(bm);var bt=[bj.col,bw.col].sort();var br=aO(bv)==bC;var bs=aO(bm)+1==bx;bz.push({row:bq,leftCol:bt[0],rightCol:bt[1],isStart:br,isEnd:bs})}}return bz}function aX(bn,bj){var bm=bn.clone().stripTime();var bl;var bk;if(bj){bl=bj.clone().stripTime();bk=+bj.time();if(bk&&bk>=bd){bl.add(1,"days")}}if(!bj||bl<=bm){bl=bm.clone().add(1,"days")}return{start:bm,end:bl}}function bg(bk){var bj=aX(bk.start,bk.end);return bj.end.diff(bj.start,"days")>1}}function t(aO){aJ.call(this,aO);this.dayGrid=new aA(this);this.coordMap=this.dayGrid.coordMap}t.prototype=L(aJ.prototype);au.extend(t.prototype,{dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,render:function(aQ,aO,aP){this.rowCnt=aQ;this.colCnt=aO;this.dayNumbersVisible=aP;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows());aJ.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy();aJ.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+aK(this.opt("weekNumberTitle"))+"</span></th>"}},numberIntroHtml:function(aO){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(aO,0))+"</span></td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(aR,aP,aO){var aQ;if(!this.dayNumbersVisible){return"<td/>"}aQ=this.dayGrid.getDayClasses(aO);aQ.unshift("fc-day-number");return'<td class="'+aQ.join(" ")+'" data-date="'+aO.format()+'">'+aO.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var aO=this.opt("eventLimit");return aO&&typeof aO!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=E(this.el.find(".fc-week-number"))}},setHeight:function(aQ,aO){var aP=this.opt("eventLimit");var aR;o(this.scrollerEl);Z(this.headRowEl);this.dayGrid.destroySegPopover();if(aP&&typeof aP==="number"){this.dayGrid.limitRows(aP)}aR=this.computeScrollerHeight(aQ);this.setGridHeight(aR,aO);if(aP&&typeof aP!=="number"){this.dayGrid.limitRows(aP)}if(!aO&&aE(this.scrollerEl,aR)){aD(this.headRowEl,h(this.scrollerEl));aR=this.computeScrollerHeight(aQ);this.scrollerEl.height(aR);this.restoreScroll()}},setGridHeight:function(aP,aO){if(aO){c(this.dayGrid.rowEls)}else{B(this.dayGrid.rowEls,aP,true)}},renderEvents:function(aO){this.dayGrid.renderEvents(aO);this.updateHeight();aJ.prototype.renderEvents.call(this,aO)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){aJ.prototype.destroyEvents.call(this);this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(aQ,aP,aO){return this.dayGrid.renderDrag(aQ,aP,aO)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(aP,aO){this.dayGrid.renderSelection(aP,aO)},destroySelection:function(){this.dayGrid.destroySelection()}});am({fixedWeekCount:true});ai.month=ag;function ag(aO){t.call(this,aO)}ag.prototype=L(t.prototype);au.extend(ag.prototype,{name:"month",incrementDate:function(aO,aP){return aO.clone().stripTime().add(aP,"months").startOf("month")},render:function(aO){var aP;this.intervalStart=aO.clone().stripTime().startOf("month");this.intervalEnd=this.intervalStart.clone().add(1,"months");this.start=this.intervalStart.clone();this.start=this.skipHiddenDays(this.start);this.start.startOf("week");this.start=this.skipHiddenDays(this.start);this.end=this.intervalEnd.clone();this.end=this.skipHiddenDays(this.end,-1,true);this.end.add((7-this.end.weekday())%7,"days");this.end=this.skipHiddenDays(this.end,-1,true);aP=Math.ceil(this.end.diff(this.start,"weeks",true));if(this.isFixedWeeks()){this.end.add(6-aP,"weeks");aP=6}this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat"));t.prototype.render.call(this,aP,this.getCellsPerWeek(),true)},setGridHeight:function(aP,aO){aO=aO||this.opt("weekMode")==="variable";if(aO){aP*=this.rowCnt/6}B(this.dayGrid.rowEls,aP,!aO)},isFixedWeeks:function(){var aO=this.opt("weekMode");if(aO){return aO==="fixed"}return this.opt("fixedWeekCount")}});ai.basicWeek=aF;function aF(aO){t.call(this,aO)}aF.prototype=L(t.prototype);au.extend(aF.prototype,{name:"basicWeek",incrementDate:function(aO,aP){return aO.clone().stripTime().add(aP,"weeks").startOf("week")},render:function(aO){this.intervalStart=aO.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,true);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 ");t.prototype.render.call(this,1,this.getCellsPerWeek(),false)}});ai.basicDay=J;function J(aO){t.call(this,aO)}J.prototype=L(t.prototype);au.extend(J.prototype,{name:"basicDay",incrementDate:function(aP,aQ){var aO=aP.clone().stripTime().add(aQ,"days");aO=this.skipHiddenDays(aO,aQ<0?-1:1);return aO},render:function(aO){this.start=this.intervalStart=aO.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));t.prototype.render.call(this,1,1,false)}});am({allDaySlot:true,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:ap,timeFormat:{agenda:l},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true});var b=5;function ap(aP,aO){return aO.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function l(aP,aO){return aO.longDateFormat("LT").replace(/\s*a$/i,"")}function G(aO){aJ.call(this,aO);this.timeGrid=new g(this);if(this.opt("allDaySlot")){this.dayGrid=new aA(this);this.coordMap=new y([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}}G.prototype=L(aJ.prototype);au.extend(G.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(aO){this.rowCnt=1;this.colCnt=aO;this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=au('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)");aJ.prototype.render.call(this);this.resetScroll()},destroy:function(){this.timeGrid.destroy();if(this.dayGrid){this.dayGrid.destroy()}aJ.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var aQ;var aP;var aO;var aR;if(this.opt("weekNumbers")){aQ=this.cellToDate(0,0);aP=this.calendar.calculateWeekNumber(aQ);aO=this.opt("weekNumberTitle");if(this.opt("isRTL")){aR=aP+aO}else{aR=aO+aP}return'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+aK(aR)+"</span></th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||aK(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(aO){if(aO){this.timeGrid.resize()}aJ.prototype.updateSize.call(this,aO)},updateWidth:function(){this.axisWidth=E(this.el.find(".fc-axis"))},setHeight:function(aQ,aO){var aP;var aR;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");o(this.scrollerEl);Z(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();aP=this.opt("eventLimit");if(aP&&typeof aP!=="number"){aP=b}if(aP){this.dayGrid.limitRows(aP)}}if(!aO){aR=this.computeScrollerHeight(aQ);if(aE(this.scrollerEl,aR)){aD(this.noScrollRowEls,h(this.scrollerEl));aR=this.computeScrollerHeight(aQ);this.scrollerEl.height(aR);this.restoreScroll()}else{this.scrollerEl.height(aR).css("overflow","hidden");this.bottomRuleEl.show()}}},resetScroll:function(){var aR=this;var aQ=v.duration(this.opt("scrollTime"));var aP=this.timeGrid.computeTimeTop(aQ);aP=Math.ceil(aP);if(aP){aP++}function aO(){aR.scrollerEl.scrollTop(aP)}aO();setTimeout(aO,0)},renderEvents:function(aP){var aS=[];var aQ=[];var aT=[];var aR;var aO;for(aO=0;aO<aP.length;aO++){if(aP[aO].allDay){aS.push(aP[aO])}else{aQ.push(aP[aO])}}aR=this.timeGrid.renderEvents(aQ);if(this.dayGrid){aT=this.dayGrid.renderEvents(aS)}this.updateHeight();aJ.prototype.renderEvents.call(this,aP)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){aJ.prototype.destroyEvents.call(this);this.recordScroll();this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(aQ,aP,aO){if(aQ.hasTime()){return this.timeGrid.renderDrag(aQ,aP,aO)}else{if(this.dayGrid){return this.dayGrid.renderDrag(aQ,aP,aO)}}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(aP,aO){if(aP.hasTime()||aO.hasTime()){this.timeGrid.renderSelection(aP,aO)}else{if(this.dayGrid){this.dayGrid.renderSelection(aP,aO)}}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});ai.agendaWeek=i;function i(aO){G.call(this,aO)}i.prototype=L(G.prototype);au.extend(i.prototype,{name:"agendaWeek",incrementDate:function(aO,aP){return aO.clone().stripTime().add(aP,"weeks").startOf("week")},render:function(aO){this.intervalStart=aO.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,true);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 ");G.prototype.render.call(this,this.getCellsPerWeek())}});ai.agendaDay=aw;function aw(aO){G.call(this,aO)}aw.prototype=L(G.prototype);au.extend(aw.prototype,{name:"agendaDay",incrementDate:function(aP,aQ){var aO=aP.clone().stripTime().add(aQ,"days");aO=this.skipHiddenDays(aO,aQ<0?-1:1);return aO},render:function(aO){this.start=this.intervalStart=aO.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));G.prototype.render.call(this,1)}})});