window.Onpage_Help=function(g){var h=window.jQuery||null;if(h==null){return}g=g||{};var o={include_all:true,icon_1:"fa fa-question",icon_2:"fa fa-lightbulb-o",base:"",code_highlight:(!!window.Rainbow?"rainbow":(!!window.Prism?"prism":null)),add_panels:true,panel_content_selector:".info-section",panel_content_title:".info-title"};this.settings=h.extend({},o,g);var p=this.settings.base;var B=document.all&&!window.atob;var F={};var n={};var A={};var d=0;var j=false;var k=false;var v=this,E=this;var D="";var G=null;var m,e;var w=function(){if(!G){return}var H=-1;h(document).off("focusin.ace.help").on("focusin.ace.help",function(I){if(!(G[0]==I.target||h.contains(G[0],I.target))){G.focus()}if(I.target==document&&H>-1){h("body,html").scrollTop(H);H=-1}});h(window).on("blur.ace.help",function(){H=h(window).scrollTop()})};var C=function(){h(document).off("focusin.ace.help");h(window).off("blur.ace.help")};this.toggle=function(){if(k){v.disable()}else{v.enable()}};this.enable=function(){if(k){return}if(typeof E.settings.before_enable==="function"&&E.settings.before_enable.call(v)===false){return}k=true;h(".onpage-help-backdrop, .onpage-help-section").removeClass("hidden");D=document.body.style.overflowX;document.body.style.overflowX="hidden";u();w();if(typeof E.settings.after_enable==="function"){E.settings.after_enable.call(v)}};this.disable=function(){if(!k){return}if(typeof E.settings.before_disable==="function"&&E.settings.before_disable.call(v)){return}k=false;h(".onpage-help-backdrop, .onpage-help-section").addClass("hidden");document.body.style.overflowX=D;C();if(typeof E.settings.after_disable==="function"){E.settings.after_disable.call(v)}};this.is_active=function(){return k};this.show_section_help=function(H){y(H,true)};this.init=function(){if(j){return}G=h('<div class="onpage-help-container" id="onpage-help-container" tabindex="-1" />').appendTo("body");G.append('<div class="onpage-help-backdrop hidden" />');h(window).on("resize.onpage_help",function(){if(!k){return}u();if(i!=null&&i.hasClass("in")){b();q()}});j=true};this.init();this.update_sections=function(){l(true)};function u(){if(!k){return}l();m=document.body.scrollHeight-2;e=document.body.scrollWidth-2;for(var H in F){if(F.hasOwnProperty(H)){s(H)}}for(var H in F){if(F.hasOwnProperty(H)){c(H)}}}function l(J){if(!(J===true||d==0)){return}if(J===true){G.find(".onpage-help-section").remove()}F={};n={};d=0;var I=0,H=0;var K=h("*").contents().filter(function(){return this.nodeType==8});h(K).each(function(){var M;if((M=h.trim(this.data).match(/#section\s*:\s*([\w\d\-\.\/]+)/i))){var L=M[1];if(!(L in F)){F[L]=this}}if((M=h.trim(this.data).match(/\/section\s*:\s*([\w\d\-\.\/]+)/i))){var L=M[1];if(!(L in n)&&(L in F)){n[L]=this;d++}}})}function s(I){if(!(I in F)||!(I in n)){return}var M=1000000,R=1000000,J=-1000000,Q=-1000000;var O=false;var H=[];var L=F[I];var P=n[I];while(L!=P){L=L.nextSibling;if(L==null){break}else{if(L.nodeType==1){H.push(L)}}}var N=H.length;if(N>0&&!E.settings.include_all){H=N==1?[H[0]]:[H[0],H[N-1]]}h(H).each(function(){var V=h(this);if(V.is(":hidden")){return}var W=V.offset();var T=V.outerWidth();var U=V.outerHeight();if(!W||!T||!U){return}O=true;if(W.left<M){M=W.left}if(W.left+T>J){J=W.left+T}if(W.top<R){R=W.top}if(W.top+U>Q){Q=W.top+U}});if(!O){A[I]={is_hidden:true};return}M-=1;R-=1;J+=1;Q+=1;var K=J-M,S=Q-R;if(M+K<2||M>e||R+S<2||R>m){A[I]={is_hidden:true};return}A[I]={left:parseInt(M),top:parseInt(R),width:parseInt(K),height:parseInt(S)}}function c(H){if(!(H in A)||!G){return}var J=G.find('.onpage-help-section[data-section="'+H+'"]').eq(0);if(J.length==0){J=h('<a class="onpage-help-section" href="#" />').appendTo(G);if(B){J.append('<span class="ie-hover-fix" />')}if(E.settings.icon_1){J.append('<i class="help-icon-1 '+E.settings.icon_1+'"></i>')}if(E.settings.icon_2){J.append('<i class="help-icon-2 '+E.settings.icon_2+'"></i>')}J.attr("data-section",H);J.on("click",function(K){K.preventDefault();y(H)})}var I=A[H];if(I.is_hidden===true){J.addClass("hidden");return}J.css({left:I.left,top:I.top,width:I.width,height:I.height});J.removeClass("hidden");J.removeClass("help-section-small help-section-smaller");if(I.height<55||I.width<55){J.addClass("help-section-smaller")}else{if(I.height<75||I.width<75){J.addClass("help-section-small")}}}var f=[];var r=-1;var x=null;var t=0;var i=null;function q(){if(!x){return}var I=x[0];var J=I.scrollHeight<=I.clientHeight;var H=!!h.event.special.mousewheel?"mousewheel.ace.help":"mousewheel.ace.help DOMMouseScroll.ace.help";x.parent().off(H).on(H,function(K){if(J){K.preventDefault()}else{K.deltaY=K.deltaY||0;var L=(K.deltaY>0||K.originalEvent.detail<0||K.originalEvent.wheelDelta>0)?1:-1;if(L==-1&&I.scrollTop+I.clientHeight>=I.scrollHeight){K.preventDefault()}else{if(L==1&&I.scrollTop<=0){K.preventDefault()}}}})}function b(){if(!x){return}var H=parseInt(i.find(".modal-dialog").css("margin-top"));H=H+110+parseInt(H/2);t=parseInt(h(window).innerHeight()-H+40);x.css({"max-height":t})}function y(I,H){if(i==null){i=h('<div id="onpage-help-modal" class="modal onpage-help-modal" tabindex="-1" role="dialog" aria-labelledby="HelpModalDialog" aria-hidden="true">			  <div class="modal-dialog modal-lg">				<div class="modal-content">					<div class="modal-header">					  <div class="pull-right onpage-help-modal-buttons">						<button aria-hidden="true" data-navdir="up" type="button" class="disabled btn btn-white btn-success btn-sm"><i class="ace-icon fa fa-level-up fa-flip-horizontal bigger-125 icon-only"></i></button>						&nbsp;						<button aria-hidden="true" data-navdir="back" type="button" class="disabled btn btn-white btn-info btn-sm"><i class="ace-icon fa fa-arrow-left icon-only"></i></button>						<button aria-hidden="true" data-navdir="forward" type="button" class="disabled btn btn-white btn-info  btn-sm"><i class="ace-icon fa fa-arrow-right icon-only"></i></button>						&nbsp;						<button aria-hidden="true" data-dismiss="modal" class="btn btn-white btn-danger btn-sm" type="button"><i class="ace-icon fa fa-times icon-only"></i></button>					  </div>					  <h4 class="modal-title">Help Dialog</h4>					</div>					<div class="modal-body"><div class="onpage-help-content"></div></div>				</div>			  </div>			</div>').appendTo("body");x=i.find(".modal-body");x.css({"overflow-y":"auto","overflow-x":"hidden"});i.css({overflow:"hidden"}).on("show.bs.modal",function(){C()}).on("hidden.bs.modal",function(){w()});i.find(".onpage-help-modal-buttons").on("click","button[data-navdir]",function(){var M=h(this).attr("data-navdir");if(M=="back"){if(r>0){r--;y(f[r],false)}}else{if(M=="forward"){if(r<f.length-1){r++;y(f[r],false)}}else{if(M=="up"){var N=h(this),L;if(N.hasClass("disabled")||!(L=N.attr("data-url"))){return}y(L,true)}}}})}if(!i.hasClass("in")){if(document.body.lastChild!=i[0]){h(document.body).append(i)}i.modal("show");b()}i.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>');var J=h(".onpage-help-content");J.addClass("hidden");h(document.body).removeClass("modal-open");var K=I.match(/file\:(.*?)\:(.+)/i);if(K&&K.length==3){a(K[2],K[1],false);return}I=I.replace(/^#/g,"");if(typeof E.settings.section_url==="function"){url=E.settings.section_url.call(v,I)}h.ajax({url:url,dataType:"text"}).done(function(ab){var Y="",O="";if(typeof E.settings.section_title==="function"){Y=E.settings.section_title.call(v,ab,I,url)}else{var L=function(ac){return ac.replace(/[\-\.\(\)\=\"\'\\\/]/g,function(ae,ad){return"\\"+ae})};var aa=I;while(Y.length==0){var Z='\\<([a-z][a-z0-9]*)(?:\\s+)(?:[^\\<\\>]+?)data\\-id\\=\\"\\#'+L(aa)+'\\"(?:[^\\>]*)\\>([\\s\\S]*?)</\\1>';var R=new RegExp(Z,"im");var P=ab.match(Z);if(P&&P[2]){Y=P[2];break}var N;if((N=aa.lastIndexOf("."))>-1){aa=aa.substr(0,N)}else{break}}}i.find(".modal-title").html(h.trim(Y)||"&nbsp;");if(typeof E.settings.section_content==="function"){O=E.settings.section_content.call(v,ab,I,url)}else{var W="<!-- #section:"+I+" -->";var X=ab.indexOf(W);var V=ab.indexOf("<!-- /section:"+I+" -->",X);if(X==-1||V==-1){i.find(".modal-title").html("&nbsp;");return}O=ab.substring(X+W.length+1,V)}if(typeof E.settings.code_highlight==="function"){O=E.settings.code_highlight.call(v,O)}else{O=O.replace(/\<pre((?:(?:.*?)(?:data\-language=["'](?:[\w\d]+)["'])(?:.*?))|(?:(?:.*?)(?:class=["'](?:.*?)language\-(?:[\w\d]+)(?:.*?)["'])(?:.*?)))\>([\s\S]+?)\<\/pre\>/ig,function(ad,ac,ae){return"<pre"+(ac)+">"+ae.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</pre>"})}if(typeof E.settings.img_url==="function"){O=O.replace(/\<img(?:(?:.*?)src=["']([^"']+)["'])/ig,function(ad,ae){var ac=E.settings.img_url.call(v,ae);return ad.replace(ae,ac)})}J.empty().append(O);if(typeof E.settings.code_highlight==="function"){E.settings.code_highlight.call(v,J)}else{if(E.settings.code_highlight==="rainbow"){try{Rainbow.color(J[0])}catch(Q){}}else{if(E.settings.code_highlight==="prism"){try{J.find('pre[class*="language-"],code[class*="language-"]').each(function(){Prism.highlightElement(this)})}catch(Q){}}}}if(E.settings.add_panels){J.find(E.settings.panel_content_selector).each(function(){var ac=h(this).prevAll(E.settings.panel_content_title);if(ac.length==0){return false}ac=ac.attr("class","panel-title").wrapInner('<a class="help-panel-toggle" href="#" data-parent="#" data-toggle="collapse" />').wrap('<div class="panel-heading" />').closest(".panel-heading");h(this).wrap('<div class="panel panel-default panel-help"><div class="panel-collapse collapse"><div class="panel-body"></div></div></div>');h(this).closest(".panel").prepend(ac)});var M=h(".panel-group").length;J.find(".panel").each(function(){if(h(this).parent().hasClass("panel-group")){return}var ad="panel-group-help-"+(++M);var ae=h('<div class="panel-group" />').insertBefore(this);ae.attr("id",ad);var ac=0;ae.siblings(".panel").appendTo(ae);ae.find(".help-panel-toggle").append('<i class="pull-right ace-icon fa fa-plus" data-icon-show="ace-icon fa fa-plus" data-icon-hide="ace-icon fa fa-minus"></i>').attr("data-parent","#"+ad).each(function(){ac++;h(this).attr("data-target","#"+ad+"-"+ac);h(this).closest(".panel-heading").siblings(".panel-collapse").attr("id",ad+"-"+ac)})});h(document).off("click.help-panel-toggle",".help-panel-toggle").on("click.help-panel-toggle",".help-panel-toggle",function(ac){ac.preventDefault()})}J.removeClass("hidden");var T=J.find("img:visible");if(T.length>0){var S=0;T.off(".help_body_scroll").on("load.help_body_scroll error.help_body_scroll",function(){h(this).off(".help_body_scroll");S++;if(S>=T.length){q()}})}q();J.find(".panel > .panel-collapse").on("shown.bs.collapse hidden.bs.collapse",function(){q()});z(I,H);var U=-1;if((U=I.lastIndexOf("."))>-1){I=I.substr(0,U);i.find("button[data-navdir=up]").removeClass("disabled").attr("data-url",I)}else{i.find("button[data-navdir=up]").addClass("disabled").removeAttr("data-url").blur()}}).fail(function(){i.find(".modal-title").find(".fa-spin").remove().end().find(".hidden").children().unwrap()})}h(document).on("click",'.onpage-help-modal a[href^="http"]',function(){h(this).attr("target","_blank")});h(document).on("click",".help-more",function(I){I.preventDefault();var H=h(this).attr("href");y(H)});function z(I,H){if(H!==false){if(f.length>0){f=f.slice(0,r+1)}if(f[f.length-1]!=I){f.push(I);r=f.length-1}}if(r==0){i.find("button[data-navdir=back]").addClass("disabled").blur()}else{i.find("button[data-navdir=back]").removeClass("disabled")}if(r==f.length-1){i.find("button[data-navdir=forward]").addClass("disabled").blur()}else{i.find("button[data-navdir=forward]").removeClass("disabled")}}h(document).on("click",".open-file[data-open-file]",function(){i.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>');h(".onpage-help-content").addClass("hidden");var H=h(this).attr("data-path")||h(this).text();var I=h(this).attr("data-open-file");a(H,I,true)});function a(I,K,H){var J=I;if(typeof E.settings.file_url==="function"){I=E.settings.file_url.call(v,I,K)}h.ajax({url:I,dataType:"text"}).done(function(L){z("file:"+K+":"+J,H);i.find("button[data-navdir=up]").addClass("disabled").blur();i.find(".modal-title").html(J).wrapInner("<code />");if(K!="json"){if(K!="css"){L=L.replace(/\n[\t]{1,}/g,function(P,O){return P.replace(/\t/g,"  ")})}else{L=L.replace(/\t/g,"  ")}}else{K="javascript";L=JSON.stringify(JSON.parse(L),null,2)}L=L.replace(/\>/g,"&gt;").replace(/\</g,"&lt;");var M=h(".onpage-help-content");M.removeClass("hidden").empty();if(typeof E.settings.code_highlight==="function"){L=E.settings.code_highlight.call(v,L,K);M.html(L)}else{if(E.settings.code_highlight==="rainbow"){try{Rainbow.color(L,K,function(O){M.html(O).wrapInner('<pre data-language="'+K+'" />')})}catch(N){}}else{if(E.settings.code_highlight==="prism"){try{L=Prism.highlight(L,Prism.languages[K],K);M.html(L).wrapInner('<pre class="language-'+K+'" />')}catch(N){}}}}})}};