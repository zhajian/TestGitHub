(function(f,l,r,i){var a="bootstrapDualListbox",m={bootstrap2Compatible:false,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:true,preserveSelectionOnMove:false,selectedListLabel:false,nonSelectedListLabel:false,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:true,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:false,buttonClass:"btn-white btn-bold"},q=/android/i.test(navigator.userAgent.toLowerCase());function o(y,x){this.element=f(y);this.settings=f.extend({},m,x);this._defaults=m;this._name=a;this.init()}function w(x){x.element.trigger("change")}function h(x){x.element.find("option").each(function(z,A){var y=f(A);if(typeof(y.data("original-index"))==="undefined"){y.data("original-index",x.elementCount++)}if(typeof(y.data("_selected"))==="undefined"){y.data("_selected",false)}})}function p(x,z,y){x.element.find("option").each(function(B,C){var A=f(C);if(A.data("original-index")===z){A.prop("selected",y)}})}function j(y,x){return y.replace(/\{(\d+)\}/g,function(z,A){return typeof x[A]!=="undefined"?x[A]:z})}function v(x){if(!x.settings.infoText){return}var C=x.elements.select1.find("option").length,B=x.elements.select2.find("option").length,z=x.element.find("option").length-x.selectedElements,y=x.selectedElements,A="";if(z===0){A=x.settings.infoTextEmpty}else{if(C===z){A=j(x.settings.infoText,[C,z])}else{A=j(x.settings.infoTextFiltered,[C,z])}}x.elements.info1.html(A);x.elements.box1.toggleClass("filtered",!(C===z||z===0));if(y===0){A=x.settings.infoTextEmpty}else{if(B===y){A=j(x.settings.infoText,[B,y])}else{A=j(x.settings.infoTextFiltered,[B,y])}}x.elements.info2.html(A);x.elements.box2.toggleClass("filtered",!(B===y||y===0))}function b(x){x.selectedElements=0;x.elements.select1.empty();x.elements.select2.empty();x.element.find("option").each(function(z,A){var y=f(A);if(y.prop("selected")){x.selectedElements++;x.elements.select2.append(y.clone(true).prop("selected",y.data("_selected")))}else{x.elements.select1.append(y.clone(true).prop("selected",y.data("_selected")))}});if(x.settings.showFilterInputs){n(x,1);n(x,2)}v(x)}function n(x,y){if(!x.settings.showFilterInputs){return}g(x,y);x.elements["select"+y].empty().scrollTop(0);var A=new RegExp(f.trim(x.elements["filterInput"+y].val()),"gi"),z=x.element;if(y===1){z=z.find("option").not(":selected")}else{z=z.find("option:selected")}z.each(function(D,E){var C=f(E),B=true;if(E.text.match(A)||(x.settings.filterOnValues&&C.attr("value").match(A))){B=false;x.elements["select"+y].append(C.clone(true).prop("selected",C.data("_selected")))}x.element.find("option").eq(C.data("original-index")).data("filtered"+y,B)});v(x)}function g(x,y){x.elements["select"+y].find("option").each(function(A,B){var z=f(B);x.element.find("option").eq(z.data("original-index")).data("_selected",z.prop("selected"))})}function u(x){x.find("option").sort(function(z,y){return(f(z).data("original-index")>f(y).data("original-index"))?1:-1}).appendTo(x)}function e(x){x.elements.select1.find("option").each(function(){x.element.find("option").data("_selected",false)})}function s(x){if(x.settings.preserveSelectionOnMove==="all"&&!x.settings.moveOnSelect){g(x,1);g(x,2)}else{if(x.settings.preserveSelectionOnMove==="moved"&&!x.settings.moveOnSelect){g(x,1)}}x.elements.select1.find("option:selected").each(function(z,A){var y=f(A);if(!y.data("filtered1")){p(x,y.data("original-index"),true)}});b(x);w(x);u(x.elements.select2)}function t(x){if(x.settings.preserveSelectionOnMove==="all"&&!x.settings.moveOnSelect){g(x,1);g(x,2)}else{if(x.settings.preserveSelectionOnMove==="moved"&&!x.settings.moveOnSelect){g(x,2)}}x.elements.select2.find("option:selected").each(function(z,A){var y=f(A);if(!y.data("filtered2")){p(x,y.data("original-index"),false)}});b(x);w(x);u(x.elements.select1)}function k(x){if(x.settings.preserveSelectionOnMove==="all"&&!x.settings.moveOnSelect){g(x,1);g(x,2)}else{if(x.settings.preserveSelectionOnMove==="moved"&&!x.settings.moveOnSelect){g(x,1)}}x.element.find("option").each(function(z,A){var y=f(A);if(!y.data("filtered1")){y.prop("selected",true)}});b(x);w(x)}function d(x){if(x.settings.preserveSelectionOnMove==="all"&&!x.settings.moveOnSelect){g(x,1);g(x,2)}else{if(x.settings.preserveSelectionOnMove==="moved"&&!x.settings.moveOnSelect){g(x,2)}}x.element.find("option").each(function(z,A){var y=f(A);if(!y.data("filtered2")){y.prop("selected",false)}});b(x);w(x)}function c(x){x.elements.form.submit(function(y){if(x.elements.filterInput1.is(":focus")){y.preventDefault();x.elements.filterInput1.focusout()}else{if(x.elements.filterInput2.is(":focus")){y.preventDefault();x.elements.filterInput2.focusout()}}});x.element.on("bootstrapDualListbox.refresh",function(y,z){x.refresh(z)});x.elements.filterClear1.on("click",function(){x.setNonSelectedFilter("",true)});x.elements.filterClear2.on("click",function(){x.setSelectedFilter("",true)});x.elements.moveButton.on("click",function(){s(x)});x.elements.moveAllButton.on("click",function(){k(x)});x.elements.removeButton.on("click",function(){t(x)});x.elements.removeAllButton.on("click",function(){d(x)});x.elements.filterInput1.on("change keyup",function(){n(x,1)});x.elements.filterInput2.on("change keyup",function(){n(x,2)})}o.prototype={init:function(){this.container=f('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element);this.elements={originalSelect:this.element,box1:f(".box1",this.container),box2:f(".box2",this.container),filterInput1:f(".box1 .filter",this.container),filterInput2:f(".box2 .filter",this.container),filterClear1:f(".box1 .clear1",this.container),filterClear2:f(".box2 .clear2",this.container),label1:f(".box1 > label",this.container),label2:f(".box2 > label",this.container),info1:f(".box1 .info",this.container),info2:f(".box2 .info",this.container),select1:f(".box1 select",this.container),select2:f(".box2 select",this.container),moveButton:f(".box1 .move",this.container),removeButton:f(".box2 .remove",this.container),moveAllButton:f(".box1 .moveall",this.container),removeAllButton:f(".box2 .removeall",this.container),form:f(f(".box1 .filter",this.container)[0].form)};this.originalSelectName=this.element.attr("name")||"";var y="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,x="bootstrap-duallistbox-selected-list_"+this.originalSelectName;this.elements.select1.attr("id",y);this.elements.select2.attr("id",x);this.elements.label1.attr("for",y);this.elements.label2.attr("for",x);this.selectedElements=0;this.elementCount=0;this.setBootstrap2Compatible(this.settings.bootstrap2Compatible);this.setFilterTextClear(this.settings.filterTextClear);this.setFilterPlaceHolder(this.settings.filterPlaceHolder);this.setMoveSelectedLabel(this.settings.moveSelectedLabel);this.setMoveAllLabel(this.settings.moveAllLabel);this.setRemoveSelectedLabel(this.settings.removeSelectedLabel);this.setRemoveAllLabel(this.settings.removeAllLabel);this.setMoveOnSelect(this.settings.moveOnSelect);this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove);this.setSelectedListLabel(this.settings.selectedListLabel);this.setNonSelectedListLabel(this.settings.nonSelectedListLabel);this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix);this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight);h(this);this.setShowFilterInputs(this.settings.showFilterInputs);this.setNonSelectedFilter(this.settings.nonSelectedFilter);this.setSelectedFilter(this.settings.selectedFilter);this.setInfoText(this.settings.infoText);this.setInfoTextFiltered(this.settings.infoTextFiltered);this.setInfoTextEmpty(this.settings.infoTextEmpty);this.setFilterOnValues(this.settings.filterOnValues);this.element.hide();c(this);b(this);return this.element},setBootstrap2Compatible:function(y,x){this.settings.bootstrap2Compatible=y;if(y){this.container.removeClass("row").addClass("row-fluid bs2compatible");this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6");this.container.find(".clear1, .clear2").removeClass("btn-default btn-xs").addClass("btn-mini");this.container.find("input, select").removeClass("form-control");this.container.find(".btn").removeClass("btn-default");this.container.find(".moveall > i, .move > i").removeClass("glyphicon glyphicon-arrow-right").addClass("icon-arrow-right");this.container.find(".removeall > i, .remove > i").removeClass("glyphicon glyphicon-arrow-left").addClass("icon-arrow-left")}else{this.container.removeClass("row-fluid bs2compatible").addClass("row");this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6");this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-default btn-xs");this.container.find("input, select").addClass("form-control");this.container.find(".btn").addClass(this.settings.buttonClass);this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("glyphicon glyphicon-arrow-right");this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("glyphicon glyphicon-arrow-left")}if(x){b(this)}return this.element},setFilterTextClear:function(y,x){this.settings.filterTextClear=y;this.elements.filterClear1.html(y);this.elements.filterClear2.html(y);if(x){b(this)}return this.element},setFilterPlaceHolder:function(y,x){this.settings.filterPlaceHolder=y;this.elements.filterInput1.attr("placeholder",y);this.elements.filterInput2.attr("placeholder",y);if(x){b(this)}return this.element},setMoveSelectedLabel:function(y,x){this.settings.moveSelectedLabel=y;this.elements.moveButton.attr("title",y);if(x){b(this)}return this.element},setMoveAllLabel:function(y,x){this.settings.moveAllLabel=y;this.elements.moveAllButton.attr("title",y);if(x){b(this)}return this.element},setRemoveSelectedLabel:function(y,x){this.settings.removeSelectedLabel=y;this.elements.removeButton.attr("title",y);if(x){b(this)}return this.element},setRemoveAllLabel:function(y,x){this.settings.removeAllLabel=y;this.elements.removeAllButton.attr("title",y);if(x){b(this)}return this.element},setMoveOnSelect:function(z,y){if(q){z=true}this.settings.moveOnSelect=z;if(this.settings.moveOnSelect){this.container.addClass("moveonselect");var x=this;this.elements.select1.on("change",function(){s(x)});this.elements.select2.on("change",function(){t(x)})}else{this.container.removeClass("moveonselect");this.elements.select1.off("change");this.elements.select2.off("change")}if(y){b(this)}return this.element},setPreserveSelectionOnMove:function(y,x){if(q){y=false}this.settings.preserveSelectionOnMove=y;if(x){b(this)}return this.element},setSelectedListLabel:function(y,x){this.settings.selectedListLabel=y;if(y){this.elements.label2.show().html(y)}else{this.elements.label2.hide().html(y)}if(x){b(this)}return this.element},setNonSelectedListLabel:function(y,x){this.settings.nonSelectedListLabel=y;if(y){this.elements.label1.show().html(y)}else{this.elements.label1.hide().html(y)}if(x){b(this)}return this.element},setHelperSelectNamePostfix:function(y,x){this.settings.helperSelectNamePostfix=y;if(y){this.elements.select1.attr("name",this.originalSelectName+y+"1");this.elements.select2.attr("name",this.originalSelectName+y+"2")}else{this.elements.select1.removeAttr("name");this.elements.select2.removeAttr("name")}if(x){b(this)}return this.element},setSelectOrMinimalHeight:function(z,y){this.settings.selectorMinimalHeight=z;var x=this.element.height();if(this.element.height()<z){x=z}this.elements.select1.height(x);this.elements.select2.height(x);if(y){b(this)}return this.element},setShowFilterInputs:function(y,x){if(!y){this.setNonSelectedFilter("");this.setSelectedFilter("");b(this);this.elements.filterInput1.hide();this.elements.filterInput2.hide()}else{this.elements.filterInput1.show();this.elements.filterInput2.show()}this.settings.showFilterInputs=y;if(x){b(this)}return this.element},setNonSelectedFilter:function(y,x){if(this.settings.showFilterInputs){this.settings.nonSelectedFilter=y;this.elements.filterInput1.val(y);if(x){b(this)}return this.element}},setSelectedFilter:function(y,x){if(this.settings.showFilterInputs){this.settings.selectedFilter=y;this.elements.filterInput2.val(y);if(x){b(this)}return this.element}},setInfoText:function(y,x){this.settings.infoText=y;if(x){b(this)}return this.element},setInfoTextFiltered:function(y,x){this.settings.infoTextFiltered=y;if(x){b(this)}return this.element},setInfoTextEmpty:function(y,x){this.settings.infoTextEmpty=y;if(x){b(this)}return this.element},setFilterOnValues:function(y,x){this.settings.filterOnValues=y;if(x){b(this)}return this.element},getContainer:function(){return this.container},refresh:function(x){h(this);if(!x){g(this,1);g(this,2)}else{e(this)}b(this)},destroy:function(){this.container.remove();this.element.show();f.data(this,"plugin_"+a,null);return this.element}};f.fn[a]=function(y){var x=arguments;if(y===i||typeof y==="object"){return this.each(function(){if(!f(this).is("select")){f(this).find("select").each(function(A,B){f(B).bootstrapDualListbox(y)})}else{if(!f.data(this,"plugin_"+a)){f.data(this,"plugin_"+a,new o(this,y))}}})}else{if(typeof y==="string"&&y[0]!=="_"&&y!=="init"){var z;this.each(function(){var A=f.data(this,"plugin_"+a);if(A instanceof o&&typeof A[y]==="function"){z=A[y].apply(A,Array.prototype.slice.call(x,1))}});return z!==i?z:this}}}})(jQuery,window,document);