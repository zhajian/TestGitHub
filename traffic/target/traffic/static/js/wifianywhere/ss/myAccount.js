$(function(){$.validator.addMethod("verifyName",function(c,a){var b=/^[a-zA-Z\u4e00-\u9fa5]{2,20}$/;return this.optional(a)||b.test(c)},"输入2~20位英文或中文姓名！");$.validator.addMethod("isMobile",function(c,a){var b=/^1\w{10}$/;return this.optional(a)||b.test(c)},"手机号格式不正确！");$.validator.addMethod("isPassword",function(c,a){var b=/[A-Za-z0-9]{6,10}/;return this.optional(a)||b.test(c)},"请输入6-10位字母、数字组成的字符串！");$("#linkInfoForm").validate({rules:{linkPerson:{required:true,verifyName:true},linkTelephone:{required:true,isMobile:true}}});Hg.refRepeatSubmit("linkInfoForm");$("#linkInfoForm [tag=save]").click(function(){if(!$("#linkInfoForm").validate().form()){return false}var b=$(this);b.addClass("disabled").removeClass("btn-primary");var a=$("#linkInfoForm").serializeArray();$.ajax({type:"POST",url:G_CTX_PATH+"/merchant/updateMerchantInfo",data:a,success:function(c,e,d){if(c.success){ui_alert("联系信息已更新",function(){})}else{ajaxExceptionHandler(d,function(){Hg.refreshSubmitToken("linkInfoForm");ui_error(c.data)})}},complete:function(c,d){b.addClass("btn-primary").removeClass("disabled")}})});$("#passwordForm").validate({rules:{plainPwd:{required:true,rangelength:[6,10],isPassword:true},newPwd:{required:true,rangelength:[6,10],isPassword:true},repeartNewPwd:{required:true,rangelength:[6,10],equalTo:"#newPwd"}},messages:{repeartNewPwd:{equalTo:"两次输入密码不一致"}}});Hg.refRepeatSubmit("passwordForm");$("#passwordForm [tag=save]").click(function(){if(!$("#passwordForm").validate().form()){return false}var b=$(this);b.addClass("disabled").removeClass("btn-primary");var a=$("#passwordForm").serializeArray();$.ajax({type:"POST",url:G_CTX_PATH+"/merchant/updatePassword",data:a,success:function(c,e,d){if(c.success){ui_alert("密码已更新",function(){});$("#passwordForm :password").val("")}else{ajaxExceptionHandler(d,function(){Hg.refreshSubmitToken("passwordForm");ui_error(c.data)})}},complete:function(c,d){b.addClass("btn-primary").removeClass("disabled")}})})});