if(!("ace" in window)){window.ace={}}jQuery(function(){window.ace.click_event=$.fn.tap?"tap":"click"});(function(p,r){var q="multiple" in document.createElement("INPUT");var k="FileList" in window;var s="FileReader" in window;var o=function(b,a){var c=this;this.settings=p.extend({},p.fn.ace_file_input.defaults,a);this.$element=p(b);this.element=b;this.disabled=false;this.can_reset=true;this.$element.on("change.ace_inner_call",function(d,e){if(e===true){return}return t.call(c)});this.$element.wrap('<div class="ace-file-input" />');this.apply_settings()};o.error={FILE_LOAD_FAILED:1,IMAGE_LOAD_FAILED:2,THUMBNAIL_FAILED:3};o.prototype.apply_settings=function(){var a=this;var b=!!this.settings.icon_remove;this.multi=this.$element.attr("multiple")&&q;this.well_style=this.settings.style=="well";if(this.well_style){this.$element.parent().addClass("ace-file-multiple")}else{this.$element.parent().removeClass("ace-file-multiple")}this.$element.parent().find(":not(input[type=file])").remove();this.$element.after('<label class="file-label" data-title="'+this.settings.btn_choose+'"><span class="file-name" data-title="'+this.settings.no_file+'">'+(this.settings.no_icon?'<i class="'+this.settings.no_icon+'"></i>':"")+"</span></label>"+(b?'<a class="remove" href="#"><i class="'+this.settings.icon_remove+'"></i></a>':""));this.$label=this.$element.next();this.$label.on("click",function(){if(!this.disabled&&!a.element.disabled&&!a.$element.attr("readonly")){a.$element.click()}});if(b){this.$label.next("a").on(ace.click_event,function(){if(!a.can_reset){return false}var c=true;if(a.settings.before_remove){c=a.settings.before_remove.call(a.element)}if(!c){return false}return a.reset_input()})}if(this.settings.droppable&&k){n.call(this)}};o.prototype.show_file_list=function(h){var e=typeof h==="undefined"?this.$element.data("ace_input_files"):h;if(!e||e.length==0){return}if(this.well_style){this.$label.find(".file-name").remove();if(!this.settings.btn_change){this.$label.addClass("hide-placeholder")}}this.$label.attr("data-title",this.settings.btn_change).addClass("selected");for(var c=0;c<e.length;c++){var g=typeof e[c]==="string"?e[c]:p.trim(e[c].name);var b=g.lastIndexOf("\\")+1;if(b==0){b=g.lastIndexOf("/")+1}g=g.substr(b);var f="icon-file";if((/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i).test(g)){f="icon-picture"}else{if((/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i).test(g)){f="icon-film"}else{if((/\.(mp3|ogg|wav|wma|amr|aac)$/i).test(g)){f="icon-music"}}}if(!this.well_style){this.$label.find(".file-name").attr({"data-title":g}).find('[class*="icon-"]').attr("class",f)}else{this.$label.append('<span class="file-name" data-title="'+g+'"><i class="'+f+'"></i></span>');var a=p.trim(e[c].type);var d=s&&this.settings.thumbnail&&((a.length>0&&a.match("image"))||(a.length==0&&f=="icon-picture"));if(d){var i=this;p.when(l.call(this,e[c])).fail(function(j){if(i.settings.preview_error){i.settings.preview_error.call(i,g,j.code)}})}}}return true};o.prototype.reset_input=function(){this.$label.attr({"data-title":this.settings.btn_choose,"class":"file-label"}).find(".file-name:first").attr({"data-title":this.settings.no_file,"class":"file-name"}).find('[class*="icon-"]').attr("class",this.settings.no_icon).prev("img").remove();if(!this.settings.no_icon){this.$label.find('[class*="icon-"]').remove()}this.$label.find(".file-name").not(":first").remove();if(this.$element.data("ace_input_files")){this.$element.removeData("ace_input_files");this.$element.removeData("ace_input_method")}this.reset_input_field();return false};o.prototype.reset_input_field=function(){this.$element.wrap("<form>").closest("form").get(0).reset();this.$element.unwrap()};o.prototype.enable_reset=function(a){this.can_reset=a};o.prototype.disable=function(){this.disabled=true;this.$element.attr("disabled","disabled").addClass("disabled")};o.prototype.enable=function(){this.disabled=false;this.$element.removeAttr("disabled").removeClass("disabled")};o.prototype.files=function(){return p(this).data("ace_input_files")||null};o.prototype.method=function(){return p(this).data("ace_input_method")||""};o.prototype.update_settings=function(a){this.settings=p.extend({},this.settings,a);this.apply_settings()};var n=function(){var a=this;var b=this.element.parentNode;p(b).on("dragenter",function(c){c.preventDefault();c.stopPropagation()}).on("dragover",function(c){c.preventDefault();c.stopPropagation()}).on("drop",function(d){d.preventDefault();d.stopPropagation();var e=d.originalEvent.dataTransfer;var f=e.files;if(!a.multi&&f.length>1){var g=[];g.push(f[0]);f=g}var c=true;if(a.settings.before_change){c=a.settings.before_change.call(a.element,f,true)}if(!c||c.length==0){return false}if(c instanceof Array||(k&&c instanceof FileList)){f=c}a.$element.data("ace_input_files",f);a.$element.data("ace_input_method","drop");a.show_file_list(f);a.$element.triggerHandler("change",[true]);return true})};var t=function(){var b=true;if(this.settings.before_change){b=this.settings.before_change.call(this.element,this.element.files||[this.element.value],false)}if(!b||b.length==0){if(!this.$element.data("ace_input_files")){this.reset_input_field()}return false}var a=!k?null:((b instanceof Array||b instanceof FileList)?b:this.element.files);this.$element.data("ace_input_method","select");if(a&&a.length>0){this.$element.data("ace_input_files",a)}else{var c=p.trim(this.element.value);if(c&&c.length>0){a=[];a.push(c);this.$element.data("ace_input_files",a)}}if(!a||a.length==0){return false}this.show_file_list(a);return true};var l=function(d){var e=this;var b=e.$label.find(".file-name:last");var a=new p.Deferred;var c=new FileReader();c.onload=function(f){b.prepend("<img class='middle' style='display:none;' />");var g=b.find("img:last").get(0);p(g).one("load",function(){var i=50;if(e.settings.thumbnail=="large"){i=150}else{if(e.settings.thumbnail=="fit"){i=b.width()}}b.addClass(i>50?"large":"");var j=m(g,i,d.type);if(j==null){p(this).remove();a.reject({code:o.error.THUMBNAIL_FAILED});return}var v=j.w,h=j.h;if(e.settings.thumbnail=="small"){v=h=i}p(g).css({"background-image":"url("+j.src+")",width:v,height:h}).data("thumb",j.src).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show();a.resolve()}).one("error",function(){b.find("img").remove();a.reject({code:o.error.IMAGE_LOAD_FAILED})});g.src=f.target.result};c.onerror=function(f){a.reject({code:o.error.FILE_LOAD_FAILED})};c.readAsDataURL(d);return a.promise()};var m=function(e,i,b){var a=e.width,d=e.height;if(a>i||d>i){if(a>d){d=parseInt(i/a*d);a=i}else{a=parseInt(i/d*a);d=i}}var f;try{var g=document.createElement("canvas");g.width=a;g.height=d;var h=g.getContext("2d");h.drawImage(e,0,0,e.width,e.height,0,0,a,d);f=g.toDataURL()}catch(c){f=null}if(!(/^data\:image\/(png|jpe?g|gif);base64,[0-9A-Za-z\+\/\=]+$/.test(f))){f=null}if(!f){return null}return{src:f,w:a,h:d}};p.fn.ace_file_input=function(a,d){var b;var c=this.each(function(){var e=p(this);var f=e.data("ace_file_input");var g=typeof a==="object"&&a;if(!f){e.data("ace_file_input",(f=new o(this,g)))}if(typeof a==="string"){b=f[a](d)}});return(b===r)?c:b};p.fn.ace_file_input.defaults={style:false,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:false,thumbnail:false,before_change:null,before_remove:null,preview_error:null}})(window.jQuery);(function(d,c){d.fn.ace_spinner=function(a){this.each(function(){var p=a.icon_up||"icon-chevron-up";var l=a.icon_down||"icon-chevron-down";var n=a.on_sides||false;var q=a.btn_up_class||"";var o=a.btn_down_class||"";var r=a.max||999;r=(""+r).length;d(this).addClass("spinner-input form-control").wrap('<div class="ace-spinner">');var b=d(this).closest(".ace-spinner").spinner(a).wrapInner("<div class='input-group'></div>");if(n){d(this).before('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-down btn-xs '+o+'">								<i class="'+l+'"></i>							</button>						</div>').after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+q+'">								<i class="'+p+'"></i>							</button>						</div>');b.addClass("touch-spinner");b.css("width",(r*20+40)+"px")}else{d(this).after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+q+'">								<i class="'+p+'"></i>							</button>							<button type="button" class="btn spinner-down btn-xs '+o+'">								<i class="'+l+'"></i>							</button>						</div>');if("ontouchend" in document||a.touch_spinner){b.addClass("touch-spinner");b.css("width",(r*20+40)+"px")}else{d(this).next().addClass("btn-group-vertical");b.css("width",(r*20+10)+"px")}}d(this).on("mousewheel DOMMouseScroll",function(f){var e=f.originalEvent.detail<0||f.originalEvent.wheelDelta>0?1:-1;b.spinner("step",e>0);b.spinner("triggerChangedEvent");return false});var m=d(this);b.on("changed",function(){m.trigger("change")})});return this}})(window.jQuery);(function(d,c){d.fn.ace_wizard=function(a){this.each(function(){var g=d(this);g.wizard();var h=g.siblings(".wizard-actions").eq(0);var b=g.data("wizard");b.$prevBtn.remove();b.$nextBtn.remove();b.$prevBtn=h.find(".btn-prev").eq(0).on(ace.click_event,function(){g.wizard("previous")}).attr("disabled","disabled");b.$nextBtn=h.find(".btn-next").eq(0).on(ace.click_event,function(){g.wizard("next")}).removeAttr("disabled");b.nextText=b.$nextBtn.text()});return this}})(window.jQuery);(function(d,c){d.fn.ace_colorpicker=function(b){var a=d.extend({pull_right:false,caret:true},b);this.each(function(){var h=d(this);var j="";var i="";d(this).hide().find("option").each(function(){var e="colorpick-btn";if(this.selected){e+=" selected";i=this.value}j+='<li><a class="'+e+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>'}).end().on("change.ace_inner_call",function(){d(this).next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+i+'"></span></a><ul class="dropdown-menu'+(a.caret?" dropdown-caret":"")+(a.pull_right?" pull-right":"")+'">'+j+"</ul></div>").next().find(".dropdown-menu").on(ace.click_event,function(e){var g=d(e.target);if(!g.is(".colorpick-btn")){return false}g.closest("ul").find(".selected").removeClass("selected");g.addClass("selected");var f=g.data("color");h.val(f).change();e.preventDefault();return true})});return this}})(window.jQuery);(function(d,c){d.fn.ace_tree=function(a){var b={"open-icon":"icon-folder-open","close-icon":"icon-folder-close",selectable:true,"selected-icon":"icon-ok","unselected-icon":"tree-dot"};b=d.extend({},b,a);this.each(function(){var f=d(this);f.html('<div class = "tree-folder" style="display:none;">				<div class="tree-folder-header">					<i class="'+b["close-icon"]+'"></i>					<div class="tree-folder-name"></div>				</div>				<div class="tree-folder-content"></div>				<div class="tree-loader" style="display:none"></div>			</div>			<div class="tree-item" style="display:none;">				'+(b["unselected-icon"]==null?"":'<i class="'+b["unselected-icon"]+'"></i>')+'				<div class="tree-item-name"></div>			</div>');f.addClass(b.selectable==true?"tree-selectable":"tree-unselectable");f.tree(b)});return this}})(window.jQuery);(function(d,c){d.fn.ace_wysiwyg=function(l,a){var k=d.extend({speech_button:true,wysiwyg:{}},l);var j=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"];var b={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"icon-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"icon-text-height",title:"Font Size"},bold:{icon:"icon-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"icon-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"icon-strikethrough",title:"Strikethrough"},underline:{icon:"icon-underline",title:"Underline"},insertunorderedlist:{icon:"icon-list-ul",title:"Bullet list"},insertorderedlist:{icon:"icon-list-ol",title:"Number list"},outdent:{icon:"icon-indent-left",title:"Reduce indent (Shift+Tab)"},indent:{icon:"icon-indent-right",title:"Indent (Tab)"},justifyleft:{icon:"icon-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"icon-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"icon-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"icon-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"icon-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},unlink:{icon:"icon-unlink",title:"Remove Hyperlink"},insertImage:{icon:"icon-picture",title:"Insert picture",button_text:'<i class="icon-file"></i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:true},foreColor:{values:j,title:"Change Color"},backColor:{values:j,title:"Change Background Color"},undo:{icon:"icon-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"icon-repeat",title:"Redo (Ctrl/Cmd+Y)"},viewSource:{icon:"icon-code",title:"View Source"}};var i=k.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];this.each(function(){var e=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ';for(var u in i){if(i.hasOwnProperty(u)){var g=i[u];if(g===null){e+=' </div> <div class="btn-group"> ';continue}if(typeof g=="string"&&g in b){g=b[g];g.name=i[u]}else{if(typeof g=="object"&&g.name in b){g=d.extend(b[g.name],g)}else{continue}}var f="className" in g?g.className:"";switch(g.name){case"font":e+=' <a class="btn btn-sm '+f+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i><i class="icon-angle-down icon-on-right"></i></a> ';e+=' <ul class="dropdown-menu dropdown-light">';for(var y in g.values){if(g.values.hasOwnProperty(y)){e+=' <li><a data-edit="fontName '+g.values[y]+'" style="font-family:\''+g.values[y]+"'\">"+g.values[y]+"</a></li> "}}e+=" </ul>";break;case"fontSize":e+=' <a class="btn btn-sm '+f+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i>&nbsp;<i class="icon-angle-down icon-on-right"></i></a> ';e+=' <ul class="dropdown-menu dropdown-light"> ';for(var A in g.values){if(g.values.hasOwnProperty(A)){e+=' <li><a data-edit="fontSize '+A+'"><font size="'+A+'">'+g.values[A]+"</font></a></li> "}}e+=" </ul> ";break;case"createLink":e+=' <div class="inline position-relative"> <a class="btn btn-sm '+f+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ';e+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+g.placeholder+'" type="text" data-edit="'+g.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+g.button_class+'" type="button">'+g.button_text+"</button>								</span>							</div>						</div> </div>";break;case"insertImage":e+=' <div class="inline position-relative"> <a class="btn btn-sm '+f+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ';e+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+g.placeholder+'" type="text" data-edit="'+g.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+g.button_insert_class+'" type="button">'+g.button_insert+"</button>								</span>							</div>";if(g.choose_file&&"FileReader" in window){e+='<div class="space-2"></div>							 <div class="center">								<button class="btn btn-sm '+g.button_class+' wysiwyg-choose-file" type="button">'+g.button_text+'</button>								<input type="file" data-edit="'+g.name+'" />							  </div>'}e+=" </div> </div>";break;case"foreColor":case"backColor":e+=' <select class="hide wysiwyg_colorpicker" title="'+g.title+'"> ';for(var v in g.values){e+=' <option value="'+g.values[v]+'">'+g.values[v]+"</option> "}e+=" </select> ";e+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+g.name+'" /> ';break;case"viewSource":e+=' <a class="btn btn-sm '+f+'" data-view="source" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ';break;default:e+=' <a class="btn btn-sm '+f+'" data-edit="'+g.name+'" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ';break}}}e+=" </div> </div> ";if(k.toolbar_place){e=k.toolbar_place.call(this,e)}else{e=d(this).before(e).prev()}e.find("a[title]").tooltip({animation:false,container:"body"});e.find(".dropdown-menu input:not([type=file])").on(ace.click_event,function(){return false}).on("change",function(){d(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(m){if(m.which==27){this.value="";d(this).change()}});e.find("input[type=file]").prev().on(ace.click_event,function(m){d(this).next().click()});e.find(".wysiwyg_colorpicker").each(function(){d(this).ace_colorpicker({pull_right:true}).change(function(){d(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:false,container:"body"})});var x;if(k.speech_button&&"onwebkitspeechchange" in (x=document.createElement("input"))){var z=d(this).offset();e.append(x);d(x).attr({type:"text","data-edit":"inserttext","x-webkit-speech":""}).addClass("wysiwyg-speech-input").css({position:"absolute"}).offset({top:z.top,left:z.left+d(this).innerWidth()-35})}else{x=null}var B=d(this);var w=false;e.find("a[data-view=source]").on("click",function(m){m.preventDefault();if(!w){d("<textarea />").css({width:B.outerWidth(),height:B.outerHeight()}).val(B.html()).insertAfter(B);B.hide();d(this).addClass("active")}else{var n=B.next();B.html(n.val()).show();n.remove();d(this).removeClass("active")}w=!w});var h=d.extend({},{activeToolbarClass:"active",toolbarSelector:e},k.wysiwyg||{});d(this).wysiwyg(h)});return this}})(window.jQuery);