(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{version:"4.6.0",htmlDecode:function(b){return b&&("&nbsp;"===b||"&#160;"===b||1===b.length&&160===b.charCodeAt(0))?"":b?String(b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):b},htmlEncode:function(b){return b?String(b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):b},format:function(e){var f=b.makeArray(arguments).slice(1);null==e&&(e="");return e.replace(/\{(\d+)\}/g,function(b,d){return f[d]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var b=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b},getCellIndex:function(e){e=b(e);if(e.is("tr")){return -1}e=(e.is("td")||e.is("th")?e:e.closest("td,th"))[0];return b.jgrid.msie?b.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(b){b=String(b);var f=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return b?(b=b.replace(f,""))&&"&nbsp;"!==b&&"&#160;"!==b?b.replace(/\"/g,"'"):"":b},stripPref:function(e,f){var c=b.type(e);if("string"===c||"number"===c){e=String(e),f=""!==e?String(f).replace(String(e),""):f}return f},parse:function(e){"while(1);"===e.substr(0,9)&&(e=e.substr(9));"/*"===e.substr(0,2)&&(e=e.substr(2,e.length-4));e||(e="{}");return !0===b.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(e):eval("("+e+")")},parseDate:function(e,f,c,d){var a=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,l="string"===typeof f?f.match(a):null,a=function(a,b){a=String(a);for(b=parseInt(b,10)||2;a.length<b;){a="0"+a}return a},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=0,k,n,h=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};void 0===d&&(d=b.jgrid.formatter.date);void 0===d.parseRe&&(d.parseRe=/[#%\\\/:_;.,\t\s-]/);d.masks.hasOwnProperty(e)&&(e=d.masks[e]);if(f&&null!=f){if(isNaN(f-0)||"u"!==String(e).toLowerCase()){if(f.constructor===Date){h=f}else{if(null!==l){if(h=new Date(parseInt(l[1],10)),l[3]){var m=60*Number(l[5])+Number(l[6]),m=m*("-"===l[4]?1:-1),m=m-h.getTimezoneOffset();h.setTime(Number(Number(h)+60000*m))}}else{m=0;"ISO8601Long"===d.srcformat&&"Z"===f.charAt(f.length-1)&&(m-=(new Date).getTimezoneOffset());f=String(f).replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe);e=e.replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe);k=0;for(n=e.length;k<n;k++){"M"===e[k]&&(l=b.inArray(f[k],d.monthNames),-1!==l&&12>l&&(f[k]=l+1,g.m=f[k])),"F"===e[k]&&(l=b.inArray(f[k],d.monthNames,12),-1!==l&&11<l&&(f[k]=l+1-12,g.m=f[k])),"a"===e[k]&&(l=b.inArray(f[k],d.AmPm),-1!==l&&2>l&&f[k]===d.AmPm[l]&&(f[k]=l,g.h=h(f[k],g.h))),"A"===e[k]&&(l=b.inArray(f[k],d.AmPm),-1!==l&&1<l&&f[k]===d.AmPm[l]&&(f[k]=l-2,g.h=h(f[k],g.h))),"g"===e[k]&&(g.h=parseInt(f[k],10)),void 0!==f[k]&&(g[e[k].toLowerCase()]=parseInt(f[k],10))}g.f&&(g.m=g.f);if(0===g.m&&0===g.y&&0===g.d){return"&#160;"}g.m=parseInt(g.m,10)-1;h=g.y;70<=h&&99>=h?g.y=1900+g.y:0<=h&&69>=h&&(g.y=2000+g.y);h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u);0<m&&h.setTime(Number(Number(h)+60000*m))}}}else{h=new Date(1000*parseFloat(f))}}else{h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}if(void 0===c){return h}d.masks.hasOwnProperty(c)?c=d.masks[c]:c||(c="Y-m-d");e=h.getHours();f=h.getMinutes();g=h.getDate();m=h.getMonth()+1;l=h.getTimezoneOffset();k=h.getSeconds();n=h.getMilliseconds();var r=h.getDay(),p=h.getFullYear(),q=(r+6)%7+1,x=(new Date(p,m-1,g)-new Date(p,0,1))/86400000,G={d:a(g),D:d.dayNames[r],j:g,l:d.dayNames[r+7],N:q,S:d.S(g),w:r,z:x,W:5>q?Math.floor((x+q-1)/7)+1:Math.floor((x+q-1)/7)||(4>((new Date(p-1,0,1)).getDay()+6)%7?53:52),F:d.monthNames[m-1+12],m:a(m),M:d.monthNames[m-1],n:m,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:12>e?d.AmPm[0]:d.AmPm[1],A:12>e?d.AmPm[2]:d.AmPm[3],B:"?",g:e%12||12,G:e,h:a(e%12||12),H:a(e),i:a(f),s:a(k),u:n,e:"?",I:"?",O:(0<l?"-":"+")+a(100*Math.floor(Math.abs(l)/60)+Math.abs(l)%60,4),P:"?",T:(String(h).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(h/1000)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return G.hasOwnProperty(a)?G[a]:a.substring(1)})},jqID:function(b){return String(b).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(b,f){var c,d,a=[],l;if("function"===typeof f){return f(b)}c=b[f];if(void 0===c){try{if("string"===typeof f&&(a=f.split(".")),l=a.length){for(c=b;c&&l--;){d=a.shift(),c=c[d]}}}catch(g){}}return c},getXmlData:function(e,f,c){var d="string"===typeof f?f.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof f){return f(e)}if(d&&d[2]){return d[1]?b(d[1],e).attr(d[2]):b(e).attr(d[2])}e=b(f,e);return c?e:0<e.length?b(e).text():void 0},cellWidth:function(){var e=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),f=e.appendTo("body").find("td").width();e.remove();return 0.1<Math.abs(f-5)},cell_width:!0,ajaxOptions:{},from:function(e){return new function(e,c){"string"===typeof e&&(e=b.data(e));var d=this,a=e,l=!0,g=!1,h=c,k=/[\$,%]/g,n=null,m=null,r=0,p=!1,q="",x=[],G=!0;if("object"===typeof e&&e.push){0<e.length&&(G="object"!==typeof e[0]?!1:!0)}else{throw"data provides is not an array"}this._hasData=function(){return null===a?!1:0===a.length?!1:!0};this._getStr=function(a){var b=[];g&&b.push("jQuery.trim(");b.push("String("+a+")");g&&b.push(")");l||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(a){g&&(a=b.trim(a));a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return l?a:a.toLowerCase()};this._funcLoop=function(d){var l=[];b.each(a,function(a,b){l.push(d(b))});return l};this._append=function(a){var b;h=null===h?"":h+(""===q?" && ":q);for(b=0;b<r;b++){h+="("}p&&(h+="!");h+="("+a+")";p=!1;q="";r=0};this._setCommand=function(a,b){n=a;m=b};this._resetNegate=function(){p=!1};this._repeatCommand=function(a,b){return null===n?d:null!==a&&null!==b?n(a,b):null!==m&&G?n(m,a):n(a)};this._equals=function(a,b){return 0===d._compare(a,b,1)};this._compare=function(a,b,d){var e=Object.prototype.toString;void 0===d&&(d=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b){return 0}if(null===a&&null!==b){return 1}if(null!==a&&null===b){return -1}if("[object Date]"===e.call(a)&&"[object Date]"===e.call(b)){return a<b?-d:a>b?d:0}l||"number"===typeof a||"number"===typeof b||(a=String(a),b=String(b));return a<b?-d:a>b?d:0};this._performSort=function(){0!==x.length&&(a=d._doSort(a,0))};this._doSort=function(a,b){var l=x[b].by,e=x[b].dir,g=x[b].type,c=x[b].datefmt,f=x[b].sfunc;if(b===x.length-1){return d._getOrder(a,l,e,g,c,f)}b++;l=d._getGroup(a,l,e,g,c);e=[];for(g=0;g<l.length;g++){for(f=d._doSort(l[g].items,b),c=0;c<f.length;c++){e.push(f[c])}}return e};this._getOrder=function(a,e,g,c,f,h){var m=[],n=[],r="a"===g?1:-1,p,x;void 0===c&&(c="text");x="float"===c||"number"===c||"currency"===c||"numeric"===c?function(a){a=parseFloat(String(a).replace(k,""));return isNaN(a)?0:a}:"int"===c||"integer"===c?function(a){return a?parseFloat(String(a).replace(k,"")):0}:"date"===c||"datetime"===c?function(a){return b.jgrid.parseDate(f,a).getTime()}:b.isFunction(c)?c:function(a){a=a?b.trim(String(a)):"";return l?a:a.toLowerCase()};b.each(a,function(a,d){p=""!==e?b.jgrid.getAccessor(d,e):d;void 0===p&&(p="");p=x(p,d);n.push({vSort:p,index:a})});b.isFunction(h)?n.sort(function(a,b){a=a.vSort;b=b.vSort;return h.call(this,a,b,r)}):n.sort(function(a,b){a=a.vSort;b=b.vSort;return d._compare(a,b,r)});c=0;for(var q=a.length;c<q;){g=n[c].index,m.push(a[g]),c++}return m};this._getGroup=function(a,c,e,l,g){var f=[],h=null,k=null,m;b.each(d._getOrder(a,c,e,l,g),function(a,e){m=b.jgrid.getAccessor(e,c);null==m&&(m="");d._equals(k,m)||(k=m,null!==h&&f.push(h),h=d._group(c,m));h.items.push(e)});null!==h&&f.push(h);return f};this.ignoreCase=function(){l=!1;return d};this.useCase=function(){l=!0;return d};this.trim=function(){g=!0;return d};this.noTrim=function(){g=!1;return d};this.execute=function(){var c=h,e=[];if(null===c){return d}b.each(a,function(){eval(c)&&e.push(this)});a=e;return d};this.data=function(){return a};this.select=function(c){d._performSort();if(!d._hasData()){return[]}d.execute();if(b.isFunction(c)){var e=[];b.each(a,function(a,b){e.push(c(b))});return e}return a};this.hasMatch=function(){if(!d._hasData()){return !1}d.execute();return 0<a.length};this.andNot=function(a,b,c){p=!p;return d.and(a,b,c)};this.orNot=function(a,b,c){p=!p;return d.or(a,b,c)};this.not=function(a,b,c){return d.andNot(a,b,c)};this.and=function(a,b,c){q=" && ";return void 0===a?d:d._repeatCommand(a,b,c)};this.or=function(a,b,c){q=" || ";return void 0===a?d:d._repeatCommand(a,b,c)};this.orBegin=function(){r++;return d};this.orEnd=function(){null!==h&&(h+=")");return d};this.isNot=function(a){p=!p;return d.is(a)};this.is=function(a){d._append("this."+a);d._resetNegate();return d};this._compareValues=function(a,c,e,l,g){var f;f=G?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this";void 0===e&&(e=null);var h=e,m=void 0===g.stype?"text":g.stype;if(null!==e){switch(m){case"int":case"integer":h=isNaN(Number(h))||""===h?"0":h;f="parseInt("+f+",10)";h="parseInt("+h+",10)";break;case"float":case"number":case"numeric":h=String(h).replace(k,"");h=isNaN(Number(h))||""===h?"0":h;f="parseFloat("+f+")";h="parseFloat("+h+")";break;case"date":case"datetime":h=String(b.jgrid.parseDate(g.newfmt||"Y-m-d",h).getTime());f='jQuery.jgrid.parseDate("'+g.srcfmt+'",'+f+").getTime()";break;default:f=d._getStr(f),h=d._getStr('"'+d._toStr(h)+'"')}}d._append(f+" "+l+" "+h);d._setCommand(a,c);d._resetNegate();return d};this.equals=function(a,b,c){return d._compareValues(d.equals,a,b,"==",c)};this.notEquals=function(a,b,c){return d._compareValues(d.equals,a,b,"!==",c)};this.isNull=function(a,b,c){return d._compareValues(d.equals,a,null,"===",c)};this.greater=function(a,b,c){return d._compareValues(d.greater,a,b,">",c)};this.less=function(a,b,c){return d._compareValues(d.less,a,b,"<",c)};this.greaterOrEquals=function(a,b,c){return d._compareValues(d.greaterOrEquals,a,b,">=",c)};this.lessOrEquals=function(a,b,c){return d._compareValues(d.lessOrEquals,a,b,"<=",c)};this.startsWith=function(a,c){var e=null==c?a:c,e=g?b.trim(e.toString()).length:e.toString().length;G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+e+") == "+d._getStr('"'+d._toStr(c)+'"')):(null!=c&&(e=g?b.trim(c.toString()).length:c.toString().length),d._append(d._getStr("this")+".substr(0,"+e+") == "+d._getStr('"'+d._toStr(a)+'"')));d._setCommand(d.startsWith,a);d._resetNegate();return d};this.endsWith=function(a,c){var e=null==c?a:c,e=g?b.trim(e.toString()).length:e.toString().length;G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+e+","+e+') == "'+d._toStr(c)+'"'):d._append(d._getStr("this")+".substr("+d._getStr("this")+'.length-"'+d._toStr(a)+'".length,"'+d._toStr(a)+'".length) == "'+d._toStr(a)+'"');d._setCommand(d.endsWith,a);d._resetNegate();return d};this.contains=function(a,b){G?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+d._toStr(b)+'",0) > -1'):d._append(d._getStr("this")+'.indexOf("'+d._toStr(a)+'",0) > -1');d._setCommand(d.contains,a);d._resetNegate();return d};this.groupBy=function(b,c,e,l){return d._hasData()?d._getGroup(a,b,c,e,l):null};this.orderBy=function(a,c,e,l,g){c=null==c?"a":b.trim(c.toString().toLowerCase());null==e&&(e="text");null==l&&(l="Y-m-d");null==g&&(g=!1);if("desc"===c||"descending"===c){c="d"}if("asc"===c||"ascending"===c){c="a"}x.push({by:a,dir:c,type:e,datefmt:l,sfunc:g});return d};return d}(e,null)},getMethod:function(e){return this.getAccessor(b.fn.jqGrid,e)},extend:function(e){b.extend(b.fn.jqGrid,e);this.no_legacy_api||b.fn.extend(e)}});b.fn.jqGrid=function(e){if("string"===typeof e){var f=b.jgrid.getMethod(e);if(!f){throw"jqGrid - No such method: "+e}var c=b.makeArray(arguments).slice(1);return f.apply(this,c)}return this.each(function(){if(!this.grid){var d=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},b.jgrid.defaults,e||{}),a=this,c={headers:[],cols:[],footers:[],dragStart:function(c,e,g){var f=b(this.bDiv).offset().left;this.resizing={idx:c,startX:e.clientX,sOL:e.clientX-f};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+b.jgrid.jqID(d.id),"#gbox_"+b.jgrid.jqID(d.id));this.curGbox.css({display:"block",left:e.clientX-f,top:g[1],height:g[2]});b(a).triggerHandler("jqGridResizeStart",[e,c]);b.isFunction(d.resizeStart)&&d.resizeStart.call(a,e,c);document.onselectstart=function(){return !1}},dragMove:function(a){if(this.resizing){var b=a.clientX-this.resizing.startX;a=this.headers[this.resizing.idx];var c="ltr"===d.direction?a.width+b:a.width-b,e;33<c&&(this.curGbox.css({left:this.resizing.sOL+b}),!0===d.forceFit?(e=this.headers[this.resizing.idx+d.nv],b="ltr"===d.direction?e.width-b:e.width+b,33<b&&(a.newWidth=c,e.newWidth=b)):(this.newWidth="ltr"===d.direction?d.tblwidth+b:d.tblwidth-b,a.newWidth=c))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,e=this.headers[c].newWidth||this.headers[c].width,e=parseInt(e,10);this.resizing=!1;b("#rs_m"+b.jgrid.jqID(d.id)).css("display","none");d.colModel[c].width=e;this.headers[c].width=e;this.headers[c].el.style.width=e+"px";this.cols[c].style.width=e+"px";0<this.footers.length&&(this.footers[c].style.width=e+"px");!0===d.forceFit?(e=this.headers[c+d.nv].newWidth||this.headers[c+d.nv].width,this.headers[c+d.nv].width=e,this.headers[c+d.nv].el.style.width=e+"px",this.cols[c+d.nv].style.width=e+"px",0<this.footers.length&&(this.footers[c+d.nv].style.width=e+"px"),d.colModel[c+d.nv].width=e):(d.tblwidth=this.newWidth||d.tblwidth,b("table:first",this.bDiv).css("width",d.tblwidth+"px"),b("table:first",this.hDiv).css("width",d.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,d.footerrow&&(b("table:first",this.sDiv).css("width",d.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));b(a).triggerHandler("jqGridResizeStop",[e,c]);b.isFunction(d.resizeStop)&&d.resizeStop.call(a,e,c)}this.curGbox=null;document.onselectstart=function(){return !0}},populateVisible:function(){c.timer&&clearTimeout(c.timer);c.timer=null;var a=b(c.bDiv).height();if(a){var e=b("table:first",c.bDiv),g,f;if(e[0].rows.length){try{f=(g=e[0].rows[1])?b(g).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(pa){f=c.prevRowHeight}}if(f){c.prevRowHeight=f;var h=d.rowNum;g=c.scrollTop=c.bDiv.scrollTop;var k=Math.round(e.position().top)-g,m=k+e.height();f*=h;var E,n,C;m<a&&0>=k&&(void 0===d.lastpage||parseInt((m+g+f-1)/f,10)<=d.lastpage)&&(n=parseInt((a-m+f-1)/f,10),0<=m||2>n||!0===d.scroll?(E=Math.round((m+g)/f)+1,k=-1):k=1);0<k&&(E=parseInt(g/f,10)+1,n=parseInt((g+a)/f,10)+2-E,C=!0);!n||d.lastpage&&(E>d.lastpage||1===d.lastpage||E===d.page&&E===d.lastpage)||(c.hDiv.loading?c.timer=setTimeout(c.populateVisible,d.scrollTimeout):(d.page=E,C&&(c.selectionPreserver(e[0]),c.emptyRows.call(e[0],!1,!1)),c.populate(n)))}}},scrollGrid:function(a){if(d.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);b!==c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,d.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;d.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,f=a.grid.bDiv.scrollLeft,g=function(){var h;c.selrow=null;c.selarrrow=[];if(c.multiselect&&e&&0<e.length){for(h=0;h<e.length;h++){e[h]!==d&&b(a).jqGrid("setSelection",e[h],!1,null)}}d&&b(a).jqGrid("setSelection",d,!1,null);a.grid.bDiv.scrollLeft=f;b(a).unbind(".selectionPreserver",g)};b(a).bind("jqGridGridComplete.selectionPreserver",g)}};if("TABLE"!==this.tagName.toUpperCase()){alert("Element is not a table")}else{if(void 0!==document.documentMode&&5>=document.documentMode){alert("Grid can not be used in this ('quirks') mode!")}else{b(this).empty().attr("tabindex","0");this.p=d;this.p.useProp=!!b.fn.prop;var g,f;if(0===this.p.colNames.length){for(g=0;g<this.p.colModel.length;g++){this.p.colNames[g]=this.p.colModel[g].label||this.p.colModel[g].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model)}else{var k=b("<div class='ui-jqgrid-view'></div>"),n=b.jgrid.msie;a.p.direction=b.trim(a.p.direction.toLowerCase());-1===b.inArray(a.p.direction,["ltr","rtl"])&&(a.p.direction="ltr");f=a.p.direction;b(k).insertBefore(this);b(this).removeClass("scroll").appendTo(k);var m=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(m).attr({id:"gbox_"+this.id,dir:f}).insertBefore(k);b(k).attr("id","gview_"+this.id).appendTo(m);b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(k);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(k);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var r=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},p=function(d,e,f,g,pa,h){var k=a.p.colModel[d],m=k.align,E='style="',n=k.classes,C=k.name,A=[];m&&(E+="text-align:"+m+";");!0===k.hidden&&(E+="display:none;");if(0===e){E+="width: "+c.headers[d].width+"px;"}else{if(k.cellattr&&b.isFunction(k.cellattr)&&(d=k.cellattr.call(a,pa,f,g,k,h))&&"string"===typeof d){if(d=d.replace(/style/i,"style").replace(/title/i,"title"),-1<d.indexOf("title")&&(k.title=!1),-1<d.indexOf("class")&&(n=void 0),A=d.replace("-style","-sti").split(/style/),2===A.length){A[1]=b.trim(A[1].replace("-sti","-style").replace("=",""));if(0===A[1].indexOf("'")||0===A[1].indexOf('"')){A[1]=A[1].substring(1)}E+=A[1].replace(/'/gi,'"')}else{E+='"'}}}A.length||(A[0]="",E+='"');E+=(void 0!==n?' class="'+n+'"':"")+(k.title&&f?' title="'+b.jgrid.stripHtml(f)+'"':"");E+=' aria-describedby="'+a.p.id+"_"+C+'"';return E+A[0]},q=function(c){return null==c||""===c?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c):String(c)},x=function(c,d,e,f,g){var h=a.p.colModel[e];void 0!==h.formatter?(c=""!==String(a.p.idPrefix)?b.jgrid.stripPref(a.p.idPrefix,c):c,c={rowId:c,colModel:h,gid:a.p.id,pos:e},d=b.isFunction(h.formatter)?h.formatter.call(a,d,c,f,g):b.fmatter?b.fn.fmatter.call(a,h.formatter,d,c,f,g):q(d)):d=q(d);return d},G=function(a,b,c,d,e,f){b=x(a,b,c,e,"add");return'<td role="gridcell" '+p(c,d,b,e,a,f)+">"+b+"</td>"},U=function(b,c,d,e){e='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+b+'" class="cbox" name="jqg_'+a.p.id+"_"+b+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+p(c,d,"",null,b,!0)+">"+e+"</td>"},M=function(a,b,c,d){c=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p(a,b,c,null,b,!0)+">"+c+"</td>"},ea=function(b){var c,d=[],e=0,f;for(f=0;f<a.p.colModel.length;f++){c=a.p.colModel[f],"cb"!==c.name&&"subgrid"!==c.name&&"rn"!==c.name&&(d[e]="local"===b?c.name:"xml"===b||"xmlstring"===b?c.xmlmap||c.name:c.jsonmap||c.name,!1!==a.p.keyIndex&&!0===c.key&&(a.p.keyName=d[e]),e++)}return d},W=function(c){var d=a.p.remapColumns;d&&d.length||(d=b.map(a.p.colModel,function(a,b){return b}));c&&(d=b.map(d,function(a){return a<c?null:a-c}));return d},X=function(a,c){var d;this.p.deepempty?b(this.rows).slice(1).remove():(d=0<this.rows.length?this.rows[0]:null,b(this.firstChild).empty().append(d));a&&this.p.scroll&&(b(this.grid.bDiv.firstChild).css({height:"auto"}),b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===c&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},O=function(){var c=a.p.data.length,d,e,f;d=!0===a.p.rownumbers?1:0;e=!0===a.p.multiselect?1:0;f=!0===a.p.subGrid?1:0;d=!1===a.p.keyIndex||!0===a.p.loadonce?a.p.localReader.id:a.p.colModel[a.p.keyIndex+e+f+d].name;for(e=0;e<c;e++){f=b.jgrid.getAccessor(a.p.data[e],d),void 0===f&&(f=String(e+1)),a.p._index[f]=e}},$=function(c,d,e,f,g,h){var l="-1",k="",m;d=d?"display:none;":"";e="ui-widget-content jqgrow ui-row-"+a.p.direction+(e?" "+e:"")+(h?" ui-state-highlight":"");h=b(a).triggerHandler("jqGridRowAttr",[f,g,c]);"object"!==typeof h&&(h=b.isFunction(a.p.rowattr)?a.p.rowattr.call(a,f,g,c):{});if(!b.isEmptyObject(h)){h.hasOwnProperty("id")&&(c=h.id,delete h.id);h.hasOwnProperty("tabindex")&&(l=h.tabindex,delete h.tabindex);h.hasOwnProperty("style")&&(d+=h.style,delete h.style);h.hasOwnProperty("class")&&(e+=" "+h["class"],delete h["class"]);try{delete h.role}catch(n){}for(m in h){h.hasOwnProperty(m)&&(k+=" "+m+"="+h[m])}}return'<tr role="row" id="'+c+'" tabindex="'+l+'" class="'+e+'"'+(""===d?"":' style="'+d+'"')+k+">"},K=function(c,d,e,f,g){var h=new Date,l="local"!==a.p.datatype&&a.p.loadonce||"xmlstring"===a.p.datatype,k=a.p.xmlReader,m="local"===a.p.datatype?"local":"xml";l&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_");a.p.reccount=0;if(b.isXMLDoc(c)){-1!==a.p.treeANode||a.p.scroll?e=1<e?e:1:(X.call(a,!1,!0),e=1);var n=b(a),C,A,R=0,p,u=!0===a.p.multiselect?1:0,z=0,x,q=!0===a.p.rownumbers?1:0,t,Z=[],aa,v={},w,H,s=[],L=!0===a.p.altRows?a.p.altclass:"",ia;!0===a.p.subGrid&&(z=1,x=b.jgrid.getMethod("addSubGridCell"));k.repeatitems||(Z=ea(m));t=!1===a.p.keyIndex?b.isFunction(k.id)?k.id.call(a,c):k.id:a.p.keyIndex;0<Z.length&&!isNaN(t)&&(t=a.p.keyName);m=-1===String(t).indexOf("[")?Z.length?function(a,c){return b(t,a).text()||c}:function(a,c){return b(k.cell,a).eq(t).text()||c}:function(a,b){return a.getAttribute(t.replace(/[\[\]]/g,""))||b};a.p.userData={};a.p.page=r(b.jgrid.getXmlData(c,k.page),a.p.page);a.p.lastpage=r(b.jgrid.getXmlData(c,k.total),1);a.p.records=r(b.jgrid.getXmlData(c,k.records));b.isFunction(k.userdata)?a.p.userData=k.userdata.call(a,c)||{}:b.jgrid.getXmlData(c,k.userdata,!0).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()});c=b.jgrid.getXmlData(c,k.root,!0);(c=b.jgrid.getXmlData(c,k.row,!0))||(c=[]);var S=c.length,I=0,y=[],D=parseInt(a.p.rowNum,10),B=a.p.scroll?b.jgrid.randId():1;0<S&&0>=a.p.page&&(a.p.page=1);if(c&&S){g&&(D*=g+1);g=b.isFunction(a.p.afterInsertRow);var F=!1,J;a.p.grouping&&(F=!0===a.p.groupingView.groupCollapse,J=b.jgrid.getMethod("groupingPrepare"));for(;I<S;){w=c[I];H=m(w,B+I);H=a.p.idPrefix+H;C=0===e?0:e+1;ia=1===(C+I)%2?L:"";var K=s.length;s.push("");q&&s.push(M(0,I,a.p.page,a.p.rowNum));u&&s.push(U(H,q,I,!1));z&&s.push(x.call(n,u+q,I+e));if(k.repeatitems){aa||(aa=W(u+z+q));var N=b.jgrid.getXmlData(w,k.cell,!0);b.each(aa,function(b){var c=N[this];if(!c){return !1}p=c.textContent||c.text;v[a.p.colModel[b+u+z+q].name]=p;s.push(G(H,p,b+u+z+q,I+e,w,v))})}else{for(C=0;C<Z.length;C++){p=b.jgrid.getXmlData(w,Z[C]),v[a.p.colModel[C+u+z+q].name]=p,s.push(G(H,p,C+u+z+q,I+e,w,v))}}s[K]=$(H,F,ia,v,w,!1);s.push("</tr>");a.p.grouping&&(y.push(s),a.p.groupingView._locgr||J.call(n,v,I),s=[]);if(l||!0===a.p.treeGrid){v._id_=b.jgrid.stripPref(a.p.idPrefix,H),a.p.data.push(v),a.p._index[v._id_]=a.p.data.length-1}!1===a.p.gridview&&(b("tbody:first",d).append(s.join("")),n.triggerHandler("jqGridAfterInsertRow",[H,v,w]),g&&a.p.afterInsertRow.call(a,H,v,w),s=[]);v={};R++;I++;if(R===D){break}}}!0===a.p.gridview&&(A=-1<a.p.treeANode?a.p.treeANode:0,a.p.grouping?(l||n.jqGrid("groupingRender",y,a.p.colModel.length,a.p.page,D),y=null):!0===a.p.treeGrid&&0<A?b(a.rows[A]).after(s.join("")):b("tbody:first",d).append(s.join("")));if(!0===a.p.subGrid){try{n.jqGrid("addSubGrid",u+q)}catch(Q){}}a.p.totaltime=new Date-h;0<R&&0===a.p.records&&(a.p.records=S);s=null;if(!0===a.p.treeGrid){try{n.jqGrid("setTreeNode",A+1,R+A+1)}catch(O){}}a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0);a.p.reccount=R;a.p.treeANode=-1;a.p.userDataOnFooter&&n.jqGrid("footerData","set",a.p.userData,!0);l&&(a.p.records=S,a.p.lastpage=Math.ceil(S/D));f||a.updatepager(!1,!0);if(l){for(;R<S;){w=c[R];H=m(w,R+B);H=a.p.idPrefix+H;if(k.repeatitems){aa||(aa=W(u+z+q));var P=b.jgrid.getXmlData(w,k.cell,!0);b.each(aa,function(b){var c=P[this];if(!c){return !1}p=c.textContent||c.text;v[a.p.colModel[b+u+z+q].name]=p})}else{for(C=0;C<Z.length;C++){p=b.jgrid.getXmlData(w,Z[C]),v[a.p.colModel[C+u+z+q].name]=p}}v._id_=b.jgrid.stripPref(a.p.idPrefix,H);a.p.grouping&&J.call(n,v,R);a.p.data.push(v);a.p._index[v._id_]=a.p.data.length-1;v={};R++}a.p.grouping&&(a.p.groupingView._locgr=!0,n.jqGrid("groupingRender",y,a.p.colModel.length,a.p.page,D),y=null)}}},Y=function(c,d,e,f,g){var h=new Date;if(c){-1!==a.p.treeANode||a.p.scroll?e=1<e?e:1:(X.call(a,!1,!0),e=1);var k,l="local"!==a.p.datatype&&a.p.loadonce||"jsonstring"===a.p.datatype;l&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_");a.p.reccount=0;"local"===a.p.datatype?(d=a.p.localReader,k="local"):(d=a.p.jsonReader,k="json");var m=b(a),n=0,C,A,p,q=[],u=a.p.multiselect?1:0,z=!0===a.p.subGrid?1:0,x,t=!0===a.p.rownumbers?1:0,D=W(u+z+t);k=ea(k);var y,B,v,w={},H,s,L=[],ia=!0===a.p.altRows?a.p.altclass:"",S;a.p.page=r(b.jgrid.getAccessor(c,d.page),a.p.page);a.p.lastpage=r(b.jgrid.getAccessor(c,d.total),1);a.p.records=r(b.jgrid.getAccessor(c,d.records));a.p.userData=b.jgrid.getAccessor(c,d.userdata)||{};z&&(x=b.jgrid.getMethod("addSubGridCell"));v=!1===a.p.keyIndex?b.isFunction(d.id)?d.id.call(a,c):d.id:a.p.keyIndex;d.repeatitems||(q=k,0<q.length&&!isNaN(v)&&(v=a.p.keyName));B=b.jgrid.getAccessor(c,d.root);null==B&&b.isArray(c)&&(B=c);B||(B=[]);c=B.length;A=0;0<c&&0>=a.p.page&&(a.p.page=1);var I=parseInt(a.p.rowNum,10),F=a.p.scroll?b.jgrid.randId():1,J=!1,K;g&&(I*=g+1);"local"!==a.p.datatype||a.p.deselectAfterSort||(J=!0);var N=b.isFunction(a.p.afterInsertRow),P=[],Q=!1,O;a.p.grouping&&(Q=!0===a.p.groupingView.groupCollapse,O=b.jgrid.getMethod("groupingPrepare"));for(;A<c;){g=B[A];s=b.jgrid.getAccessor(g,v);void 0===s&&("number"===typeof v&&null!=a.p.colModel[v+u+z+t]&&(s=b.jgrid.getAccessor(g,a.p.colModel[v+u+z+t].name)),void 0===s&&(s=F+A,0===q.length&&d.cell&&(C=b.jgrid.getAccessor(g,d.cell)||g,s=null!=C&&void 0!==C[v]?C[v]:s)));s=a.p.idPrefix+s;C=1===e?0:e;S=1===(C+A)%2?ia:"";J&&(K=a.p.multiselect?-1!==b.inArray(s,a.p.selarrrow):s===a.p.selrow);var T=L.length;L.push("");t&&L.push(M(0,A,a.p.page,a.p.rowNum));u&&L.push(U(s,t,A,K));z&&L.push(x.call(m,u+t,A+e));y=k;d.repeatitems&&(d.cell&&(g=b.jgrid.getAccessor(g,d.cell)||g),b.isArray(g)&&(y=D));for(p=0;p<y.length;p++){C=b.jgrid.getAccessor(g,y[p]),w[a.p.colModel[p+u+z+t].name]=C,L.push(G(s,C,p+u+z+t,A+e,g,w))}L[T]=$(s,Q,S,w,g,K);L.push("</tr>");a.p.grouping&&(P.push(L),a.p.groupingView._locgr||O.call(m,w,A),L=[]);if(l||!0===a.p.treeGrid){w._id_=b.jgrid.stripPref(a.p.idPrefix,s),a.p.data.push(w),a.p._index[w._id_]=a.p.data.length-1}!1===a.p.gridview&&(b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(L.join("")),m.triggerHandler("jqGridAfterInsertRow",[s,w,g]),N&&a.p.afterInsertRow.call(a,s,w,g),L=[]);w={};n++;A++;if(n===I){break}}!0===a.p.gridview&&(H=-1<a.p.treeANode?a.p.treeANode:0,a.p.grouping?l||(m.jqGrid("groupingRender",P,a.p.colModel.length,a.p.page,I),P=null):!0===a.p.treeGrid&&0<H?b(a.rows[H]).after(L.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(L.join("")));if(!0===a.p.subGrid){try{m.jqGrid("addSubGrid",u+t)}catch(V){}}a.p.totaltime=new Date-h;0<n&&0===a.p.records&&(a.p.records=c);if(!0===a.p.treeGrid){try{m.jqGrid("setTreeNode",H+1,n+H+1)}catch(Y){}}a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0);a.p.reccount=n;a.p.treeANode=-1;a.p.userDataOnFooter&&m.jqGrid("footerData","set",a.p.userData,!0);l&&(a.p.records=c,a.p.lastpage=Math.ceil(c/I));f||a.updatepager(!1,!0);if(l){for(;n<c&&B[n];){g=B[n];s=b.jgrid.getAccessor(g,v);void 0===s&&("number"===typeof v&&null!=a.p.colModel[v+u+z+t]&&(s=b.jgrid.getAccessor(g,a.p.colModel[v+u+z+t].name)),void 0===s&&(s=F+n,0===q.length&&d.cell&&(e=b.jgrid.getAccessor(g,d.cell)||g,s=null!=e&&void 0!==e[v]?e[v]:s)));if(g){s=a.p.idPrefix+s;y=k;d.repeatitems&&(d.cell&&(g=b.jgrid.getAccessor(g,d.cell)||g),b.isArray(g)&&(y=D));for(p=0;p<y.length;p++){w[a.p.colModel[p+u+z+t].name]=b.jgrid.getAccessor(g,y[p])}w._id_=b.jgrid.stripPref(a.p.idPrefix,s);a.p.grouping&&O.call(m,w,n);a.p.data.push(w);a.p._index[w._id_]=a.p.data.length-1;w={}}n++}a.p.grouping&&(a.p.groupingView._locgr=!0,m.jqGrid("groupingRender",P,a.p.colModel.length,a.p.page,I))}}},oa=function(){function c(a){var b=0,d,e,g,h,k;if(null!=a.groups){(e=a.groups.length&&"OR"===a.groupOp.toString().toUpperCase())&&u.orBegin();for(d=0;d<a.groups.length;d++){0<b&&e&&u.or();try{c(a.groups[d])}catch(l){alert(l)}b++}e&&u.orEnd()}if(null!=a.rules){try{(g=a.rules.length&&"OR"===a.groupOp.toString().toUpperCase())&&u.orBegin();for(d=0;d<a.rules.length;d++){k=a.rules[d],h=a.groupOp.toString().toUpperCase(),q[k.op]&&k.field&&(0<b&&h&&"OR"===h&&(u=u.or()),u=q[k.op](u,h)(k.field,k.data,f[k.field])),b++}g&&u.orEnd()}catch(m){alert(m)}}}var d=a.p.multiSort?[]:"",e=[],g=!1,f={},h=[],k=[],l,m,n;if(b.isArray(a.p.data)){var p=a.p.grouping?a.p.groupingView:!1,A,r;b.each(a.p.colModel,function(){m=this.sorttype||"text";"date"===m||"datetime"===m?(this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat,n=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat):l=n=this.datefmt||"Y-m-d",f[this.name]={stype:m,srcfmt:l,newfmt:n,sfunc:this.sortfunc||null}):f[this.name]={stype:m,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null};if(a.p.grouping){for(r=0,A=p.groupField.length;r<A;r++){if(this.name===p.groupField[r]){var c=this.name;this.index&&(c=this.index);h[r]=f[c];k[r]=c}}}a.p.multiSort?this.lso&&(d.push(this.name),c=this.lso.split("-"),e.push(c[c.length-1])):g||this.index!==a.p.sortname&&this.name!==a.p.sortname||(d=this.name,g=!0)});if(a.p.treeGrid){b(a).jqGrid("SortTree",d,a.p.sortorder,f[d].stype||"text",f[d].srcfmt||"")}else{var q={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},u=b.jgrid.from(a.p.data);a.p.ignoreCase&&(u=u.ignoreCase());if(!0===a.p.search){var z=a.p.postData.filters;if(z){"string"===typeof z&&(z=b.jgrid.parse(z)),c(z)}else{try{u=q[a.p.postData.searchOper](u)(a.p.postData.searchField,a.p.postData.searchString,f[a.p.postData.searchField])}catch(t){}}}if(a.p.grouping){for(r=0;r<A;r++){u.orderBy(k[r],p.groupOrder[r],h[r].stype,h[r].srcfmt)}}a.p.multiSort?b.each(d,function(a){u.orderBy(this,e[a],f[this].stype,f[this].srcfmt,f[this].sfunc)}):d&&a.p.sortorder&&g&&("DESC"===a.p.sortorder.toUpperCase()?u.orderBy(a.p.sortname,"d",f[d].stype,f[d].srcfmt,f[d].sfunc):u.orderBy(a.p.sortname,"a",f[d].stype,f[d].srcfmt,f[d].sfunc));var z=u.select(),x=parseInt(a.p.rowNum,10),y=z.length,B=parseInt(a.p.page,10),D=Math.ceil(y/x),v={};if((a.p.search||a.p.resetsearch)&&a.p.grouping&&a.p.groupingView._locgr){a.p.groupingView.groups=[];var w,G=b.jgrid.getMethod("groupingPrepare"),s,F;if(a.p.footerrow&&a.p.userDataOnFooter){for(s in a.p.userData){a.p.userData.hasOwnProperty(s)&&(a.p.userData[s]=0)}F=!0}for(w=0;w<y;w++){if(F){for(s in a.p.userData){a.p.userData[s]+=parseFloat(z[w][s]||0)}}G.call(b(a),z[w],w,x)}}z=z.slice((B-1)*x,B*x);f=u=null;v[a.p.localReader.total]=D;v[a.p.localReader.page]=B;v[a.p.localReader.records]=y;v[a.p.localReader.root]=z;v[a.p.localReader.userdata]=a.p.userData;z=null;return v}}},P=function(){a.grid.hDiv.loading=!0;if(!a.p.hiddengrid){switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show(),b("#load_"+b.jgrid.jqID(a.p.id)).show()}}},T=function(){a.grid.hDiv.loading=!1;switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide(),b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},Q=function(c){if(!a.grid.hDiv.loading){var d=a.p.scroll&&!1===c,e={},g,f=a.p.prmNames;0>=a.p.page&&(a.p.page=Math.min(1,a.p.lastpage));null!==f.search&&(e[f.search]=a.p.search);null!==f.nd&&(e[f.nd]=(new Date).getTime());null!==f.rows&&(e[f.rows]=a.p.rowNum);null!==f.page&&(e[f.page]=a.p.page);null!==f.sort&&(e[f.sort]=a.p.sortname);null!==f.order&&(e[f.order]=a.p.sortorder);null!==a.p.rowTotal&&null!==f.totalrows&&(e[f.totalrows]=a.p.rowTotal);var h=b.isFunction(a.p.loadComplete),k=h?a.p.loadComplete:null,l=0;c=c||1;1<c?null!==f.npage?(e[f.npage]=c,l=c-1,c=1):k=function(b){a.p.page++;a.grid.hDiv.loading=!1;h&&a.p.loadComplete.call(a,b);Q(c-1)}:null!==f.npage&&delete a.p.postData[f.npage];if(a.p.grouping){b(a).jqGrid("groupingSetup");var m=a.p.groupingView,n,p="";for(n=0;n<m.groupField.length;n++){var r=m.groupField[n];b.each(a.p.colModel,function(a,b){b.name===r&&b.index&&(r=b.index)});p+=r+" "+m.groupOrder[n]+", "}e[f.sort]=p+e[f.sort]}b.extend(a.p.postData,e);var q=a.p.scroll?a.rows.length-1:1,e=b(a).triggerHandler("jqGridBeforeRequest");if(!1!==e&&"stop"!==e){if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id,q,c,l)}else{if(b.isFunction(a.p.beforeRequest)&&(e=a.p.beforeRequest.call(a),void 0===e&&(e=!0),!1===e)){return}g=a.p.datatype.toLowerCase();switch(g){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:g,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(e,f,h){if(b.isFunction(a.p.beforeProcessing)&&!1===a.p.beforeProcessing.call(a,e,f,h)){T()}else{"xml"===g?K(e,a.grid.bDiv,q,1<c,l):Y(e,a.grid.bDiv,q,1<c,l);b(a).triggerHandler("jqGridLoadComplete",[e]);k&&k.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local"}1===c&&T()}},error:function(d,e,f){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,d,e,f);1===c&&T()},beforeSend:function(c,d){var e=!0;b.isFunction(a.p.loadBeforeSend)&&(e=a.p.loadBeforeSend.call(a,c,d));void 0===e&&(e=!0);if(!1===e){return !1}P()}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":P();e="string"!==typeof a.p.datastr?a.p.datastr:b.parseXML(a.p.datastr);K(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;T();break;case"jsonstring":P();e="string"===typeof a.p.datastr?b.jgrid.parse(a.p.datastr):a.p.datastr;Y(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;T();break;case"local":case"clientside":P(),a.p.datatype="local",e=oa(),Y(e,a.grid.bDiv,q,1<c,l),b(a).triggerHandler("jqGridLoadComplete",[e]),k&&k.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),d&&a.grid.populateVisible(),T()}}}}},ha=function(c){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",c);if(a.p.frozenColumns&&a.p.id+"_frozen"){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.fhDiv)[a.p.useProp?"prop":"attr"]("checked",c)}},qa=function(c,e){var d="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",k="",l,m,n,p,q=function(c){var e;b.isFunction(a.p.onPaging)&&(e=a.p.onPaging.call(a,c));if("stop"===e){return !1}a.p.selrow=null;a.p.multiselect&&(a.p.selarrrow=[],ha(!1));a.p.savedRow=[];return !0};c=c.substr(1);e+="_"+c;l="pg_"+c;m=c+"_left";n=c+"_center";p=c+"_right";b("#"+b.jgrid.jqID(c)).append("<div id='"+l+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+m+"' align='left'></td><td id='"+n+"' align='center' style='white-space:pre;'></td><td id='"+p+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(0<a.p.rowList.length){k="<td dir='"+f+"'>";k+="<select class='ui-pg-selbox' role='listbox'>";for(m=0;m<a.p.rowList.length;m++){k+='<option role="option" value="'+a.p.rowList[m]+'"'+(a.p.rowNum===a.p.rowList[m]?' selected="selected"':"")+">"+a.p.rowList[m]+"</option>"}k+="</select></td>"}"rtl"===f&&(g+=k);!0===a.p.pginput&&(d="<td dir='"+f+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(c)+"'></span>")+"</td>");!0===a.p.pgbuttons?(m=["first"+e,"prev"+e,"next"+e,"last"+e],"rtl"===f&&m.reverse(),g+="<td id='"+m[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",g+="<td id='"+m[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",g=g+(""!==d?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+d+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+m[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>"),g+="<td id='"+m[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):""!==d&&(g+=d);"ltr"===f&&(g+=k);g+="</tr></tbody></table>";!0===a.p.viewrecords&&b("td#"+c+"_"+a.p.recordpos,"#"+l).append("<div dir='"+f+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");b("td#"+c+"_"+a.p.pagerpos,"#"+l).append(g);k=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>");g=b(g).clone().appendTo("#testpg").width();b("#testpg").remove();0<g&&(""!==d&&(g+=50),b("td#"+c+"_"+a.p.pagerpos,"#"+l).width(g));a.p._nvtd=[];a.p._nvtd[0]=g?Math.floor((a.p.width-g)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;g=null;b(".ui-pg-selbox","#"+l).bind("change",function(){if(!q("records")){return !1}a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;a.p.pager&&b(".ui-pg-selbox",a.p.pager).val(this.value);a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value);Q();return !1});!0===a.p.pgbuttons&&(b(".ui-pg-button","#"+l).hover(function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")}),b("#first"+b.jgrid.jqID(e)+", #prev"+b.jgrid.jqID(e)+", #next"+b.jgrid.jqID(e)+", #last"+b.jgrid.jqID(e)).click(function(){if(b(this).hasClass("ui-state-disabled")){return !1}var c=r(a.p.page,1),d=r(a.p.lastpage,1),g=!1,f=!0,h=!0,k=!0,l=!0;0===d||1===d?l=k=h=f=!1:1<d&&1<=c?1===c?h=f=!1:c===d&&(l=k=!1):1<d&&0===c&&(l=k=!1,c=d-1);if(!q(this.id)){return !1}this.id==="first"+e&&f&&(a.p.page=1,g=!0);this.id==="prev"+e&&h&&(a.p.page=c-1,g=!0);this.id==="next"+e&&k&&(a.p.page=c+1,g=!0);this.id==="last"+e&&l&&(a.p.page=d,g=!0);g&&Q();return !1}));!0===a.p.pginput&&b("input.ui-pg-input","#"+l).keypress(function(c){if(13===(c.charCode||c.keyCode||0)){if(!q("user")){return !1}b(this).val(r(b(this).val(),1));a.p.page=0<b(this).val()?b(this).val():a.p.page;Q();return !1}return this})},wa=function(c,e){var d,g="",f=a.p.colModel,h=!1,k;k=a.p.frozenColumns?e:a.grid.headers[c].el;var l="";b("span.ui-grid-ico-sort",k).addClass("ui-state-disabled");b(k).attr("aria-selected","false");if(f[c].lso){if("asc"===f[c].lso){f[c].lso+="-desc",l="desc"}else{if("desc"===f[c].lso){f[c].lso+="-asc",l="asc"}else{if("asc-desc"===f[c].lso||"desc-asc"===f[c].lso){f[c].lso=""}}}}else{f[c].lso=l=f[c].firstsortorder||"asc"}l?(b("span.s-ico",k).show(),b("span.ui-icon-"+l,k).removeClass("ui-state-disabled"),b(k).attr("aria-selected","true")):a.p.viewsortcols[0]||b("span.s-ico",k).hide();a.p.sortorder="";b.each(f,function(b){this.lso&&(0<b&&h&&(g+=", "),d=this.lso.split("-"),g+=f[b].index||f[b].name,g+=" "+d[d.length-1],h=!0,a.p.sortorder=d[d.length-1])});k=g.lastIndexOf(a.p.sortorder);g=g.substring(0,k);a.p.sortname=g},ra=function(c,d,e,g,f){if(a.p.colModel[d].sortable&&!(0<a.p.savedRow.length)){e||(a.p.lastsort===d?"asc"===a.p.sortorder?a.p.sortorder="desc":"desc"===a.p.sortorder&&(a.p.sortorder="asc"):a.p.sortorder=a.p.colModel[d].firstsortorder||"asc",a.p.page=1);if(a.p.multiSort){wa(d,f)}else{if(g){if(a.p.lastsort===d&&a.p.sortorder===g&&!e){return}a.p.sortorder=g}e=a.grid.headers[a.p.lastsort].el;f=a.p.frozenColumns?f:a.grid.headers[d].el;b("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");b(e).attr("aria-selected","false");a.p.frozenColumns&&(a.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),a.grid.fhDiv.find("th").attr("aria-selected","false"));b("span.ui-icon-"+a.p.sortorder,f).removeClass("ui-state-disabled");b(f).attr("aria-selected","true");a.p.viewsortcols[0]||a.p.lastsort===d||(a.p.frozenColumns&&a.grid.fhDiv.find("span.s-ico").hide(),b("span.s-ico",e).hide(),b("span.s-ico",f).show());c=c.substring(5+a.p.id.length+1);a.p.sortname=a.p.colModel[d].index||c}"stop"===b(a).triggerHandler("jqGridSortCol",[a.p.sortname,d,a.p.sortorder])?a.p.lastsort=d:b.isFunction(a.p.onSortCol)&&"stop"===a.p.onSortCol.call(a,a.p.sortname,d,a.p.sortorder)?a.p.lastsort=d:("local"===a.p.datatype?a.p.deselectAfterSort&&b(a).jqGrid("resetSelection"):(a.p.selrow=null,a.p.multiselect&&ha(!1),a.p.selarrrow=[],a.p.savedRow=[]),a.p.scroll&&(f=a.grid.bDiv.scrollLeft,X.call(a,!0,!1),a.grid.hDiv.scrollLeft=f),a.p.subGrid&&"local"===a.p.datatype&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")}),Q(),a.p.lastsort=d,a.p.sortname!==c&&d&&(a.p.lastsort=d))}},xa=function(c){c=b(a.grid.headers[c].el);c=[c.position().left+c.outerWidth()];"rtl"===a.p.direction&&(c[0]=a.p.width-c[0]);c[0]-=a.grid.bDiv.scrollLeft;c.push(b(a.grid.hDiv).position().top);c.push(b(a.grid.bDiv).offset().top-b(a.grid.hDiv).offset().top+b(a.grid.bDiv).height());return c},sa=function(c){var d,e=a.grid.headers,g=b.jgrid.getCellIndex(c);for(d=0;d<e.length;d++){if(c===e[d].el){g=d;break}}return g};this.p.id=this.id;-1===b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])&&(a.p.multikey=!1);a.p.keyIndex=!1;a.p.keyName=!1;for(g=0;g<a.p.colModel.length;g++){a.p.colModel[g]=b.extend(!0,{},a.p.cmTemplate,a.p.colModel[g].template||{},a.p.colModel[g]),!1===a.p.keyIndex&&!0===a.p.colModel[g].key&&(a.p.keyIndex=g)}a.p.sortorder=a.p.sortorder.toLowerCase();b.jgrid.cell_width=b.jgrid.cellWidth();!0===a.p.grouping&&(a.p.scroll=!1,a.p.rownumbers=!1,a.p.treeGrid=!1,a.p.gridview=!0);if(!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(za){}"local"!==a.p.datatype&&(a.p.localReader={id:"_id_"})}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid")}catch(Aa){}}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cell_width?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));a.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.jsonReader);a.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.localReader);a.p.scroll&&(a.p.pgbuttons=!1,a.p.pginput=!1,a.p.rowList=[]);a.p.data.length&&O();var D="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",ta,F,ja,fa,ka,y,t,ba,ua=ba="",ga=[],va=[];F=[];if(!0===a.p.shrinkToFit&&!0===a.p.forceFit){for(g=a.p.colModel.length-1;0<=g;g--){if(!a.p.colModel[g].hidden){a.p.colModel[g].resizable=!1;break}}}"horizontal"===a.p.viewsortcols[1]&&(ba=" ui-i-asc",ua=" ui-i-desc");ta=n?"class='ui-th-div-ie'":"";ba="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+ba+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ua+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>");if(a.p.multiSort){for(ga=a.p.sortname.split(","),g=0;g<ga.length;g++){F=b.trim(ga[g]).split(" "),ga[g]=b.trim(F[0]),va[g]=F[1]?b.trim(F[1]):a.p.sortorder||"asc"}}for(g=0;g<this.p.colNames.length;g++){F=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[g])+'"':"",D+="<th id='"+a.p.id+"_"+a.p.colModel[g].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+F+">",F=a.p.colModel[g].index||a.p.colModel[g].name,D+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[g].name+"' "+ta+">"+a.p.colNames[g],a.p.colModel[g].width=a.p.colModel[g].width?parseInt(a.p.colModel[g].width,10):150,"boolean"!==typeof a.p.colModel[g].title&&(a.p.colModel[g].title=!0),a.p.colModel[g].lso="",F===a.p.sortname&&(a.p.lastsort=g),a.p.multiSort&&(F=b.inArray(F,ga),-1!==F&&(a.p.colModel[g].lso=va[F])),D+=ba+"</div></th>"}D+="</tr></thead>";ba=null;b(this).append(D);b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var la=[],ca;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];var c=!0===a.p.frozenColumns?a.p.id+"_frozen":"";this.checked?(b(a.rows).each(function(d){0<d&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!0),b(this).addClass("ui-state-highlight").attr("aria-selected","true"),a.p.selarrrow.push(this.id),a.p.selrow=this.id,c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!0),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).addClass("ui-state-highlight")))}),ca=!0,la=[]):(b(a.rows).each(function(d){0<d&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!1),b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),la.push(this.id),c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!1),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).removeClass("ui-state-highlight")))}),a.p.selrow=null,ca=!1);b(a).triggerHandler("jqGridSelectAll",[ca?a.p.selarrrow:la,ca]);b.isFunction(a.p.onSelectAll)&&a.p.onSelectAll.call(a,ca?a.p.selarrrow:la,ca)})}!0===a.p.autowidth&&(D=b(m).innerWidth(),a.p.width=0<D?D:"nw");(function(){var d=0,e=b.jgrid.cell_width?0:r(a.p.cellLayout,0),g=0,f,h=r(a.p.scrollOffset,0),k,m=!1,n,p=0,q;b.each(a.p.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(a.p.grouping&&a.p.autowidth){var c=b.inArray(this.name,a.p.groupingView.groupField);0<=c&&a.p.groupingView.groupColumnShow.length>c&&(this.hidden=!a.p.groupingView.groupColumnShow[c])}this.widthOrg=k=r(this.width,0);!1===this.hidden&&(d+=k+e,this.fixed?p+=k+e:g++)});isNaN(a.p.width)&&(a.p.width=d+(!1!==a.p.shrinkToFit||isNaN(a.p.height)?0:h));c.width=a.p.width;a.p.tblwidth=d;!1===a.p.shrinkToFit&&!0===a.p.forceFit&&(a.p.forceFit=!1);!0===a.p.shrinkToFit&&0<g&&(n=c.width-e*g-p,isNaN(a.p.height)||(n-=h,m=!0),d=0,b.each(a.p.colModel,function(b){!1!==this.hidden||this.fixed||(this.width=k=Math.round(n*this.width/(a.p.tblwidth-e*g-p)),d+=k,f=b)}),q=0,m?c.width-p-(d+e*g)!==h&&(q=c.width-p-(d+e*g)-h):m||1===Math.abs(c.width-p-(d+e*g))||(q=c.width-p-(d+e*g)),a.p.colModel[f].width+=q,a.p.tblwidth=d+q+e*g+p,a.p.tblwidth>a.p.width&&(a.p.colModel[f].width-=a.p.tblwidth-parseInt(a.p.width,10),a.p.tblwidth=a.p.width))})();b(m).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(k).css("width",c.width+"px");var D=b("thead:first",a).get(0),V="";a.p.footerrow&&(V+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var k=b("tr:first",D),da="<tr class='jqgfirstrow' role='row' style='height:auto'>";a.p.disableClick=!1;b("th",k).each(function(d){ja=a.p.colModel[d].width;void 0===a.p.colModel[d].resizable&&(a.p.colModel[d].resizable=!0);a.p.colModel[d].resizable?(fa=document.createElement("span"),b(fa).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f).css("cursor","col-resize"),b(this).addClass(a.p.resizeclass)):fa="";b(this).css("width",ja+"px").prepend(fa);fa=null;var e="";a.p.colModel[d].hidden&&(b(this).css("display","none"),e="display:none;");da+="<td role='gridcell' style='height:0px;width:"+ja+"px;"+e+"'></td>";c.headers[d]={width:ja,el:this};ka=a.p.colModel[d].sortable;"boolean"!==typeof ka&&(ka=a.p.colModel[d].sortable=!0);e=a.p.colModel[d].name;"cb"!==e&&"subgrid"!==e&&"rn"!==e&&a.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable");ka&&(a.p.multiSort?a.p.viewsortcols[0]?(b("div span.s-ico",this).show(),a.p.colModel[d].lso&&b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")):a.p.colModel[d].lso&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")):a.p.viewsortcols[0]?(b("div span.s-ico",this).show(),d===a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")):d===a.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")));a.p.footerrow&&(V+="<td role='gridcell' "+p(d,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(d){if(1===b(d.target).closest("th>span.ui-jqgrid-resize").length){var e=sa(this);if(!0===a.p.forceFit){var g=a.p,f=e,h;for(h=e+1;h<a.p.colModel.length;h++){if(!0!==a.p.colModel[h].hidden){f=h;break}}g.nv=f-e}c.dragStart(e,d,xa(e));return !1}}).click(function(c){if(a.p.disableClick){return a.p.disableClick=!1}var d="th>div.ui-jqgrid-sortable",e,g;a.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");c=b(c.target).closest(d);if(1===c.length){var f;if(a.p.frozenColumns){var h=b(this)[0].id.substring(a.p.id.length+1);b(a.p.colModel).each(function(a){if(this.name===h){return f=a,!1}})}else{f=sa(this)}a.p.viewsortcols[2]||(e=!0,g=c.attr("sort"));null!=f&&ra(b("div",this)[0].id,f,e,g,this);return !1}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",k)}catch(Ba){}}a.p.footerrow&&(V+="</tr></tbody></table>");da+="</tr>";k=document.createElement("tbody");this.appendChild(k);b(this).addClass("ui-jqgrid-btable").append(da);var da=null,k=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(D),J=a.p.caption&&!0===a.p.hiddengrid?!0:!1;g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>");D=null;c.hDiv=document.createElement("div");b(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(g);b(g).append(k);k=null;J&&b(c.hDiv).hide();a.p.pager&&("string"===typeof a.p.pager?"#"!==a.p.pager.substr(0,1)&&(a.p.pager="#"+a.p.pager):a.p.pager="#"+b(a.p.pager).attr("id"),b(a.p.pager).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(m),J&&b(a.p.pager).hide(),qa(a.p.pager,""));!1===a.p.cellEdit&&!0===a.p.hoverrows&&b(a).bind("mouseover",function(a){t=b(a.target).closest("tr.jqgrow");"ui-subgrid"!==b(t).attr("class")&&b(t).addClass("ui-state-hover")}).bind("mouseout",function(a){t=b(a.target).closest("tr.jqgrow");b(t).removeClass("ui-state-hover")});var B,N,ma;b(a).before(c.hDiv).click(function(c){y=c.target;t=b(y,a.rows).closest("tr.jqgrow");if(0===b(t).length||-1<t[0].className.indexOf("ui-state-disabled")||(b(y,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id){return this}var d=b(y).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[t[0].id,c]);(e=!1===e||"stop"===e?!1:!0)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,t[0].id,c));if("A"!==y.tagName&&("INPUT"!==y.tagName&&"TEXTAREA"!==y.tagName&&"OPTION"!==y.tagName&&"SELECT"!==y.tagName||d)&&!0===e){if(B=t[0].id,N=b.jgrid.getCellIndex(y),ma=b(y).closest("td,th").html(),b(a).triggerHandler("jqGridCellSelect",[B,N,ma,c]),b.isFunction(a.p.onCellSelect)&&a.p.onCellSelect.call(a,B,N,ma,c),!0===a.p.cellEdit){if(a.p.multiselect&&d){b(a).jqGrid("setSelection",B,!0,c)}else{B=t[0].rowIndex;try{b(a).jqGrid("editCell",B,N,!0)}catch(g){}}}else{if(a.p.multikey){c[a.p.multikey]?b(a).jqGrid("setSelection",B,!0,c):a.p.multiselect&&d&&(d=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+B).is(":checked"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+B)[a.p.useProp?"prop":"attr"]("checked",d))}else{if(a.p.multiselect&&a.p.multiboxonly&&!d){var f=a.p.frozenColumns?a.p.id+"_frozen":"";b(a.p.selarrrow).each(function(c,d){var e=b(a).jqGrid("getGridRowById",d);b(e).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d))[a.p.useProp?"prop":"attr"]("checked",!1);f&&(b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f))[a.p.useProp?"prop":"attr"]("checked",!1))});a.p.selarrrow=[]}b(a).jqGrid("setSelection",B,!0,c)}}}}).bind("reloadGrid",function(c,d){!0===a.p.treeGrid&&(a.p.datatype=a.p.treedatatype);d&&d.current&&a.grid.selectionPreserver(a);"local"===a.p.datatype?(b(a).jqGrid("resetSelection"),a.p.data.length&&O()):a.p.treeGrid||(a.p.selrow=null,a.p.multiselect&&(a.p.selarrrow=[],ha(!1)),a.p.savedRow=[]);a.p.scroll&&X.call(a,!0,!1);if(d&&d.page){var e=d.page;e>a.p.lastpage&&(e=a.p.lastpage);1>e&&(e=1);a.p.page=e;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(e-1)*a.grid.prevRowHeight*a.p.rowNum:0}a.grid.prevRowHeight&&a.p.scroll?(delete a.p.lastpage,a.grid.populateVisible()):a.grid.populate();!0===a.p._inlinenav&&b(a).jqGrid("showAddEditButtons");return !1}).dblclick(function(c){y=c.target;t=b(y,a.rows).closest("tr.jqgrow");0!==b(t).length&&(B=t[0].rowIndex,N=b.jgrid.getCellIndex(y),b(a).triggerHandler("jqGridDblClickRow",[b(t).attr("id"),B,N,c]),b.isFunction(a.p.ondblClickRow)&&a.p.ondblClickRow.call(a,b(t).attr("id"),B,N,c))}).bind("contextmenu",function(c){y=c.target;t=b(y,a.rows).closest("tr.jqgrow");0!==b(t).length&&(a.p.multiselect||b(a).jqGrid("setSelection",t[0].id,!0,c),B=t[0].rowIndex,N=b.jgrid.getCellIndex(y),b(a).triggerHandler("jqGridRightClickRow",[b(t).attr("id"),B,N,c]),b.isFunction(a.p.onRightClickRow)&&a.p.onRightClickRow.call(a,b(t).attr("id"),B,N,c))});c.bDiv=document.createElement("div");n&&"auto"===String(a.p.height).toLowerCase()&&(a.p.height="100%");b(c.bDiv).append(b('<div style="position:relative;'+(n&&8>b.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid);b("table:first",c.bDiv).css({width:a.p.tblwidth+"px"});b.support.tbody||2===b("tbody",this).length&&b("tbody:gt(0)",this).remove();a.p.multikey&&(b.jgrid.msie?b(c.bDiv).bind("selectstart",function(){return !1}):b(c.bDiv).bind("mousedown",function(){return !1}));J&&b(c.bDiv).hide();c.cDiv=document.createElement("div");var na=!0===a.p.hidegrid?b("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' />").hover(function(){na.addClass("ui-state-hover")},function(){na.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===f?"left":"right","0px"):"";b(c.cDiv).append(na).append("<span class='ui-jqgrid-title'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===f?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");b(c.cDiv).insertBefore(c.hDiv);a.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"===a.p.toolbar[1]?b(c.uDiv).insertBefore(c.hDiv):"bottom"===a.p.toolbar[1]&&b(c.uDiv).insertAfter(c.hDiv),"both"===a.p.toolbar[1]?(c.ubDiv=document.createElement("div"),b(c.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(c.hDiv),b(c.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(c.hDiv),J&&b(c.ubDiv).hide()):b(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),J&&b(c.uDiv).hide());a.p.toppager&&(a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager",c.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0],a.p.toppager="#"+a.p.toppager,b(c.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width).insertBefore(c.hDiv),qa(a.p.toppager,"_t"));a.p.footerrow&&(c.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>"),b(c.sDiv).append(g).width(c.width).insertAfter(c.hDiv),b(g).append(V),c.footers=b(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,a.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),J&&b(c.sDiv).hide());g=null;if(a.p.caption){var ya=a.p.datatype;!0===a.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",c.cDiv).click(function(d){var e=b.isFunction(a.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,h=this;!0===a.p.toolbar[0]&&("both"===a.p.toolbar[1]&&(g+=", #"+b(c.ubDiv).attr("id")),g+=", #"+b(c.uDiv).attr("id"));f=b(g,"#gview_"+b.jgrid.jqID(a.p.id)).length;"visible"===a.p.gridstate?b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){f--;0===f&&(b("span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),a.p.gridstate="hidden",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(J||a.p.onHeaderClick.call(a,a.p.gridstate,d)))}):"hidden"===a.p.gridstate&&b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){f--;0===f&&(b("span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),J&&(a.p.datatype=ya,Q(),J=!1),a.p.gridstate="visible",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(J||a.p.onHeaderClick.call(a,a.p.gridstate,d)))});return !1}),J&&(a.p.datatype="local",b(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else{b(c.cDiv).hide()}b(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){return c.dragMove(a),!1}});b(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return !1});b(document).bind("mouseup.jqGrid"+a.p.id,function(){return c.resizing?(c.dragEnd(),!1):!0});a.formatCol=p;a.sortData=ra;a.updatepager=function(c,d){var e,g,f,h,k,l,m,n="",p=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",q=a.p.toppager?"_"+a.p.toppager.substr(1):"";f=parseInt(a.p.page,10)-1;0>f&&(f=0);f*=parseInt(a.p.rowNum,10);k=f+a.p.reccount;if(a.p.scroll){e=b("tbody:first > tr:gt(0)",a.grid.bDiv);f=k-e.length;a.p.reccount=e.length;if(e=e.outerHeight()||a.grid.prevRowHeight){g=f*e,m=parseInt(a.p.records,10)*e,b(">div:first",a.grid.bDiv).css({height:m}).children("div:first").css({height:g,display:g?"":"none"}),0==a.grid.bDiv.scrollTop&&1<a.p.page&&(a.grid.bDiv.scrollTop=a.p.rowNum*(a.p.page-1)*e)}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft}n=a.p.pager||"";if(n+=a.p.toppager?n?","+a.p.toppager:a.p.toppager:""){m=b.jgrid.formatter.integer||{},e=r(a.p.page),g=r(a.p.lastpage),b(".selbox",n)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===a.p.pginput&&(b(".ui-pg-input",n).val(a.p.page),h=a.p.toppager?"#sp_1"+p+",#sp_1"+q:"#sp_1"+p,b(h).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,m):a.p.lastpage)),a.p.viewrecords&&(0===a.p.reccount?b(".ui-paging-info",n).html(a.p.emptyrecords):(h=f+1,l=a.p.records,b.fmatter&&(h=b.fmatter.util.NumberFormat(h,m),k=b.fmatter.util.NumberFormat(k,m),l=b.fmatter.util.NumberFormat(l,m)),b(".ui-paging-info",n).html(b.jgrid.format(a.p.recordtext,h,k,l)))),!0===a.p.pgbuttons&&(0>=e&&(e=g=0),1===e||0===e?(b("#first"+p+", #prev"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#first_t"+q+", #prev_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first"+p+", #prev"+p).removeClass("ui-state-disabled"),a.p.toppager&&b("#first_t"+q+", #prev_t"+q).removeClass("ui-state-disabled")),e===g||0===e?(b("#next"+p+", #last"+p).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#next_t"+q+", #last_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next"+p+", #last"+p).removeClass("ui-state-disabled"),a.p.toppager&&b("#next_t"+q+", #last_t"+q).removeClass("ui-state-disabled")))}!0===c&&!0===a.p.rownumbers&&b(">td.jqgrid-rownum",a.rows).each(function(a){b(this).html(f+1+a)});d&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b(a).triggerHandler("jqGridGridComplete");b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a);b(a).triggerHandler("jqGridAfterGridComplete")};a.refreshIndex=O;a.setHeadCheckBox=ha;a.constructTr=$;a.formatter=function(a,b,c,d,e){return x(a,b,c,d,e)};b.extend(c,{populate:Q,emptyRows:X,beginReq:P,endReq:T});this.grid=c;a.addXmlData=function(b){K(b,a.grid.bDiv)};a.addJSONData=function(b){Y(b,a.grid.bDiv)};this.grid.cols=this.rows[0].cells;b(a).triggerHandler("jqGridInitGrid");b.isFunction(a.p.onInitGrid)&&a.p.onInitGrid.call(a);Q();a.p.hiddengrid=!1}}}}})};b.jgrid.extend({getGridParam:function(b){var f=this[0];if(f&&f.grid){return b?void 0!==f.p[b]?f.p[b]:null:f.p}},setGridParam:function(e){return this.each(function(){this.grid&&"object"===typeof e&&b.extend(!0,this.p,e)})},getGridRowById:function(e){var f;this.each(function(){try{for(var c=this.rows.length;c--;){if(e.toString()===this.rows[c].id){f=this.rows[c];break}}}catch(d){f=b(this.grid.bDiv).find("#"+b.jgrid.jqID(e))}});return f},getDataIDs:function(){var e=[],f=0,c,d=0;this.each(function(){if((c=this.rows.length)&&0<c){for(;f<c;){b(this.rows[f]).hasClass("jqgrow")&&(e[d]=this.rows[f].id,d++),f++}}});return e},setSelection:function(e,f,c){return this.each(function(){var d,a,l,g,h,k;void 0!==e&&(f=!1===f?!1:!0,!(a=b(this).jqGrid("getGridRowById",e))||!a.className||-1<a.className.indexOf("ui-state-disabled")||(!0===this.p.scrollrows&&(l=b(this).jqGrid("getGridRowById",e).rowIndex,0<=l&&(d=b(this.grid.bDiv)[0].clientHeight,g=b(this.grid.bDiv)[0].scrollTop,h=b(this.rows[l]).position().top,l=this.rows[l].clientHeight,h+l>=d+g?b(this.grid.bDiv)[0].scrollTop=h-(d+g)+l+g:h<d+g&&h<g&&(b(this.grid.bDiv)[0].scrollTop=h))),!0===this.p.frozenColumns&&(k=this.p.id+"_frozen"),this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=a.id,g=b.inArray(this.p.selrow,this.p.selarrrow),-1===g?("ui-subgrid"!==a.className&&b(a).addClass("ui-state-highlight").attr("aria-selected","true"),d=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==a.className&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false"),d=!1,this.p.selarrrow.splice(g,1),h=this.p.selarrrow[0],this.p.selrow=void 0===h?null:h),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a.id))[this.p.useProp?"prop":"attr"]("checked",d),k&&(-1===g?b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k))[this.p.useProp?"prop":"attr"]("checked",d)),f&&(b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,d,c))):"ui-subgrid"!==a.className&&(this.p.selrow!==a.id?(b(b(this).jqGrid("getGridRowById",this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(a).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),k&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(k)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(k)).addClass("ui-state-highlight")),d=!0):d=!1,this.p.selrow=a.id,f&&(b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,d,c)))))})},resetSelection:function(e){return this.each(function(){var f=this,c,d;!0===f.p.frozenColumns&&(d=f.p.id+"_frozen");if(void 0!==e){c=e===f.p.selrow?f.p.selrow:e;b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(c)).removeClass("ui-state-highlight").attr("aria-selected","false");d&&b("#"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight");if(f.p.multiselect){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(f.p.id))[f.p.useProp?"prop":"attr"]("checked",!1);if(d){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d))[f.p.useProp?"prop":"attr"]("checked",!1)}f.setHeadCheckBox(!1)}c=null}else{f.p.multiselect?(b(f.p.selarrrow).each(function(a,c){b(b(f).jqGrid("getGridRowById",c)).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c))[f.p.useProp?"prop":"attr"]("checked",!1);d&&(b("#"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(d))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.setHeadCheckBox(!1),f.p.selarrrow=[],f.p.selrow=null):f.p.selrow&&(b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&b("#"+b.jgrid.jqID(f.p.selrow),"#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight"),f.p.selrow=null)}!0===f.p.cellEdit&&0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(b("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover"));f.p.savedRow=[]})},getRowData:function(e){var f={},c,d=!1,a,l=0;this.each(function(){var g=this,h,k;if(void 0===e){d=!0,c=[],a=g.rows.length}else{k=b(g).jqGrid("getGridRowById",e);if(!k){return f}a=2}for(;l<a;){d&&(k=g.rows[l]),b(k).hasClass("jqgrow")&&(b('td[role="gridcell"]',k).each(function(a){h=g.p.colModel[a].name;if("cb"!==h&&"subgrid"!==h&&"rn"!==h){if(!0===g.p.treeGrid&&h===g.p.ExpandColumn){f[h]=b.jgrid.htmlDecode(b("span:first",this).html())}else{try{f[h]=b.unformat.call(g,this,{rowId:k.id,colModel:g.p.colModel[a]},a)}catch(c){f[h]=b.jgrid.htmlDecode(b(this).html())}}}}),d&&(c.push(f),f={})),l++}});return c||f},delRowData:function(e){var f=!1,c,d;this.each(function(){c=b(this).jqGrid("getGridRowById",e);if(!c){return !1}b(c).remove();this.p.records--;this.p.reccount--;this.updatepager(!0,!1);f=!0;this.p.multiselect&&(d=b.inArray(e,this.p.selarrrow),-1!==d&&this.p.selarrrow.splice(d,1));this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null;if("local"===this.p.datatype){var a=b.jgrid.stripPref(this.p.idPrefix,e),a=this.p._index[a];void 0!==a&&(this.p.data.splice(a,1),this.refreshIndex())}if(!0===this.p.altRows&&f){var l=this.p.altclass;b(this.rows).each(function(a){1===a%2?b(this).addClass(l):b(this).removeClass(l)})}});return f},setRowData:function(e,f,c){var d,a=!0,l;this.each(function(){if(!this.grid){return !1}var g=this,h,k,n=typeof c,m={};k=b(this).jqGrid("getGridRowById",e);if(!k){return !1}if(f){try{if(b(this.p.colModel).each(function(a){d=this.name;var c=b.jgrid.getAccessor(f,d);void 0!==c&&(m[d]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?b.unformat.date.call(g,c,this):c,h=g.formatter(e,c,a,f,"edit"),l=this.title?{title:b.jgrid.stripHtml(h)}:{},!0===g.p.treeGrid&&d===g.p.ExpandColumn?b("td[role='gridcell']:eq("+a+") > span:first",k).html(h).attr(l):b("td[role='gridcell']:eq("+a+")",k).html(h).attr(l))}),"local"===g.p.datatype){var r=b.jgrid.stripPref(g.p.idPrefix,e),p=g.p._index[r],q;if(g.p.treeGrid){for(q in g.p.treeReader){g.p.treeReader.hasOwnProperty(q)&&delete m[g.p.treeReader[q]]}}void 0!==p&&(g.p.data[p]=b.extend(!0,g.p.data[p],m));m=null}}catch(x){a=!1}}a&&("string"===n?b(k).addClass(c):null!==c&&"object"===n&&b(k).css(c),b(g).triggerHandler("jqGridAfterGridComplete"))});return a},addRowData:function(e,f,c,d){c||(c="last");var a=!1,l,g,h,k,n,m,r,p,q="",x,G,U,M,ea,W;f&&(b.isArray(f)?(x=!0,c="last",G=e):(f=[f],x=!1),this.each(function(){var X=f.length;n=!0===this.p.rownumbers?1:0;h=!0===this.p.multiselect?1:0;k=!0===this.p.subGrid?1:0;x||(void 0!==e?e=String(e):(e=b.jgrid.randId(),!1!==this.p.keyIndex&&(G=this.p.colModel[this.p.keyIndex+h+k+n].name,void 0!==f[0][G]&&(e=f[0][G]))));U=this.p.altclass;for(var O=0,$="",K={},Y=b.isFunction(this.p.afterInsertRow)?!0:!1;O<X;){M=f[O];g=[];if(x){try{e=M[G],void 0===e&&(e=b.jgrid.randId())}catch(oa){e=b.jgrid.randId()}$=!0===this.p.altRows?0===(this.rows.length-1)%2?U:"":""}W=e;e=this.p.idPrefix+e;n&&(q=this.formatCol(0,1,"",null,e,!0),g[g.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+q+">0</td>");h&&(p='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+e+'" class="cbox"/>',q=this.formatCol(n,1,"",null,e,!0),g[g.length]='<td role="gridcell" '+q+">"+p+"</td>");k&&(g[g.length]=b(this).jqGrid("addSubGridCell",h+n,1));for(r=h+k+n;r<this.p.colModel.length;r++){ea=this.p.colModel[r],l=ea.name,K[l]=M[l],p=this.formatter(e,b.jgrid.getAccessor(M,l),r,M),q=this.formatCol(r,1,p,M,e,K),g[g.length]='<td role="gridcell" '+q+">"+p+"</td>"}g.unshift(this.constructTr(e,!1,$,K,M,!1));g[g.length]="</tr>";if(0===this.rows.length){b("table:first",this.grid.bDiv).append(g.join(""))}else{switch(c){case"last":b(this.rows[this.rows.length-1]).after(g.join(""));m=this.rows.length-1;break;case"first":b(this.rows[0]).after(g.join(""));m=1;break;case"after":if(m=b(this).jqGrid("getGridRowById",d)){b(this.rows[m.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[m.rowIndex+1]).after(g):b(m).after(g.join("")),m=m.rowIndex+1}break;case"before":if(m=b(this).jqGrid("getGridRowById",d)){b(m).before(g.join("")),m=m.rowIndex-1}}}!0===this.p.subGrid&&b(this).jqGrid("addSubGrid",h+n,m);this.p.records++;this.p.reccount++;b(this).triggerHandler("jqGridAfterInsertRow",[e,M,M]);Y&&this.p.afterInsertRow.call(this,e,M,M);O++;"local"===this.p.datatype&&(K[this.p.localReader.id]=W,this.p._index[W]=this.p.data.length,this.p.data.push(K),K={})}!0!==this.p.altRows||x||("last"===c?1===(this.rows.length-1)%2&&b(this.rows[this.rows.length-1]).addClass(U):b(this.rows).each(function(a){1===a%2?b(this).addClass(U):b(this).removeClass(U)}));this.updatepager(!0,!0);a=!0}));return a},footerData:function(e,f,c){function d(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0}var a,l=!1,g={},h;void 0==e&&(e="get");"boolean"!==typeof c&&(c=!0);e=e.toLowerCase();this.each(function(){var k=this,n;if(!k.grid||!k.p.footerrow||"set"===e&&d(f)){return !1}l=!0;b(this.p.colModel).each(function(d){a=this.name;"set"===e?void 0!==f[a]&&(n=c?k.formatter("",f[a],d,f,"edit"):f[a],h=this.title?{title:b.jgrid.stripHtml(n)}:{},b("tr.footrow td:eq("+d+")",k.grid.sDiv).html(n).attr(h),l=!0):"get"===e&&(g[a]=b("tr.footrow td:eq("+d+")",k.grid.sDiv).html())})});return"get"===e?g:l},showHideCol:function(e,f){return this.each(function(){var c=this,d=!1,a=b.jgrid.cell_width?0:c.p.cellLayout,l;if(c.grid){"string"===typeof e&&(e=[e]);f="none"!==f?"":"none";var g=""===f?!0:!1,h=c.p.groupHeader&&("object"===typeof c.p.groupHeader||b.isFunction(c.p.groupHeader));h&&b(c).jqGrid("destroyGroupHeader",!1);b(this.p.colModel).each(function(h){if(-1!==b.inArray(this.name,e)&&this.hidden===g){if(!0===c.p.frozenColumns&&!0===this.frozen){return !0}b("tr[role=rowheader]",c.grid.hDiv).each(function(){b(this.cells[h]).css("display",f)});b(c.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[h]).css("display",f)});c.p.footerrow&&b("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",f);l=parseInt(this.width,10);c.p.tblwidth="none"===f?c.p.tblwidth-(l+a):c.p.tblwidth+(l+a);this.hidden=!g;d=!0;b(c).triggerHandler("jqGridShowHideCol",[g,this.name,h])}});!0===d&&(!0!==c.p.shrinkToFit||isNaN(c.p.height)||(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),b(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));h&&b(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,f,c){function d(a){var c;c=a.length?b.makeArray(a):b.extend({},a);b.each(e,function(b){a[b]=c[this]})}function a(a,c){b(">tr"+(c||""),a).each(function(){var a=this,c=b.makeArray(a.cells);b.each(e,function(){var b=c[this];b&&a.appendChild(b)})})}var l=this.get(0);d(l.p.colModel);d(l.p.colNames);d(l.grid.headers);a(b("thead:first",l.grid.hDiv),c&&":not(.ui-jqgrid-labels)");f&&a(b("#"+b.jgrid.jqID(l.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");l.p.footerrow&&a(b("tbody:first",l.grid.sDiv));l.p.remapColumns&&(l.p.remapColumns.length?d(l.p.remapColumns):l.p.remapColumns=b.makeArray(e));l.p.lastsort=b.inArray(l.p.lastsort,e);l.p.treeGrid&&(l.p.expColInd=b.inArray(l.p.expColInd,e));b(l).triggerHandler("jqGridRemapColumns",[e,f,c])},setGridWidth:function(e,f){return this.each(function(){if(this.grid){var c=this,d,a=0,l=b.jgrid.cell_width?0:c.p.cellLayout,g,h=0,k=!1,n=c.p.scrollOffset,m,r=0,p;"boolean"!==typeof f&&(f=c.p.shrinkToFit);if(!isNaN(e)){e=parseInt(e,10);c.grid.width=c.p.width=e;b("#gbox_"+b.jgrid.jqID(c.p.id)).css("width",e+"px");b("#gview_"+b.jgrid.jqID(c.p.id)).css("width",e+"px");b(c.grid.bDiv).css("width",e+"px");b(c.grid.hDiv).css("width",e+"px");c.p.pager&&b(c.p.pager).css("width",e+"px");c.p.toppager&&b(c.p.toppager).css("width",e+"px");!0===c.p.toolbar[0]&&(b(c.grid.uDiv).css("width",e+"px"),"both"===c.p.toolbar[1]&&b(c.grid.ubDiv).css("width",e+"px"));c.p.footerrow&&b(c.grid.sDiv).css("width",e+"px");!1===f&&!0===c.p.forceFit&&(c.p.forceFit=!1);if(!0===f){b.each(c.p.colModel,function(){!1===this.hidden&&(d=this.widthOrg,a+=d+l,this.fixed?r+=d+l:h++)});if(0===h){return}c.p.tblwidth=a;m=e-l*h-r;!isNaN(c.p.height)&&(b(c.grid.bDiv)[0].clientHeight<b(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(k=!0,m-=n);var a=0,q=0<c.grid.cols.length;b.each(c.p.colModel,function(b){!1!==this.hidden||this.fixed||(d=this.widthOrg,d=Math.round(m*d/(c.p.tblwidth-l*h-r)),0>d||(this.width=d,a+=d,c.grid.headers[b].width=d,c.grid.headers[b].el.style.width=d+"px",c.p.footerrow&&(c.grid.footers[b].style.width=d+"px"),q&&(c.grid.cols[b].style.width=d+"px"),g=b))});if(!g){return}p=0;k?e-r-(a+l*h)!==n&&(p=e-r-(a+l*h)-n):1!==Math.abs(e-r-(a+l*h))&&(p=e-r-(a+l*h));c.p.colModel[g].width+=p;c.p.tblwidth=a+p+l*h+r;c.p.tblwidth>e?(k=c.p.tblwidth-parseInt(e,10),c.p.tblwidth=e,d=c.p.colModel[g].width-=k):d=c.p.colModel[g].width;c.grid.headers[g].width=d;c.grid.headers[g].el.style.width=d+"px";q&&(c.grid.cols[g].style.width=d+"px");c.p.footerrow&&(c.grid.footers[g].style.width=d+"px")}c.p.tblwidth&&(b("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),b("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&b("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){if(this.grid){var f=b(this.grid.bDiv);f.css({height:e+(isNaN(e)?"":"px")});!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(f.height()-16);this.p.height=e;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e);b(this.grid.cDiv).show()})},setLabel:function(e,f,c,d){return this.each(function(){var a=-1;if(this.grid&&void 0!==e&&(b(this.p.colModel).each(function(b){if(this.name===e){return a=b,!1}}),0<=a)){var l=b("tr.ui-jqgrid-labels th:eq("+a+")",this.grid.hDiv);if(f){var g=b(".s-ico",l);b("[id^=jqgh_]",l).empty().html(f).append(g);this.p.colNames[a]=f}c&&("string"===typeof c?b(l).addClass(c):b(l).css(c));"object"===typeof d&&b(l).attr(d)}})},setCell:function(e,f,c,d,a,l){return this.each(function(){var g=-1,h,k;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return g=a,!1}}):g=parseInt(f,10),0<=g&&(h=b(this).jqGrid("getGridRowById",e)))){var n=b("td:eq("+g+")",h);if(""!==c||!0===l){h=this.formatter(e,c,g,h,"edit"),k=this.p.colModel[g].title?{title:b.jgrid.stripHtml(h)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(n)).length?b("span",b(n)).html(h).attr(k):b(n).html(h).attr(k),"local"===this.p.datatype&&(h=this.p.colModel[g],c=h.formatter&&"string"===typeof h.formatter&&"date"===h.formatter?b.unformat.date.call(this,c,h):c,k=this.p._index[b.jgrid.stripPref(this.p.idPrefix,e)],void 0!==k&&(this.p.data[k][h.name]=c))}"string"===typeof d?b(n).addClass(d):d&&b(n).css(d);"object"===typeof a&&b(n).attr(a)}})},getCell:function(e,f){var c=!1;this.each(function(){var d=-1;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return d=a,!1}}):d=parseInt(f,10),0<=d)){var a=b(this).jqGrid("getGridRowById",e);if(a){try{c=b.unformat.call(this,b("td:eq("+d+")",a),{rowId:a.id,colModel:this.p.colModel[d]},d)}catch(l){c=b.jgrid.htmlDecode(b("td:eq("+d+")",a).html())}}}});return c},getCol:function(e,f,c){var d=[],a,l=0,g,h,k;f="boolean"!==typeof f?!1:f;void 0===c&&(c=!1);this.each(function(){var n=-1;if(this.grid&&(isNaN(e)?b(this.p.colModel).each(function(a){if(this.name===e){return n=a,!1}}):n=parseInt(e,10),0<=n)){var m=this.rows.length,r=0,p=0;if(m&&0<m){for(;r<m;){if(b(this.rows[r]).hasClass("jqgrow")){try{a=b.unformat.call(this,b(this.rows[r].cells[n]),{rowId:this.rows[r].id,colModel:this.p.colModel[n]},n)}catch(q){a=b.jgrid.htmlDecode(this.rows[r].cells[n].innerHTML)}c?(k=parseFloat(a),isNaN(k)||(l+=k,void 0===h&&(h=g=k),g=Math.min(g,k),h=Math.max(h,k),p++)):f?d.push({id:this.rows[r].id,value:a}):d.push(a)}r++}if(c){switch(c.toLowerCase()){case"sum":d=l;break;case"avg":d=l/p;break;case"count":d=m-1;break;case"min":d=g;break;case"max":d=h}}}}});return d},clearGridData:function(e){return this.each(function(){if(this.grid){"boolean"!==typeof e&&(e=!1);if(this.p.deepempty){b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove()}else{var f=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(f)}this.p.footerrow&&e&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(e,f){var c=!1,d;this.each(function(){(d=b(this).jqGrid("getGridRowById",e))&&(c=!0===f?d:d.rowIndex)});return c},bindKeys:function(e){var f=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var c=this;b("body").is("[role]")||b("body").attr("role","application");c.p.scrollrows=f.scrollingRows;b(c).keydown(function(d){var a=b(c).find("tr[tabindex=0]")[0],e,g,h,k=c.p.treeReader.expanded_field;if(a){if(h=c.p._index[b.jgrid.stripPref(c.p.idPrefix,a.id)],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){g=a.previousSibling;e="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.previousSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){e=g.id;break}}}else{e=g.id}}b(c).jqGrid("setSelection",e,!0,d);d.preventDefault()}if(40===d.keyCode){g=a.nextSibling;e="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.nextSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){e=g.id;break}}}else{e=g.id}}b(c).jqGrid("setSelection",e,!0,d);d.preventDefault()}37===d.keyCode&&(c.p.treeGrid&&c.p.data[h][k]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),b.isFunction(f.onLeftKey)&&f.onLeftKey.call(c,c.p.selrow));39===d.keyCode&&(c.p.treeGrid&&!c.p.data[h][k]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyRight",[c.p.selrow]),b.isFunction(f.onRightKey)&&f.onRightKey.call(c,c.p.selrow))}else{13===d.keyCode?(b(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),b.isFunction(f.onEnter)&&f.onEnter.call(c,c.p.selrow)):32===d.keyCode&&(b(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),b.isFunction(f.onSpace)&&f.onSpace.call(c,c.p.selrow))}}})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(e){var f=!1,c;this.each(function(){void 0!==e&&(c=this.p._index[b.jgrid.stripPref(this.p.idPrefix,e)],0<=c&&(f=this.p.data[c]))});return f}})})(jQuery);(function(b){b.fmatter={};b.extend(b.fmatter,{isBoolean:function(c){return"boolean"===typeof c},isObject:function(a){return a&&("object"===typeof a||b.isFunction(a))||!1},isString:function(c){return"string"===typeof c},isNumber:function(c){return"number"===typeof c&&isFinite(c)},isValue:function(c){return this.isObject(c)||this.isString(c)||this.isNumber(c)||this.isBoolean(c)},isEmpty:function(a){if(!this.isString(a)&&this.isValue(a)){return !1}if(!this.isValue(a)){return !0}a=b.trim(a).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===a}});b.fn.fmatter=function(n,a,m,l,k){var j=a;m=b.extend({},b.jgrid.formatter,m);try{j=b.fn.fmatter[n].call(this,a,m,l,k)}catch(i){}return j};b.fmatter.util={NumberFormat:function(q,r){b.fmatter.isNumber(q)||(q*=1);if(b.fmatter.isNumber(q)){var p=0>q,o=String(q),n=r.decimalSeparator||".",m;if(b.fmatter.isNumber(r.decimalPlaces)){var j=r.decimalPlaces,o=Math.pow(10,j),o=String(Math.round(q*o)/o);m=o.lastIndexOf(".");if(0<j){for(0>m?(o+=n,m=o.length-1):"."!==n&&(o=o.replace(".",n));o.length-1-m<j;){o+="0"}}}if(r.thousandsSeparator){j=r.thousandsSeparator;m=o.lastIndexOf(n);m=-1<m?m:o.length;var n=o.substring(m),a=-1,i;for(i=m;0<i;i--){a++,0===a%3&&i!==m&&(!p||1<i)&&(n=j+n),n=o.charAt(i-1)+n}o=n}o=r.prefix?r.prefix+o:o;return o=r.suffix?o+r.suffix:o}return q}};b.fn.fmatter.defaultFormat=function(d,a){return b.fmatter.isValue(d)&&""!==d?d:a.defaultValue||"&#160;"};b.fn.fmatter.email=function(d,a){return b.fmatter.isEmpty(d)?b.fn.fmatter.defaultFormat(d,a):'<a href="mailto:'+d+'">'+d+"</a>"};b.fn.fmatter.checkbox=function(h,a){var g=b.extend({},a.checkbox),f;void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));f=!0===g.disabled?'disabled="disabled"':"";if(b.fmatter.isEmpty(h)||void 0===h){h=b.fn.fmatter.defaultFormat(h,g)}h=String(h);h=(h+"").toLowerCase();return'<input type="checkbox" '+(0>h.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+h+'" offval="no" '+f+"/>"};b.fn.fmatter.link=function(h,a){var g={target:a.target},f="";void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));g.target&&(f="target="+g.target);return b.fmatter.isEmpty(h)?b.fn.fmatter.defaultFormat(h,a):"<a "+f+' href="'+h+'">'+h+"</a>"};b.fn.fmatter.showlink=function(h,a){var g={baseLinkUrl:a.baseLinkUrl,showAction:a.showAction,addParam:a.addParam||"",target:a.target,idName:a.idName},f="";void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));g.target&&(f="target="+g.target);g=g.baseLinkUrl+g.showAction+"?"+g.idName+"="+a.rowId+g.addParam;return b.fmatter.isString(h)||b.fmatter.isNumber(h)?"<a "+f+' href="'+g+'">'+h+"</a>":b.fn.fmatter.defaultFormat(h,a)};b.fn.fmatter.integer=function(f,a){var e=b.extend({},a.integer);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.number=function(f,a){var e=b.extend({},a.number);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.currency=function(f,a){var e=b.extend({},a.currency);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(e=b.extend({},e,a.colModel.formatoptions));return b.fmatter.isEmpty(f)?e.defaultValue:b.fmatter.util.NumberFormat(f,e)};b.fn.fmatter.date=function(h,a,g,f){g=b.extend({},a.date);void 0!==a.colModel&&void 0!==a.colModel.formatoptions&&(g=b.extend({},g,a.colModel.formatoptions));return g.reformatAfterEdit||"edit"!==f?b.fmatter.isEmpty(h)?b.fn.fmatter.defaultFormat(h,a):b.jgrid.parseDate(g.srcformat,h,g.newformat,g):b.fn.fmatter.defaultFormat(h,a)};b.fn.fmatter.select=function(u,v){u=String(u);var t=!1,s=[],r,q;void 0!==v.colModel.formatoptions?(t=v.colModel.formatoptions.value,r=void 0===v.colModel.formatoptions.separator?":":v.colModel.formatoptions.separator,q=void 0===v.colModel.formatoptions.delimiter?";":v.colModel.formatoptions.delimiter):void 0!==v.colModel.editoptions&&(t=v.colModel.editoptions.value,r=void 0===v.colModel.editoptions.separator?":":v.colModel.editoptions.separator,q=void 0===v.colModel.editoptions.delimiter?";":v.colModel.editoptions.delimiter);if(t){var p=!0===v.colModel.editoptions.multiple?!0:!1,j=[];p&&(j=u.split(","),j=b.map(j,function(c){return b.trim(c)}));if(b.fmatter.isString(t)){var o=t.split(q),i=0,a;for(a=0;a<o.length;a++){if(q=o[a].split(r),2<q.length&&(q[1]=b.map(q,function(d,c){if(0<c){return d}}).join(r)),p){-1<b.inArray(q[0],j)&&(s[i]=q[1],i++)}else{if(b.trim(q[0])===b.trim(u)){s[0]=q[1];break}}}}else{b.fmatter.isObject(t)&&(p?s=b.map(j,function(c){return t[c]}):s[0]=t[u]||"")}}u=s.join(", ");return""===u?b.fn.fmatter.defaultFormat(u,v):u};b.fn.fmatter.rowactions=function(s){var t=b(this).closest("tr.jqgrow"),r=t.attr("id"),q=b(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),q=b("#"+q),p=q[0],o=p.p,n=o.colModel[b.jgrid.getCellIndex(this)],i=n.frozen?b("tr#"+r+" td:eq("+b.jgrid.getCellIndex(this)+") > div",q):b(this).parent(),j={extraparam:{}},a=function(c){b.isFunction(j.afterRestore)&&j.afterRestore.call(p,c);i.find("div.ui-inline-edit,div.ui-inline-del").show();i.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==n.formatoptions&&(j=b.extend(j,n.formatoptions));void 0!==o.editOptions&&(j.editOptions=o.editOptions);void 0!==o.delOptions&&(j.delOptions=o.delOptions);t.hasClass("jqgrid-new-row")&&(j.extraparam[o.prmNames.oper]=o.prmNames.addoper);t={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:function(d,e){b.isFunction(j.afterSave)&&j.afterSave.call(p,d,e);i.find("div.ui-inline-edit,div.ui-inline-del").show();i.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:j.onError,afterrestorefunc:a,restoreAfterError:j.restoreAfterError,mtype:j.mtype};switch(s){case"edit":q.jqGrid("editRow",r,t);i.find("div.ui-inline-edit,div.ui-inline-del").hide();i.find("div.ui-inline-save,div.ui-inline-cancel").show();q.triggerHandler("jqGridAfterGridComplete");break;case"save":q.jqGrid("saveRow",r,t)&&(i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide(),q.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":q.jqGrid("restoreRow",r,a);i.find("div.ui-inline-edit,div.ui-inline-del").show();i.find("div.ui-inline-save,div.ui-inline-cancel").hide();q.triggerHandler("jqGridAfterGridComplete");break;case"del":q.jqGrid("delGridRow",r,j.delOptions);break;case"formedit":q.jqGrid("setSelection",r),q.jqGrid("editGridRow",r,j.editOptions)}};b.fn.fmatter.actions=function(j,a){var i={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},h=a.rowId,g="";void 0!==a.colModel.formatoptions&&(i=b.extend(i,a.colModel.formatoptions));if(void 0===h||b.fmatter.isEmpty(h)){return""}i.editformbutton?g+="<div title='"+b.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":i.editbutton&&(g+="<div title='"+b.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+"><span class='ui-icon ui-icon-pencil'></span></div>");i.delbutton&&(g+="<div title='"+b.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-trash'></span></div>");g+="<div title='"+b.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>";g+="<div title='"+b.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+g+"</div>"};b.unformat=function(q,r,p,o){var n,m=r.colModel.formatter,j=r.colModel.formatoptions||{},a=/([\.\*\_\'\(\)\{\}\+\?\\])/g,i=r.colModel.unformat||b.fn.fmatter[m]&&b.fn.fmatter[m].unformat;if(void 0!==i&&b.isFunction(i)){n=i.call(this,b(q).text(),r,q)}else{if(void 0!==m&&b.fmatter.isString(m)){switch(n=b.jgrid.formatter||{},m){case"integer":j=b.extend({},n.integer,j);r=j.thousandsSeparator.replace(a,"\\$1");r=RegExp(r,"g");n=b(q).text().replace(r,"");break;case"number":j=b.extend({},n.number,j);r=j.thousandsSeparator.replace(a,"\\$1");r=RegExp(r,"g");n=b(q).text().replace(r,"").replace(j.decimalSeparator,".");break;case"currency":j=b.extend({},n.currency,j);r=j.thousandsSeparator.replace(a,"\\$1");r=RegExp(r,"g");n=b(q).text();j.prefix&&j.prefix.length&&(n=n.substr(j.prefix.length));j.suffix&&j.suffix.length&&(n=n.substr(0,n.length-j.suffix.length));n=n.replace(r,"").replace(j.decimalSeparator,".");break;case"checkbox":j=r.colModel.editoptions?r.colModel.editoptions.value.split(":"):["Yes","No"];n=b("input",q).is(":checked")?j[0]:j[1];break;case"select":n=b.unformat.select(q,r,p,o);break;case"actions":return"";default:n=b(q).text()}}}return void 0!==n?n:!0===o?b(q).text():b.jgrid.htmlDecode(b(q).html())};b.unformat.select=function(s,t,r,q){r=[];s=b(s).text();if(!0===q){return s}q=b.extend({},void 0!==t.colModel.formatoptions?t.colModel.formatoptions:t.colModel.editoptions);t=void 0===q.separator?":":q.separator;var p=void 0===q.delimiter?";":q.delimiter;if(q.value){var o=q.value;q=!0===q.multiple?!0:!1;var n=[];q&&(n=s.split(","),n=b.map(n,function(c){return b.trim(c)}));if(b.fmatter.isString(o)){var i=o.split(p),j=0,a;for(a=0;a<i.length;a++){if(p=i[a].split(t),2<p.length&&(p[1]=b.map(p,function(d,c){if(0<c){return d}}).join(t)),q){-1<b.inArray(p[1],n)&&(r[j]=p[0],j++)}else{if(b.trim(p[1])===b.trim(s)){r[0]=p[0];break}}}}else{if(b.fmatter.isObject(o)||b.isArray(o)){q||(n[0]=s),r=b.map(n,function(d){var e;b.each(o,function(c,f){if(f===d){return e=c,!1}});if(void 0!==e){return e}})}}return r.join(", ")}return s||""};b.unformat.date=function(f,a){var e=b.jgrid.formatter.date||{};void 0!==a.formatoptions&&(e=b.extend({},e,a.formatoptions));return b.fmatter.isEmpty(f)?b.fn.fmatter.defaultFormat(f,a):b.jgrid.parseDate(e.newformat,f,e.srcformat,e)}})(jQuery);(function(b){b.jgrid.extend({getColProp:function(e){var i={},g=this[0];if(!g.grid){return !1}var g=g.p.colModel,f;for(f=0;f<g.length;f++){if(g[f].name===e){i=g[f];break}}return i},setColProp:function(a,d){return this.each(function(){if(this.grid&&d){var e=this.p.colModel,c;for(c=0;c<e.length;c++){if(e[c].name===a){b.extend(!0,this.p.colModel[c],d);break}}}})},sortGrid:function(e,g,f){return this.each(function(){var c=-1,a,d=!1;if(this.grid){e||(e=this.p.sortname);for(a=0;a<this.p.colModel.length;a++){if(this.p.colModel[a].index===e||this.p.colModel[a].name===e){c=a;!0===this.p.frozenColumns&&!0===this.p.colModel[a].frozen&&(d=this.grid.fhDiv.find("#"+this.p.id+"_"+e));break}}-1!==c&&(a=this.p.colModel[c].sortable,d||(d=this.grid.headers[c].el),"boolean"!==typeof a&&(a=!0),"boolean"!==typeof g&&(g=!1),a&&this.sortData("jqgh_"+this.p.id+"_"+e,c,g,f,d))}})},clearBeforeUnload:function(){return this.each(function(){var a=this.grid;b.isFunction(a.emptyRows)&&a.emptyRows.call(this,!0,!0);b(document).unbind("mouseup.jqGrid"+this.p.id);b(a.hDiv).unbind("mousemove");b(this).unbind();a.dragEnd=null;a.dragMove=null;a.dragStart=null;a.emptyRows=null;a.populate=null;a.populateVisible=null;a.scrollGrid=null;a.selectionPreserver=null;a.bDiv=null;a.cDiv=null;a.hDiv=null;a.cols=null;var f,e=a.headers.length;for(f=0;f<e;f++){a.headers[f].el=null}this.grid=this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&b(this.p.pager).remove();try{b(this).jqGrid("clearBeforeUnload"),b("#gbox_"+b.jgrid.jqID(this.id)).remove()}catch(a){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var a=b(this).attr("id"),f=b(this).attr("class");this.p.pager&&b(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var e=document.createElement("table");b(e).attr({id:a});e.className=f;a=b.jgrid.jqID(this.id);b(e).removeClass("ui-jqgrid-btable");1===b(this.p.pager).parents("#gbox_"+a).length?(b(e).insertBefore("#gbox_"+a).show(),b(this.p.pager).insertBefore("#gbox_"+a)):b(e).insertBefore("#gbox_"+a).show();b(this).jqGrid("clearBeforeUnload");b("#gbox_"+a).remove()}})},setGridState:function(a){return this.each(function(){this.grid&&("hidden"===a?(b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+b.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&b(this.p.pager).slideUp("fast"),this.p.toppager&&b(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&b(this.grid.ubDiv).slideUp("fast"),b(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+b.jgrid.jqID(this.p.id)).slideUp("fast"),b(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===a&&(b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+b.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&b(this.p.pager).slideDown("fast"),this.p.toppager&&b(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&b(this.grid.ubDiv).slideDown("fast"),b(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+b.jgrid.jqID(this.p.id)).slideDown("fast"),b(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(a){a=b.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},b.jgrid.search,a||{});return this.each(function(){var l=this;if(!this.ftoolbar){var j=function(){var z={},x=0,w,s,y={},o;b.each(l.p.colModel,function(){var d=b("#gs_"+b.jgrid.jqID(this.name),!0===this.frozen&&!0===l.p.frozenColumns?l.grid.fhDiv:l.grid.hDiv);s=this.index||this.name;o=a.searchOperators?d.parent().prev().children("a").attr("soper")||a.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":a.defaultSearch;if((w="custom"===this.stype&&b.isFunction(this.searchoptions.custom_value)&&0<d.length&&"SPAN"===d[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(l,d.children(".customelement:first"),"get"):d.val())||"nu"===o||"nn"===o){z[s]=w,y[s]=o,x++}else{try{delete l.p.postData[s]}catch(e){}}});var u=0<x?!0:!1;if(!0===a.stringResult||"local"===l.p.datatype){var t='{"groupOp":"'+a.groupOp+'","rules":[',p=0;b.each(z,function(e,d){0<p&&(t+=",");t+='{"field":"'+e+'",';t+='"op":"'+y[e]+'",';t+='"data":"'+(d+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';p++});t+="]}";b.extend(l.p.postData,{filters:t});b.each(["searchField","searchString","searchOper"],function(e,d){l.p.postData.hasOwnProperty(d)&&delete l.p.postData[d]})}else{b.extend(l.p.postData,z)}var c;l.p.searchurl&&(c=l.p.url,b(l).jqGrid("setGridParam",{url:l.p.searchurl}));var v="stop"===b(l).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!v&&b.isFunction(a.beforeSearch)&&(v=a.beforeSearch.call(l));v||b(l).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]);c&&b(l).jqGrid("setGridParam",{url:c});b(l).triggerHandler("jqGridToolbarAfterSearch");b.isFunction(a.afterSearch)&&a.afterSearch.call(l)},g=function(t,r,n){b("#sopt_menu").remove();r=parseInt(r,10);n=parseInt(n,10)+18;r='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+(b(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+r+"px;top:"+n+'px;">';n=b(t).attr("soper");var d,m=[],o,s=0,c=b(t).attr("colname");for(d=l.p.colModel.length;s<d&&l.p.colModel[s].name!==c;){s++}s=l.p.colModel[s];c=b.extend({},s.searchoptions);c.sopt||(c.sopt=[],c.sopt[0]="select"===s.stype?"eq":a.defaultSearch);b.each(a.odata,function(){m.push(this.oper)});for(s=0;s<c.sopt.length;s++){o=b.inArray(c.sopt[s],m),-1!==o&&(d=n===a.odata[o].oper?"ui-state-highlight":"",r+='<li class="ui-menu-item '+d+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+a.odata[o].oper+'" oper="'+a.operands[a.odata[o].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+a.operands[a.odata[o].oper]+"</td><td>"+a.odata[o].text+"</td></tr></table></a></li>")}r+="</ul>";b("body").append(r);b("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");b("#sopt_menu > li > a").hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).click(function(h){h=b(this).attr("value");var e=b(this).attr("oper");b(l).triggerHandler("jqGridToolbarSelectOper",[h,e,t]);b("#sopt_menu").hide();b(t).text(e).attr("soper",h);!0===a.autosearch&&(e=b(t).parent().next().children()[0],(b(e).val()||"nu"===h||"nn"===h)&&j())})},f=b("<tr class='ui-search-toolbar' role='rowheader'></tr>"),i;b.each(l.p.colModel,function(z){var B=this,A,o;o="";var D="=",d,e=b("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+l.p.direction+"'></th>"),s=b("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),k=b("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear'></td></tr></table>");!0===this.hidden&&b(e).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");A=b.extend({},this.searchoptions||{});if(this.search){if(a.searchOperators){o=A.sopt?A.sopt[0]:"select"===B.stype?"eq":a.defaultSearch;for(d=0;d<a.odata.length;d++){if(a.odata[d].oper===o){D=a.operands[o]||"";break}}o="<a title='"+(null!=A.searchtitle?A.searchtitle:a.operandTitle)+"' style='padding-right: 0.5em;' soper='"+o+"' class='soptclass' colname='"+this.name+"'>"+D+"</a>"}b("td:eq(0)",k).attr("colindex",z).append(o);void 0===A.clearSearch&&(A.clearSearch=!0);A.clearSearch?(o=a.resetTitle||"Clear Search Value",b("td:eq(2)",k).append("<a title='"+o+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+a.resetIcon+"</a>")):b("td:eq(2)",k).hide();switch(this.stype){case"select":if(o=this.surl||A.dataUrl){b(s).append(k),b.ajax(b.extend({url:o,dataType:"html",success:function(h){void 0!==A.buildSelect?(h=A.buildSelect(h))&&b("td:eq(1)",k).append(h):b("td:eq(1)",k).append(h);void 0!==A.defaultValue&&b("select",s).val(A.defaultValue);b("select",s).attr({name:B.index||B.name,id:"gs_"+B.name});A.attr&&b("select",s).attr(A.attr);b("select",s).css({width:"100%"});b.jgrid.bindEv.call(l,b("select",s)[0],A);!0===a.autosearch&&b("select",s).change(function(){j();return !1});h=null}},b.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{}))}else{var c,E,G;B.searchoptions?(c=void 0===B.searchoptions.value?"":B.searchoptions.value,E=void 0===B.searchoptions.separator?":":B.searchoptions.separator,G=void 0===B.searchoptions.delimiter?";":B.searchoptions.delimiter):B.editoptions&&(c=void 0===B.editoptions.value?"":B.editoptions.value,E=void 0===B.editoptions.separator?":":B.editoptions.separator,G=void 0===B.editoptions.delimiter?";":B.editoptions.delimiter);if(c){var H=document.createElement("select");H.style.width="100%";b(H).attr({name:B.index||B.name,id:"gs_"+B.name});var F;if("string"===typeof c){for(o=c.split(G),F=0;F<o.length;F++){c=o[F].split(E),G=document.createElement("option"),G.value=c[0],G.innerHTML=c[1],H.appendChild(G)}}else{if("object"===typeof c){for(F in c){c.hasOwnProperty(F)&&(G=document.createElement("option"),G.value=F,G.innerHTML=c[F],H.appendChild(G))}}}void 0!==A.defaultValue&&b(H).val(A.defaultValue);A.attr&&b(H).attr(A.attr);b(s).append(k);b.jgrid.bindEv.call(l,H,A);b("td:eq(1)",k).append(H);!0===a.autosearch&&b(H).change(function(){j();return !1})}}break;case"text":E=void 0!==A.defaultValue?A.defaultValue:"";b("td:eq(1)",k).append("<input type='text' style='width:100%;padding:0px;' name='"+(B.index||B.name)+"' id='gs_"+B.name+"' value='"+E+"'/>");b(s).append(k);A.attr&&b("input",s).attr(A.attr);b.jgrid.bindEv.call(l,b("input",s)[0],A);!0===a.autosearch&&(a.searchOnEnter?b("input",s).keypress(function(h){return 13===(h.charCode||h.keyCode||0)?(j(),!1):this}):b("input",s).keydown(function(h){switch(h.which){case 13:return !1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:i&&clearTimeout(i),i=setTimeout(function(){j()},500)}}));break;case"custom":b("td:eq(1)",k).append("<span style='width:95%;padding:0px;' name='"+(B.index||B.name)+"' id='gs_"+B.name+"'/>");b(s).append(k);try{if(b.isFunction(A.custom_element)){if(H=A.custom_element.call(l,void 0!==A.defaultValue?A.defaultValue:"",A)){H=b(H).addClass("customelement"),b(s).find(">span").append(H)}else{throw"e2"}}else{throw"e1"}}catch(C){"e1"===C&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===C?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,"string"===typeof C?C:C.message,b.jgrid.edit.bClose)}}}b(e).append(s);b(f).append(e);a.searchOperators||b("td:eq(0)",k).hide()});b("table thead",l.grid.hDiv).append(f);a.searchOperators&&(b(".soptclass",f).click(function(d){var e=b(this).offset();g(this,e.left,e.top);d.stopPropagation()}),b("body").on("click",function(c){"soptclass"!==c.target.className&&b("#sopt_menu").hide()}));b(".clearsearchclass",f).click(function(h){h=b(this).parents("tr:first");var d=parseInt(b("td.ui-search-oper",h).attr("colindex"),10),c=b.extend({},l.p.colModel[d].searchoptions||{}),c=c.defaultValue?c.defaultValue:"";"select"===l.p.colModel[d].stype?c?b("td.ui-search-input select",h).val(c):b("td.ui-search-input select",h)[0].selectedIndex=0:b("td.ui-search-input input",h).val(c);!0===a.autosearch&&j()});this.ftoolbar=!0;this.triggerToolbar=j;this.clearToolbar=function(v){var t={},s=0,u;v="boolean"!==typeof v?!0:v;b.each(l.p.colModel,function(){var e,w=b("#gs_"+b.jgrid.jqID(this.name),!0===this.frozen&&!0===l.p.frozenColumns?l.grid.fhDiv:l.grid.hDiv);this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(e=this.searchoptions.defaultValue);u=this.index||this.name;switch(this.stype){case"select":w.find("option").each(function(d){0===d&&(this.selected=!0);if(b(this).val()===e){return this.selected=!0,!1}});if(void 0!==e){t[u]=e,s++}else{try{delete l.p.postData[u]}catch(p){}}break;case"text":w.val(e||"");if(void 0!==e){t[u]=e,s++}else{try{delete l.p.postData[u]}catch(n){}}break;case"custom":b.isFunction(this.searchoptions.custom_value)&&0<w.length&&"SPAN"===w[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(l,w.children(".customelement:first"),"set",e||"")}});var q=0<s?!0:!1;l.p.resetsearch=!0;if(!0===a.stringResult||"local"===l.p.datatype){var r='{"groupOp":"'+a.groupOp+'","rules":[',c=0;b.each(t,function(e,d){0<c&&(r+=",");r+='{"field":"'+e+'",';r+='"op":"eq",';r+='"data":"'+(d+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';c++});r+="]}";b.extend(l.p.postData,{filters:r});b.each(["searchField","searchString","searchOper"],function(e,d){l.p.postData.hasOwnProperty(d)&&delete l.p.postData[d]})}else{b.extend(l.p.postData,t)}var o;l.p.searchurl&&(o=l.p.url,b(l).jqGrid("setGridParam",{url:l.p.searchurl}));var m="stop"===b(l).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!m&&b.isFunction(a.beforeClear)&&(m=a.beforeClear.call(l));m||v&&b(l).jqGrid("setGridParam",{search:q}).trigger("reloadGrid",[{page:1}]);o&&b(l).jqGrid("setGridParam",{url:o});b(l).triggerHandler("jqGridToolbarAfterClear");b.isFunction(a.afterClear)&&a.afterClear()};this.toggleToolbar=function(){var c=b("tr.ui-search-toolbar",l.grid.hDiv),e=!0===l.p.frozenColumns?b("tr.ui-search-toolbar",l.grid.fhDiv):!1;"none"===c.css("display")?(c.show(),e&&e.show()):(c.hide(),e&&e.hide())}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,b(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(a){void 0===a&&(a=!0);return this.each(function(){var r,q,l,j,p,t;q=this.grid;var o=b("table.ui-jqgrid-htable thead",q.hDiv),n=this.p.colModel;if(q){b(this).unbind(".setGroupHeaders");r=b("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");j=q.headers;q=0;for(l=j.length;q<l;q++){p=n[q].hidden?"none":"";p=b(j[q].el).width(j[q].width).css("display",p);try{p.removeAttr("rowSpan")}catch(i){p.attr("rowSpan",1)}r.append(p);t=p.children("span.ui-jqgrid-resize");0<t.length&&(t[0].style.height="");p.children("div")[0].style.top=""}b(o).children("tr.ui-jqgrid-labels").remove();b(o).prepend(r);!0===a&&b(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(a){a=b.extend({useColSpanStyle:!1,groupHeaders:[]},a||{});return this.each(function(){this.p.groupHeader=a;var E,D,z=0,y,C,H,B,A,u=this.p.colModel,F=u.length,j=this.grid.headers,o=b("table.ui-jqgrid-htable",this.grid.hDiv),v=o.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");y=o.children("thead");var t=o.find(".jqg-first-row-header");void 0===t[0]?t=b("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):t.empty();var i,G=function(f,e){var h=e.length,g;for(g=0;g<h;g++){if(e[g].startColumnName===f){return g}}return -1};b(this).prepend(y);y=b("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(E=0;E<F;E++){if(H=j[E].el,B=b(H),D=u[E],C={height:"0px",width:j[E].width+"px",display:D.hidden?"none":""},b("<th>",{role:"gridcell"}).css(C).addClass("ui-first-th-"+this.p.direction).appendTo(t),H.style.width="",C=G(D.name,a.groupHeaders),0<=C){C=a.groupHeaders[C];z=C.numberOfColumns;A=C.titleText;for(C=D=0;C<z&&E+C<F;C++){u[E+C].hidden||D++}C=b("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0 none"}).html(A);0<D&&C.attr("colspan",String(D));this.p.headertitles&&C.attr("title",C.text());0===D&&C.hide();B.before(C);y.append(H);z-=1}else{0===z?a.useColSpanStyle?B.attr("rowspan","2"):(b("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:D.hidden?"none":"","border-top":"0 none"}).insertBefore(B),y.append(H)):(y.append(H),z--)}}u=b(this).children("thead");u.prepend(t);y.insertAfter(v);o.append(u);a.useColSpanStyle&&(o.find("span.ui-jqgrid-resize").each(function(){var c=b(this).parent();c.is(":visible")&&(this.style.cssText="height: "+c.height()+"px !important; cursor: col-resize;")}),o.find("div.ui-jqgrid-sortable").each(function(){var d=b(this),e=d.parent();e.is(":visible")&&e.is(":has(span.ui-jqgrid-resize)")&&d.css("top",(e.height()-d.outerHeight())/2+"px")}));i=u.find("tr.jqg-first-row-header");b(this).bind("jqGridResizeStop.setGroupHeaders",function(e,d,f){i.find("th").eq(f).width(d)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var r=this,q=r.p.colModel,p=0,j=q.length,i=-1,o=!1;if(!0!==r.p.subGrid&&!0!==r.p.treeGrid&&!0!==r.p.cellEdit&&!r.p.sortable&&!r.p.scroll){r.p.rownumbers&&p++;for(r.p.multiselect&&p++;p<j;){if(!0===q[p].frozen){o=!0,i=p}else{break}p++}if(0<=i&&o){q=r.p.caption?b(r.grid.cDiv).outerHeight():0;p=b(".ui-jqgrid-htable","#gview_"+b.jgrid.jqID(r.p.id)).height();r.p.toppager&&(q+=b(r.grid.topDiv).outerHeight());!0===r.p.toolbar[0]&&"bottom"!==r.p.toolbar[1]&&(q+=b(r.grid.uDiv).outerHeight());r.grid.fhDiv=b('<div style="position:absolute;left:0px;top:'+q+"px;height:"+p+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');r.grid.fbDiv=b('<div style="position:absolute;left:0px;top:'+(parseInt(q,10)+parseInt(p,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');b("#gview_"+b.jgrid.jqID(r.p.id)).append(r.grid.fhDiv);q=b(".ui-jqgrid-htable","#gview_"+b.jgrid.jqID(r.p.id)).clone(!0);if(r.p.groupHeader){b("tr.jqg-first-row-header, tr.jqg-third-row-header",q).each(function(){b("th:gt("+i+")",this).remove()});var t=-1,n=-1,l,a;b("tr.jqg-second-row-header th",q).each(function(){l=parseInt(b(this).attr("colspan"),10);if(a=parseInt(b(this).attr("rowspan"),10)){t++,n++}l&&(t+=l,n++);if(t===i){return !1}});t!==i&&(n=i);b("tr.jqg-second-row-header",q).each(function(){b("th:gt("+n+")",this).remove()})}else{b("tr",q).each(function(){b("th:gt("+i+")",this).remove()})}b(q).width(1);b(r.grid.fhDiv).append(q).mousemove(function(c){if(r.grid.resizing){return r.grid.dragMove(c),!1}});b(r).bind("jqGridResizeStop.setFrozenColumns",function(h,g,f){h=b(".ui-jqgrid-htable",r.grid.fhDiv);b("th:eq("+f+")",h).width(g);h=b(".ui-jqgrid-btable",r.grid.fbDiv);b("tr:first td:eq("+f+")",h).width(g)});b(r).bind("jqGridSortCol.setFrozenColumns",function(h,g,f){h=b("tr.ui-jqgrid-labels:last th:eq("+r.p.lastsort+")",r.grid.fhDiv);g=b("tr.ui-jqgrid-labels:last th:eq("+f+")",r.grid.fhDiv);b("span.ui-grid-ico-sort",h).addClass("ui-state-disabled");b(h).attr("aria-selected","false");b("span.ui-icon-"+r.p.sortorder,g).removeClass("ui-state-disabled");b(g).attr("aria-selected","true");r.p.viewsortcols[0]||r.p.lastsort===f||(b("span.s-ico",h).hide(),b("span.s-ico",g).show())});b("#gview_"+b.jgrid.jqID(r.p.id)).append(r.grid.fbDiv);b(r.grid.bDiv).scroll(function(){b(r.grid.fbDiv).scrollTop(b(this).scrollTop())});!0===r.p.hoverrows&&b("#"+b.jgrid.jqID(r.p.id)).unbind("mouseover").unbind("mouseout");b(r).bind("jqGridAfterGridComplete.setFrozenColumns",function(){b("#"+b.jgrid.jqID(r.p.id)+"_frozen").remove();b(r.grid.fbDiv).height(b(r.grid.bDiv).height()-16);var d=b("#"+b.jgrid.jqID(r.p.id)).clone(!0);b("tr[role=row]",d).each(function(){b("td[role=gridcell]:gt("+i+")",this).remove()});b(d).width(1).attr("id",r.p.id+"_frozen");b(r.grid.fbDiv).append(d);!0===r.p.hoverrows&&(b("tr.jqgrow",d).hover(function(){b(this).addClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(r.p.id)).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(r.p.id)).removeClass("ui-state-hover")}),b("tr.jqgrow","#"+b.jgrid.jqID(r.p.id)).hover(function(){b(this).addClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(r.p.id)+"_frozen").addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover");b("#"+b.jgrid.jqID(this.id),"#"+b.jgrid.jqID(r.p.id)+"_frozen").removeClass("ui-state-hover")}));d=null});r.grid.hDiv.loading||b(r).triggerHandler("jqGridAfterGridComplete");r.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){b(this.grid.fhDiv).remove();b(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;b(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var a;b("#"+b.jgrid.jqID(this.p.id)).bind("mouseover",function(d){a=b(d.target).closest("tr.jqgrow");"ui-subgrid"!==b(a).attr("class")&&b(a).addClass("ui-state-hover")}).bind("mouseout",function(d){a=b(d.target).closest("tr.jqgrow");b(a).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);(function(b){b.extend(b.jgrid,{showModal:function(c){c.w.show()},closeModal:function(c){c.w.hide().attr("aria-hidden","true");c.o&&c.o.remove()},hideModal:function(f,a){a=b.extend({jqm:!0,gb:""},a||{});if(a.onClose){var h=a.gb&&"string"===typeof a.gb&&"#gbox_"===a.gb.substr(0,6)?a.onClose.call(b("#"+a.gb.substr(6))[0],f):a.onClose(f);if("boolean"===typeof h&&!h){return}}if(b.fn.jqm&&!0===a.jqm){b(f).attr("aria-hidden","true").jqmHide()}else{if(""!==a.gb){try{b(".jqgrid-overlay:first",a.gb).hide()}catch(e){}}b(f).hide().attr("aria-hidden","true")}},findPos:function(e){var d=0,f=0;if(e.offsetParent){do{d+=e.offsetLeft,f+=e.offsetTop}while(e=e.offsetParent)}return[d,f]},createModal:function(A,C,B,x,z,w,y){B=b.extend(!0,{},b.jgrid.jqModal||{},B);var v=document.createElement("div"),u,t=this;y=b.extend({},y||{});u="rtl"===b(B.gbox).attr("dir")?!0:!1;v.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";v.id=A.themodal;var o=document.createElement("div");o.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";o.id=A.modalhead;b(o).append("<span class='ui-jqdialog-title'>"+B.caption+"</span>");var i=b("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");b(o).append(i);u?(v.dir="rtl",b(".ui-jqdialog-title",o).css("float","right"),b(".ui-jqdialog-titlebar-close",o).css("left","0.3em")):(v.dir="ltr",b(".ui-jqdialog-title",o).css("float","left"),b(".ui-jqdialog-titlebar-close",o).css("right","0.3em"));var j=document.createElement("div");b(j).addClass("ui-jqdialog-content ui-widget-content").attr("id",A.modalcontent);b(j).append(C);v.appendChild(j);b(v).prepend(o);!0===w?b("body").append(v):"string"===typeof w?b(w).append(v):b(v).insertBefore(x);b(v).css(y);void 0===B.jqModal&&(B.jqModal=!0);C={};if(b.fn.jqm&&!0===B.jqModal){0===B.left&&0===B.top&&B.overlay&&(y=[],y=b.jgrid.findPos(z),B.left=y[0]+4,B.top=y[1]+4),C.top=B.top+"px",C.left=B.left}else{if(0!==B.left||0!==B.top){C.left=B.left,C.top=B.top+"px"}}b("a.ui-jqdialog-titlebar-close",o).click(function(){var c=b("#"+b.jgrid.jqID(A.themodal)).data("onClose")||B.onClose,d=b("#"+b.jgrid.jqID(A.themodal)).data("gbox")||B.gbox;t.hideModal("#"+b.jgrid.jqID(A.themodal),{gb:d,jqm:B.jqModal,onClose:c});return !1});0!==B.width&&B.width||(B.width=300);0!==B.height&&B.height||(B.height=200);B.zIndex||(x=b(x).parents("*[role=dialog]").filter(":first").css("z-index"),B.zIndex=x?parseInt(x,10)+2:950);x=0;u&&C.left&&!w&&(x=b(B.gbox).width()-(isNaN(B.width)?0:parseInt(B.width,10))-8,C.left=parseInt(C.left,10)+parseInt(x,10));C.left&&(C.left+="px");b(v).css(b.extend({width:isNaN(B.width)?"auto":B.width+"px",height:isNaN(B.height)?"auto":B.height+"px",zIndex:B.zIndex,overflow:"hidden"},C)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":A.modalhead,"aria-hidden":"true"});void 0===B.drag&&(B.drag=!0);void 0===B.resize&&(B.resize=!0);if(B.drag){if(b(o).css("cursor","move"),b.fn.jqDrag){b(v).jqDrag(o)}else{try{b(v).draggable({handle:b("#"+b.jgrid.jqID(o.id))})}catch(a){}}}if(B.resize){if(b.fn.jqResize){b(v).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),b("#"+b.jgrid.jqID(A.themodal)).jqResize(".jqResize",A.scrollelm?"#"+b.jgrid.jqID(A.scrollelm):!1)}else{try{b(v).resizable({handles:"se, sw",alsoResize:A.scrollelm?"#"+b.jgrid.jqID(A.scrollelm):!1})}catch(D){}}}!0===B.closeOnEscape&&b(v).keydown(function(c){27==c.which&&(c=b("#"+b.jgrid.jqID(A.themodal)).data("onClose")||B.onClose,t.hideModal("#"+b.jgrid.jqID(A.themodal),{gb:B.gbox,jqm:B.jqModal,onClose:c}))})},viewModal:function(e,a){a=b.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:b.jgrid.showModal,onHide:b.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},a||{});if(b.fn.jqm&&!0===a.jqm){a.jqM?b(e).attr("aria-hidden","false").jqm(a).jqmShow():b(e).attr("aria-hidden","false").jqmShow()}else{""!==a.gbox&&(b(".jqgrid-overlay:first",a.gbox).show(),b(e).data("gbox",a.gbox));b(e).show().attr("aria-hidden","false");try{b(":input:visible",e)[0].focus()}catch(f){}}},info_dialog:function(p,r,q,m){var o={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1000,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};b.extend(!0,o,b.jgrid.jqModal||{},{caption:"<b>"+p+"</b>"},m||{});var j=o.jqModal,n=this;b.fn.jqm&&!j&&(j=!1);p="";if(0<o.buttons.length){for(m=0;m<o.buttons.length;m++){void 0===o.buttons[m].id&&(o.buttons[m].id="info_button_"+m),p+="<a id='"+o.buttons[m].id+"' class='fm-button ui-state-default ui-corner-all'>"+o.buttons[m].text+"</a>"}}m=isNaN(o.dataheight)?o.dataheight:o.dataheight+"px";r="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+m+";"+("text-align:"+o.align+";")+"'>"+r+"</div>");r+=q?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+q+"</a>"+p+"</div>":""!==p?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+o.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+p+"</div>":"";r+="</div>";try{"false"===b("#info_dialog").attr("aria-hidden")&&b.jgrid.hideModal("#info_dialog",{jqm:j}),b("#info_dialog").remove()}catch(i){}b.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},r,o,"","",!0);p&&b.each(o.buttons,function(c){b("#"+b.jgrid.jqID(this.id),"#info_id").bind("click",function(){o.buttons[c].onClick.call(b("#info_dialog"));return !1})});b("#closedialog","#info_id").click(function(){n.hideModal("#info_dialog",{jqm:j,onClose:b("#info_dialog").data("onClose")||o.onClose,gb:b("#info_dialog").data("gbox")||o.gbox});return !1});b(".fm-button","#info_dialog").hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});b.isFunction(o.beforeOpen)&&o.beforeOpen();b.jgrid.viewModal("#info_dialog",{onHide:function(c){c.w.hide().remove();c.o&&c.o.remove()},modal:o.modal,jqm:j});b.isFunction(o.afterOpen)&&o.afterOpen();try{b("#info_dialog").focus()}catch(a){}},bindEv:function(c,a){b.isFunction(a.dataInit)&&a.dataInit.call(this,c,a);a.dataEvents&&b.each(a.dataEvents,function(){void 0!==this.data?b(c).bind(this.type,this.data,this.fn):b(c).bind(this.type,this.fn)})},createEl:function(z,B,A,w,y){function v(f,h,k){var g="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value".split(" ");void 0!==k&&b.isArray(k)&&b.merge(g,k);b.each(h,function(e,l){-1===b.inArray(e,g)&&b(f).attr(e,l)});h.hasOwnProperty("id")||b(f).attr("id",b.jgrid.randId())}var x="",u=this;switch(z){case"textarea":x=document.createElement("textarea");w?B.cols||b(x).css({width:"98%"}):B.cols||(B.cols=20);B.rows||(B.rows=2);if("&nbsp;"===A||"&#160;"===A||1===A.length&&160===A.charCodeAt(0)){A=""}x.value=A;v(x,B);b(x).attr({role:"textbox",multiline:"true"});break;case"checkbox":x=document.createElement("input");x.type="checkbox";B.value?(z=B.value.split(":"),A===z[0]&&(x.checked=!0,x.defaultChecked=!0),x.value=z[0],b(x).attr("offval",z[1])):(z=(A+"").toLowerCase(),0>z.search(/(false|f|0|no|n|off|undefined)/i)&&""!==z?(x.checked=!0,x.defaultChecked=!0,x.value=A):x.value="on",b(x).attr("offval","off"));v(x,B,["value"]);b(x).attr("role","checkbox");break;case"select":x=document.createElement("select");x.setAttribute("role","select");w=[];!0===B.multiple?(z=!0,x.multiple="multiple",b(x).attr("aria-multiselectable","true")):z=!1;if(void 0!==B.dataUrl){z=B.name?String(B.id).substring(0,String(B.id).length-String(B.name).length-1):String(B.id);var t=B.postData||y.postData;u.p&&u.p.idPrefix&&(z=b.jgrid.stripPref(u.p.idPrefix,z));b.ajax(b.extend({url:b.isFunction(B.dataUrl)?B.dataUrl.call(u,z,A,String(B.name)):B.dataUrl,type:"GET",dataType:"html",data:b.isFunction(t)?t.call(u,z,A,String(B.name)):t,context:{elem:x,options:B,vl:A},success:function(h){var n=[],p=this.elem,m=this.vl,l=b.extend({},this.options),k=!0===l.multiple;h=b.isFunction(l.buildSelect)?l.buildSelect.call(u,h):h;"string"===typeof h&&(h=b(b.trim(h)).html());h&&(b(p).append(h),v(p,l,t?["postData"]:void 0),void 0===l.size&&(l.size=k?3:1),k?(n=m.split(","),n=b.map(n,function(c){return b.trim(c)})):n[0]=b.trim(m),setTimeout(function(){b("option",p).each(function(c){0===c&&p.multiple&&(this.selected=!1);b(this).attr("role","option");if(-1<b.inArray(b.trim(b(this).text()),n)||-1<b.inArray(b.trim(b(this).val()),n)){this.selected="selected"}})},0))}},y||{}))}else{if(B.value){var s;void 0===B.size&&(B.size=z?3:1);z&&(w=A.split(","),w=b.map(w,function(c){return b.trim(c)}));"function"===typeof B.value&&(B.value=B.value());var o,i,j=void 0===B.separator?":":B.separator;y=void 0===B.delimiter?";":B.delimiter;if("string"===typeof B.value){for(o=B.value.split(y),s=0;s<o.length;s++){i=o[s].split(j),2<i.length&&(i[1]=b.map(i,function(d,c){if(0<c){return d}}).join(j)),y=document.createElement("option"),y.setAttribute("role","option"),y.value=i[0],y.innerHTML=i[1],x.appendChild(y),z||b.trim(i[0])!==b.trim(A)&&b.trim(i[1])!==b.trim(A)||(y.selected="selected"),z&&(-1<b.inArray(b.trim(i[1]),w)||-1<b.inArray(b.trim(i[0]),w))&&(y.selected="selected")}}else{if("object"===typeof B.value){for(s in j=B.value,j){j.hasOwnProperty(s)&&(y=document.createElement("option"),y.setAttribute("role","option"),y.value=s,y.innerHTML=j[s],x.appendChild(y),z||b.trim(s)!==b.trim(A)&&b.trim(j[s])!==b.trim(A)||(y.selected="selected"),z&&(-1<b.inArray(b.trim(j[s]),w)||-1<b.inArray(b.trim(s),w))&&(y.selected="selected"))}}}v(x,B,["value"])}}break;case"text":case"password":case"button":s="button"===z?"button":"textbox";x=document.createElement("input");x.type=z;x.value=A;v(x,B);"button"!==z&&(w?B.size||b(x).css({width:"98%"}):B.size||(B.size=20));b(x).attr("role",s);break;case"image":case"file":x=document.createElement("input");x.type=z;v(x,B);break;case"custom":x=document.createElement("span");try{if(b.isFunction(B.custom_element)){if(j=B.custom_element.call(u,A,B)){j=b(j).addClass("customelement").attr({id:B.id,name:B.name}),b(x).empty().append(j)}else{throw"e2"}}else{throw"e1"}}catch(a){"e1"===a&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===a?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_element' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,"string"===typeof a?a:a.message,b.jgrid.edit.bClose)}}return x},checkDate:function(r,q){var p={},m;r=r.toLowerCase();m=-1!==r.indexOf("/")?"/":-1!==r.indexOf("-")?"-":-1!==r.indexOf(".")?".":"/";r=r.split(m);q=q.split(m);if(3!==q.length){return !1}var o=-1,j,n=m=-1,i;for(i=0;i<r.length;i++){j=isNaN(q[i])?0:parseInt(q[i],10),p[r[i]]=j,j=r[i],-1!==j.indexOf("y")&&(o=i),-1!==j.indexOf("m")&&(n=i),-1!==j.indexOf("d")&&(m=i)}j="y"===r[o]||"yyyy"===r[o]?4:"yy"===r[o]?2:-1;i=[0,31,29,31,30,31,30,31,31,30,31,30,31];var d;if(-1===o){return !1}d=p[r[o]].toString();2===j&&1===d.length&&(j=1);if(d.length!==j||0===p[r[o]]&&"00"!==q[o]||-1===n){return !1}d=p[r[n]].toString();if(1>d.length||1>p[r[n]]||12<p[r[n]]||-1===m){return !1}d=p[r[m]].toString();if(!(j=1>d.length)&&!(j=1>p[r[m]])&&!(j=31<p[r[m]])){if(j=2===p[r[n]]){o=p[r[o]],j=p[r[m]]>(0!==o%4||0===o%100&&0!==o%400?28:29)}j=j||p[r[m]]>i[p[r[n]]]}return j?!1:!0},isEmpty:function(c){return c.match(/^\s+$/)||""===c?!0:!1},checkTime:function(c){var a=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!b.jgrid.isEmpty(c)){if(c=c.match(a)){if(c[3]){if(1>c[1]||12<c[1]){return !1}}else{if(23<c[1]){return !1}}if(59<c[2]){return !1}}else{return !1}}return !0},checkValues:function(m,a,n,j){var l,i,k;k=this.p.colModel;if(void 0===n){if("string"===typeof a){for(n=0,j=k.length;n<j;n++){if(k[n].name===a){l=k[n].editrules;a=n;null!=k[n].formoptions&&(i=k[n].formoptions.label);break}}}else{0<=a&&(l=k[a].editrules)}}else{l=n,i=void 0===j?"_":j}if(l){i||(i=null!=this.p.colNames?this.p.colNames[a]:k[a].label);if(!0===l.required&&b.jgrid.isEmpty(m)){return[!1,i+": "+b.jgrid.edit.msg.required,""]}n=!1===l.required?!1:!0;if(!0===l.number&&(!1!==n||!b.jgrid.isEmpty(m))&&isNaN(m)){return[!1,i+": "+b.jgrid.edit.msg.number,""]}if(void 0!==l.minValue&&!isNaN(l.minValue)&&parseFloat(m)<parseFloat(l.minValue)){return[!1,i+": "+b.jgrid.edit.msg.minValue+" "+l.minValue,""]}if(void 0!==l.maxValue&&!isNaN(l.maxValue)&&parseFloat(m)>parseFloat(l.maxValue)){return[!1,i+": "+b.jgrid.edit.msg.maxValue+" "+l.maxValue,""]}if(!(!0!==l.email||!1===n&&b.jgrid.isEmpty(m)||(j=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,j.test(m)))){return[!1,i+": "+b.jgrid.edit.msg.email,""]}if(!(!0!==l.integer||!1===n&&b.jgrid.isEmpty(m)||!isNaN(m)&&0===m%1&&-1===m.indexOf("."))){return[!1,i+": "+b.jgrid.edit.msg.integer,""]}if(!(!0!==l.date||!1===n&&b.jgrid.isEmpty(m)||(k[a].formatoptions&&k[a].formatoptions.newformat?(k=k[a].formatoptions.newformat,b.jgrid.formatter.date.masks.hasOwnProperty(k)&&(k=b.jgrid.formatter.date.masks[k])):k=k[a].datefmt||"Y-m-d",b.jgrid.checkDate(k,m)))){return[!1,i+": "+b.jgrid.edit.msg.date+" - "+k,""]}if(!0===l.time&&!(!1===n&&b.jgrid.isEmpty(m)||b.jgrid.checkTime(m))){return[!1,i+": "+b.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}if(!(!0!==l.url||!1===n&&b.jgrid.isEmpty(m)||(j=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,j.test(m)))){return[!1,i+": "+b.jgrid.edit.msg.url,""]}if(!0===l.custom&&(!1!==n||!b.jgrid.isEmpty(m))){return b.isFunction(l.custom_func)?(m=l.custom_func.call(this,m,i,a),b.isArray(m)?m:[!1,b.jgrid.edit.msg.customarray,""]):[!1,b.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})})(jQuery);(function(d){var c={};d.jgrid.extend({searchGrid:function(a){a=d.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},d.jgrid.search,a||{});return this.each(function(){function M(e){j=d(K).triggerHandler("jqGridFilterBeforeShow",[e]);void 0===j&&(j=!0);j&&d.isFunction(a.beforeShowSearch)&&(j=a.beforeShowSearch.call(K,e));j&&(d.jgrid.viewModal("#"+d.jgrid.jqID(A.themodal),{gbox:"#gbox_"+d.jgrid.jqID(H),jqm:a.jqModal,modal:a.modal,overlay:a.overlay,toTop:a.toTop}),d(K).triggerHandler("jqGridFilterAfterShow",[e]),d.isFunction(a.afterShowSearch)&&a.afterShowSearch.call(K,e))}var K=this;if(K.grid){var H="fbox_"+K.p.id,j=!0,o=!0,A={themodal:"searchmod"+H,modalhead:"searchhd"+H,modalcontent:"searchcnt"+H,scrollelm:H},B=K.p.postData[a.sFilter];"string"===typeof B&&(B=d.jgrid.parse(B));!0===a.recreateFilter&&d("#"+d.jgrid.jqID(A.themodal)).remove();if(void 0!==d("#"+d.jgrid.jqID(A.themodal))[0]){M(d("#fbox_"+d.jgrid.jqID(+K.p.id)))}else{var J=d("<div><div id='"+H+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+d.jgrid.jqID(K.p.id)),G="left",n="";"rtl"===K.p.direction&&(G="right",n=" style='text-align:left'",J.attr("dir","rtl"));var i=d.extend([],K.p.colModel),L="<a id='"+H+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+a.Find+"</a>",l="<a id='"+H+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+a.Reset+"</a>",I="",F="",E,C=!1,b=-1;a.showQuery&&(I="<a id='"+H+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");a.columns.length?(i=a.columns,b=0,E=i[0].index||i[0].name):d.each(i,function(f,e){e.label||(e.label=K.p.colNames[f]);if(!C){var h=void 0===e.search?!0:e.search,g=!0===e.hidden;if(e.searchoptions&&!0===e.searchoptions.searchhidden&&h||h&&!g){C=!0,E=e.index||e.name,b=f}}});if(!B&&E||!1===a.multipleSearch){var z="eq";0<=b&&i[b].searchoptions&&i[b].searchoptions.sopt?z=i[b].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(z=a.sopt[0]);B={groupOp:"AND",rules:[{field:E,op:z,data:""}]}}C=!1;a.tmplNames&&a.tmplNames.length&&(C=!0,F=a.tmplLabel,F+="<select class='ui-template'>",F+="<option value='default'>Default</option>",d.each(a.tmplNames,function(f,e){F+="<option value='"+f+"'>"+e+"</option>"}),F+="</select>");G="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+H+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+G+"'>"+l+F+"</td><td class='EditButton' "+n+">"+I+L+"</td></tr></tbody></table>";H=d.jgrid.jqID(H);d("#"+H).jqFilter({columns:i,filter:a.loadDefaults?B:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,operands:a.operands,ajaxSelectOptions:K.p.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(){this.p.showQuery&&d(".query",this).html(this.toUserFriendlyString());d.isFunction(a.afterChange)&&a.afterChange.call(K,d("#"+H),a)},direction:K.p.direction,id:K.p.id});J.append(G);C&&a.tmplFilters&&a.tmplFilters.length&&d(".ui-template",J).bind("change",function(){var e=d(this).val();"default"===e?d("#"+H).jqFilter("addFilter",B):d("#"+H).jqFilter("addFilter",a.tmplFilters[parseInt(e,10)]);return !1});!0===a.multipleGroup&&(a.multipleSearch=!0);d(K).triggerHandler("jqGridFilterInitialize",[d("#"+H)]);d.isFunction(a.onInitializeSearch)&&a.onInitializeSearch.call(K,d("#"+H));a.gbox="#gbox_"+H;a.layer?d.jgrid.createModal(A,J,a,"#gview_"+d.jgrid.jqID(K.p.id),d("#gbox_"+d.jgrid.jqID(K.p.id))[0],"#"+d.jgrid.jqID(a.layer),{position:"relative"}):d.jgrid.createModal(A,J,a,"#gview_"+d.jgrid.jqID(K.p.id),d("#gbox_"+d.jgrid.jqID(K.p.id))[0]);(a.searchOnEnter||a.closeOnEscape)&&d("#"+d.jgrid.jqID(A.themodal)).keydown(function(f){var e=d(f.target);if(a.searchOnEnter&&13===f.which&&!(e.hasClass("add-group")||e.hasClass("add-rule")||e.hasClass("delete-group")||e.hasClass("delete-rule")||e.hasClass("fm-button")&&e.is("[id$=_query]"))){return d("#"+H+"_search").click(),!1}if(a.closeOnEscape&&27===f.which){return d("#"+d.jgrid.jqID(A.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1}});I&&d("#"+H+"_query").bind("click",function(){d(".queryresult",J).toggle();return !1});void 0===a.stringResult&&(a.stringResult=a.multipleSearch);d("#"+H+"_search").bind("click",function(){var r=d("#"+H),p={},q,h;r.find(".input-elm:focus").change();h=r.jqFilter("filterData");if(a.errorcheck&&(r[0].hideError(),a.showQuery||r.jqFilter("toSQLString"),r[0].p.error)){return r[0].showError(),!1}if(a.stringResult){try{q=xmlJsonClass.toJson(h,"","",!1)}catch(m){try{q=JSON.stringify(h)}catch(e){}}"string"===typeof q&&(p[a.sFilter]=q,d.each([a.sField,a.sValue,a.sOper],function(){p[this]=""}))}else{a.multipleSearch?(p[a.sFilter]=h,d.each([a.sField,a.sValue,a.sOper],function(){p[this]=""})):(p[a.sField]=h.rules[0].field,p[a.sValue]=h.rules[0].data,p[a.sOper]=h.rules[0].op,p[a.sFilter]="")}K.p.search=!0;d.extend(K.p.postData,p);o=d(K).triggerHandler("jqGridFilterSearch");void 0===o&&(o=!0);o&&d.isFunction(a.onSearch)&&(o=a.onSearch.call(K,K.p.filters));!1!==o&&d(K).trigger("reloadGrid",[{page:1}]);a.closeAfterSearch&&d.jgrid.hideModal("#"+d.jgrid.jqID(A.themodal),{gb:"#gbox_"+d.jgrid.jqID(K.p.id),jqm:a.jqModal,onClose:a.onClose});return !1});d("#"+H+"_reset").bind("click",function(){var f={},e=d("#"+H);K.p.search=!1;K.p.resetsearch=!0;!1===a.multipleSearch?f[a.sField]=f[a.sValue]=f[a.sOper]="":f[a.sFilter]="";e[0].resetFilter();C&&d(".ui-template",J).val("default");d.extend(K.p.postData,f);o=d(K).triggerHandler("jqGridFilterReset");void 0===o&&(o=!0);o&&d.isFunction(a.onReset)&&(o=a.onReset.call(K));!1!==o&&d(K).trigger("reloadGrid",[{page:1}]);a.closeAfterReset&&d.jgrid.hideModal("#"+d.jgrid.jqID(A.themodal),{gb:"#gbox_"+d.jgrid.jqID(K.p.id),jqm:a.jqModal,onClose:a.onClose});return !1});M(d("#"+H));d(".fm-button:not(.ui-state-disabled)",J).hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")})}}})},editGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},d.jgrid.edit,b||{});c[d(this)[0].p.id]=b;return this.each(function(){function ar(){d(aj+" > tbody > tr > td > .FormElement").each(function(){var e=d(".customelement",this);if(e.length){var f=d(e[0]).attr("name");d.each(at.p.colModel,function(){if(this.name===f&&this.editoptions&&d.isFunction(this.editoptions.custom_value)){try{if(am[f]=this.editoptions.custom_value.call(at,d("#"+d.jgrid.jqID(f),aj),"get"),void 0===am[f]){throw"e1"}}catch(g){"e1"===g?d.jgrid.info_dialog(d.jgrid.errors.errcap,"function 'custom_value' "+d.jgrid.edit.msg.novalue,d.jgrid.edit.bClose):d.jgrid.info_dialog(d.jgrid.errors.errcap,g.message,d.jgrid.edit.bClose)}return !0}})}else{switch(d(this).get(0).type){case"checkbox":d(this).is(":checked")?am[this.name]=d(this).val():(e=d(this).attr("offval"),am[this.name]=e);break;case"select-one":am[this.name]=d("option:selected",this).val();break;case"select-multiple":am[this.name]=d(this).val();am[this.name]=am[this.name]?am[this.name].join(","):"";d("option:selected",this).each(function(g,h){d(h).text()});break;case"password":case"text":case"textarea":case"button":am[this.name]=d(this).val()}at.p.autoencode&&(am[this.name]=d.jgrid.htmlEncode(am[this.name]))}});return !0}function ao(H,F,x,E){var B,A,w,D=0,v,y,g,s=[],I=!1,G="",J;for(J=1;J<=E;J++){G+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>"}"_empty"!==H&&(I=d(F).jqGrid("getInd",H));d(F.p.colModel).each(function(l){B=this.name;y=(A=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==B&&"subgrid"!==B&&!0===this.editable&&"rn"!==B){if(!1===I){v=""}else{if(B===F.p.ExpandColumn&&!0===F.p.treeGrid){v=d("td[role='gridcell']:eq("+l+")",F.rows[I]).text()}else{try{v=d.unformat.call(F,d("td[role='gridcell']:eq("+l+")",F.rows[I]),{rowId:H,colModel:this},l)}catch(h){v=this.edittype&&"textarea"===this.edittype?d("td[role='gridcell']:eq("+l+")",F.rows[I]).text():d("td[role='gridcell']:eq("+l+")",F.rows[I]).html()}if(!v||"&nbsp;"===v||"&#160;"===v||1===v.length&&160===v.charCodeAt(0)){v=""}}}var m=d.extend({},this.editoptions||{},{id:B,name:B}),n=d.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),k=parseInt(n.rowpos,10)||D+1,f=parseInt(2*(parseInt(n.colpos,10)||1),10);"_empty"===H&&m.defaultValue&&(v=d.isFunction(m.defaultValue)?m.defaultValue.call(at):m.defaultValue);this.edittype||(this.edittype="text");at.p.autoencode&&(v=d.jgrid.htmlDecode(v));g=d.jgrid.createEl.call(at,this.edittype,m,v,!1,d.extend({},d.jgrid.ajaxOptions,F.p.ajaxSelectOptions||{}));if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData[B]=v}d(g).addClass("FormElement");-1<d.inArray(this.edittype,["text","textarea","password","select"])&&d(g).addClass("ui-widget-content ui-corner-all");w=d(x).find("tr[rowpos="+k+"]");if(n.rowabove){var e=d("<tr><td class='contentinfo' colspan='"+2*E+"'>"+n.rowcontent+"</td></tr>");d(x).append(e);e[0].rp=k}0===w.length&&(w=d("<tr "+y+" rowpos='"+k+"'></tr>").addClass("FormData").attr("id","tr_"+B),d(w).append(G),d(x).append(w),w[0].rp=k);d("td:eq("+(f-2)+")",w[0]).html(void 0===n.label?F.p.colNames[l]:n.label);d("td:eq("+(f-1)+")",w[0]).append(n.elmprefix).append(g).append(n.elmsuffix);"custom"===this.edittype&&d.isFunction(m.custom_value)&&m.custom_value.call(at,d("#"+B,"#"+ap),"set",v);d.jgrid.bindEv.call(at,g,m);s[D]=l;D++}});0<D&&(J=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*E-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+F.p.id+"_id' value='"+H+"'/></td></tr>"),J[0].rp=D+999,d(x).append(J),c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate)&&(c[at.p.id]._savedData[F.p.id+"_id"]=H);return s}function V(D,C,u){var A,x=0,B,w,s,y,p;if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData={},c[at.p.id]._savedData[C.p.id+"_id"]=D}var v=C.p.colModel;if("_empty"===D){d(v).each(function(){A=this.name;s=d.extend({},this.editoptions||{});(w=d("#"+d.jgrid.jqID(A),"#"+u))&&w.length&&null!==w[0]&&(y="","custom"===this.edittype&&d.isFunction(s.custom_value)?s.custom_value.call(at,d("#"+A,"#"+u),"set",y):s.defaultValue?(y=d.isFunction(s.defaultValue)?s.defaultValue.call(at):s.defaultValue,"checkbox"===w[0].type?(p=y.toLowerCase(),0>p.search(/(false|f|0|no|n|off|undefined)/i)&&""!==p?(w[0].checked=!0,w[0].defaultChecked=!0,w[0].value=y):(w[0].checked=!1,w[0].defaultChecked=!1)):w.val(y)):"checkbox"===w[0].type?(w[0].checked=!1,w[0].defaultChecked=!1,y=d(w).attr("offval")):w[0].type&&"select"===w[0].type.substr(0,6)?w[0].selectedIndex=0:w.val(y),!0===c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate)&&(c[at.p.id]._savedData[A]=y)}),d("#id_g","#"+u).val(D)}else{var E=d(C).jqGrid("getInd",D,!0);E&&(d('td[role="gridcell"]',E).each(function(e){A=v[e].name;if("cb"!==A&&"subgrid"!==A&&"rn"!==A&&!0===v[e].editable){if(A===C.p.ExpandColumn&&!0===C.p.treeGrid){B=d(this).text()}else{try{B=d.unformat.call(C,d(this),{rowId:D,colModel:v[e]},e)}catch(g){B="textarea"===v[e].edittype?d(this).text():d(this).html()}}at.p.autoencode&&(B=d.jgrid.htmlDecode(B));if(!0===c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){c[at.p.id]._savedData[A]=B}A=d.jgrid.jqID(A);switch(v[e].edittype){case"password":case"text":case"button":case"image":case"textarea":if("&nbsp;"===B||"&#160;"===B||1===B.length&&160===B.charCodeAt(0)){B=""}d("#"+A,"#"+u).val(B);break;case"select":var f=B.split(","),f=d.map(f,function(h){return d.trim(h)});d("#"+A+" option","#"+u).each(function(){v[e].editoptions.multiple||d.trim(B)!==d.trim(d(this).text())&&f[0]!==d.trim(d(this).text())&&f[0]!==d.trim(d(this).val())?v[e].editoptions.multiple?-1<d.inArray(d.trim(d(this).text()),f)||-1<d.inArray(d.trim(d(this).val()),f)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case"checkbox":B=String(B);if(v[e].editoptions&&v[e].editoptions.value){if(v[e].editoptions.value.split(":")[0]===B){d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0})}else{d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}}else{B=B.toLowerCase(),0>B.search(/(false|f|0|no|n|off|undefined)/i)&&""!==B?(d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]("checked",!0),d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]("defaultChecked",!0)):(d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]("checked",!1),d("#"+A,"#"+u)[at.p.useProp?"prop":"attr"]("defaultChecked",!1))}break;case"custom":try{if(v[e].editoptions&&d.isFunction(v[e].editoptions.custom_value)){v[e].editoptions.custom_value.call(at,d("#"+A,"#"+u),"set",B)}else{throw"e1"}}catch(k){"e1"===k?d.jgrid.info_dialog(d.jgrid.errors.errcap,"function 'custom_value' "+d.jgrid.edit.msg.nodefined,d.jgrid.edit.bClose):d.jgrid.info_dialog(d.jgrid.errors.errcap,k.message,d.jgrid.edit.bClose)}}x++}}),0<x&&d("#id_g",aj).val(D))}}function ab(){d.each(at.p.colModel,function(f,e){e.editoptions&&!0===e.editoptions.NullIfEmpty&&am.hasOwnProperty(e.name)&&""===am[e.name]&&(am[e.name]="null")})}function ad(){var x,p=[!0,"",""],w={},t=at.p.prmNames,v,q,g,y,A,l=d(at).triggerHandler("jqGridAddEditBeforeCheckValues",[d("#"+ap),ag]);l&&"object"===typeof l&&(am=l);d.isFunction(c[at.p.id].beforeCheckValues)&&(l=c[at.p.id].beforeCheckValues.call(at,am,d("#"+ap),ag))&&"object"===typeof l&&(am=l);for(g in am){if(am.hasOwnProperty(g)&&(p=d.jgrid.checkValues.call(at,am[g],g),!1===p[0])){break}}ab();p[0]&&(w=d(at).triggerHandler("jqGridAddEditClickSubmit",[c[at.p.id],am,ag]),void 0===w&&d.isFunction(c[at.p.id].onclickSubmit)&&(w=c[at.p.id].onclickSubmit.call(at,c[at.p.id],am,ag)||{}),p=d(at).triggerHandler("jqGridAddEditBeforeSubmit",[am,d("#"+ap),ag]),void 0===p&&(p=[!0,"",""]),p[0]&&d.isFunction(c[at.p.id].beforeSubmit)&&(p=c[at.p.id].beforeSubmit.call(at,am,d("#"+ap),ag)));if(p[0]&&!c[at.p.id].processing){c[at.p.id].processing=!0;d("#sData",aj+"_2").addClass("ui-state-active");q=t.oper;v=t.id;am[q]="_empty"===d.trim(am[at.p.id+"_id"])?t.addoper:t.editoper;am[q]!==t.addoper?am[v]=am[at.p.id+"_id"]:void 0===am[v]&&(am[v]=am[at.p.id+"_id"]);delete am[at.p.id+"_id"];am=d.extend(am,c[at.p.id].editData,w);if(!0===at.p.treeGrid){for(A in am[q]===t.addoper&&(y=d(at).jqGrid("getGridParam","selrow"),am["adjacency"===at.p.treeGridModel?at.p.treeReader.parent_id_field:"parent_id"]=y),at.p.treeReader){at.p.treeReader.hasOwnProperty(A)&&(w=at.p.treeReader[A],!am.hasOwnProperty(w)||am[q]===t.addoper&&"parent_id_field"===A||delete am[w])}}am[v]=d.jgrid.stripPref(at.p.idPrefix,am[v]);A=d.extend({url:c[at.p.id].url||d(at).jqGrid("getGridParam","editurl"),type:c[at.p.id].mtype,data:d.isFunction(c[at.p.id].serializeEditData)?c[at.p.id].serializeEditData.call(at,am):am,complete:function(m,k){var h;am[v]=at.p.idPrefix+am[v];300<=m.status&&304!==m.status?(p[0]=!1,p[1]=d(at).triggerHandler("jqGridAddEditErrorTextFormat",[m,ag]),d.isFunction(c[at.p.id].errorTextFormat)?p[1]=c[at.p.id].errorTextFormat.call(at,m,ag):p[1]=k+" Status: '"+m.statusText+"'. Error code: "+m.status):(p=d(at).triggerHandler("jqGridAddEditAfterSubmit",[m,am,ag]),void 0===p&&(p=[!0,"",""]),p[0]&&d.isFunction(c[at.p.id].afterSubmit)&&(p=c[at.p.id].afterSubmit.call(at,m,am,ag)));if(!1===p[0]){d("#FormError>td",aj).html(p[1]),d("#FormError",aj).show()}else{if(at.p.autoencode&&d.each(am,function(f,n){am[f]=d.jgrid.htmlDecode(n)}),am[q]===t.addoper?(p[2]||(p[2]=d.jgrid.randId()),am[v]=p[2],c[at.p.id].reloadAfterSubmit?d(at).trigger("reloadGrid"):!0===at.p.treeGrid?d(at).jqGrid("addChildNode",p[2],y,am):d(at).jqGrid("addRowData",p[2],am,b.addedrow),c[at.p.id].closeAfterAdd?(!0!==at.p.treeGrid&&d(at).jqGrid("setSelection",p[2]),d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose})):c[at.p.id].clearAfterAdd&&V("_empty",at,ap)):(c[at.p.id].reloadAfterSubmit?(d(at).trigger("reloadGrid"),c[at.p.id].closeAfterEdit||setTimeout(function(){d(at).jqGrid("setSelection",am[v])},1000)):!0===at.p.treeGrid?d(at).jqGrid("setTreeRow",am[v],am):d(at).jqGrid("setRowData",am[v],am),c[at.p.id].closeAfterEdit&&d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose})),d.isFunction(c[at.p.id].afterComplete)&&(x=m,setTimeout(function(){d(at).triggerHandler("jqGridAddEditAfterComplete",[x,am,d("#"+ap),ag]);c[at.p.id].afterComplete.call(at,x,am,d("#"+ap),ag);x=null},500)),c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){if(d("#"+ap).data("disabled",!1),"_empty"!==c[at.p.id]._savedData[at.p.id+"_id"]){for(h in c[at.p.id]._savedData){c[at.p.id]._savedData.hasOwnProperty(h)&&am[h]&&(c[at.p.id]._savedData[h]=am[h])}}}}c[at.p.id].processing=!1;d("#sData",aj+"_2").removeClass("ui-state-active");try{d(":input:visible","#"+ap)[0].focus()}catch(e){}}},d.jgrid.ajaxOptions,c[at.p.id].ajaxEditOptions);A.url||c[at.p.id].useDataProxy||(d.isFunction(at.p.dataProxy)?c[at.p.id].useDataProxy=!0:(p[0]=!1,p[1]+=" "+d.jgrid.errors.nourl));p[0]&&(c[at.p.id].useDataProxy?(w=at.p.dataProxy.call(at,A,"set_"+at.p.id),void 0===w&&(w=[!0,""]),!1===w[0]?(p[0]=!1,p[1]=w[1]||"Error deleting the selected row!"):(A.data.oper===t.addoper&&c[at.p.id].closeAfterAdd&&d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose}),A.data.oper===t.editoper&&c[at.p.id].closeAfterEdit&&d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose}))):d.ajax(A))}!1===p[0]&&(d("#FormError>td",aj).html(p[1]),d("#FormError",aj).show())}function af(f,e){var h=!1,g;for(g in f){if(f.hasOwnProperty(g)&&f[g]!=e[g]){h=!0;break}}return h}function aq(){var e=!0;d("#FormError",aj).hide();c[at.p.id].checkOnUpdate&&(am={},ar(),o=af(am,c[at.p.id]._savedData))&&(d("#"+ap).data("disabled",!0),d(".confirm","#"+ah.themodal).show(),e=!1);return e}function an(){var e;if("_empty"!==a&&void 0!==at.p.savedRow&&0<at.p.savedRow.length&&d.isFunction(d.fn.jqGrid.restoreRow)){for(e=0;e<at.p.savedRow.length;e++){if(at.p.savedRow[e].id==a){d(at).jqGrid("restoreRow",a);break}}}}function Z(e,g){var f=g[1].length-1;0===e?d("#pData",aj+"_2").addClass("ui-state-disabled"):void 0!==g[1][e-1]&&d("#"+d.jgrid.jqID(g[1][e-1])).hasClass("ui-state-disabled")?d("#pData",aj+"_2").addClass("ui-state-disabled"):d("#pData",aj+"_2").removeClass("ui-state-disabled");e===f?d("#nData",aj+"_2").addClass("ui-state-disabled"):void 0!==g[1][e+1]&&d("#"+d.jgrid.jqID(g[1][e+1])).hasClass("ui-state-disabled")?d("#nData",aj+"_2").addClass("ui-state-disabled"):d("#nData",aj+"_2").removeClass("ui-state-disabled")}function T(){var e=d(at).jqGrid("getDataIDs"),f=d("#id_g",aj).val();return[d.inArray(f,e),e]}var at=this;if(at.grid&&a){var X=at.p.id,ap="FrmGrid_"+X,al="TblGrid_"+X,aj="#"+d.jgrid.jqID(al),ah={themodal:"editmod"+X,modalhead:"edithd"+X,modalcontent:"editcnt"+X,scrollelm:ap},R=d.isFunction(c[at.p.id].beforeShowForm)?c[at.p.id].beforeShowForm:!1,ac=d.isFunction(c[at.p.id].afterShowForm)?c[at.p.id].afterShowForm:!1,ai=d.isFunction(c[at.p.id].beforeInitData)?c[at.p.id].beforeInitData:!1,aa=d.isFunction(c[at.p.id].onInitializeForm)?c[at.p.id].onInitializeForm:!1,ak=!0,ae=1,S=0,am,o,ag,ap=d.jgrid.jqID(ap);"new"===a?(a="_empty",ag="add",b.caption=c[at.p.id].addCaption):(b.caption=c[at.p.id].editCaption,ag="edit");b.recreateForm||d(at).data("formProp")&&d.extend(c[d(this)[0].p.id],d(at).data("formProp"));var j=!0;b.checkOnUpdate&&b.jqModal&&!b.modal&&(j=!1);var U=isNaN(c[d(this)[0].p.id].dataheight)?c[d(this)[0].p.id].dataheight:c[d(this)[0].p.id].dataheight+"px",ak=isNaN(c[d(this)[0].p.id].datawidth)?c[d(this)[0].p.id].datawidth:c[d(this)[0].p.id].datawidth+"px",U=d("<form name='FormPost' id='"+ap+"' class='FormGrid' onSubmit='return false;' style='width:"+ak+";overflow:auto;position:relative;height:"+U+";'></form>").data("disabled",!1),Y=d("<table id='"+al+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),ak=d(at).triggerHandler("jqGridAddEditBeforeInitData",[d("#"+ap),ag]);void 0===ak&&(ak=!0);ak&&ai&&(ak=ai.call(at,d("#"+ap),ag));if(!1!==ak){an();d(at.p.colModel).each(function(){var e=this.formoptions;ae=Math.max(ae,e?e.colpos||0:0);S=Math.max(S,e?e.rowpos||0:0)});d(U).append(Y);ai=d("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*ae+"'></td></tr>");ai[0].rp=0;d(Y).append(ai);ai=d("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*ae+"'>"+c[at.p.id].topinfo+"</td></tr>");ai[0].rp=0;d(Y).append(ai);var ak=(ai="rtl"===at.p.direction?!0:!1)?"nData":"pData",W=ai?"pData":"nData";ao(a,at,Y,ae);var ak="<a id='"+ak+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",W="<a id='"+W+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",Q="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",P="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>",al="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+al+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(ai?W+ak:ak+W)+"</td><td class='EditButton'>"+Q+P+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+c[at.p.id].bottominfo+"</td></tr>"),al=al+"</tbody></table>";if(0<S){var z=[];d.each(d(Y)[0].rows,function(f,e){z[f]=e});z.sort(function(f,e){return f.rp>e.rp?1:f.rp<e.rp?-1:0});d.each(z,function(e,f){d("tbody",Y).append(f)})}b.gbox="#gbox_"+d.jgrid.jqID(X);var i=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,i=!0);al=d("<div></div>").append(U).append(al);d.jgrid.createModal(ah,al,c[d(this)[0].p.id],"#gview_"+d.jgrid.jqID(at.p.id),d("#gbox_"+d.jgrid.jqID(at.p.id))[0]);ai&&(d("#pData, #nData",aj+"_2").css("float","right"),d(".EditButton",aj+"_2").css("text-align","left"));c[at.p.id].topinfo&&d(".tinfo",aj).show();c[at.p.id].bottominfo&&d(".binfo",aj+"_2").show();al=al=null;d("#"+d.jgrid.jqID(ah.themodal)).keydown(function(f){var g=f.target;if(!0===d("#"+ap).data("disabled")){return !1}if(!0===c[at.p.id].savekey[0]&&f.which===c[at.p.id].savekey[1]&&"TEXTAREA"!==g.tagName){return d("#sData",aj+"_2").trigger("click"),!1}if(27===f.which){if(!aq()){return !1}i&&d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:c[at.p.id].onClose});return !1}if(!0===c[at.p.id].navkeys[0]){if("_empty"===d("#id_g",aj).val()){return !0}if(f.which===c[at.p.id].navkeys[1]){return d("#pData",aj+"_2").trigger("click"),!1}if(f.which===c[at.p.id].navkeys[2]){return d("#nData",aj+"_2").trigger("click"),!1}}});b.checkOnUpdate&&(d("a.ui-jqdialog-titlebar-close span","#"+d.jgrid.jqID(ah.themodal)).removeClass("jqmClose"),d("a.ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(ah.themodal)).unbind("click").click(function(){if(!aq()){return !1}d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose});return !1}));b.saveicon=d.extend([!0,"left","ui-icon-disk"],b.saveicon);b.closeicon=d.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.saveicon[0]&&d("#sData",aj+"_2").addClass("right"===b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>");!0===b.closeicon[0]&&d("#cData",aj+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");if(c[at.p.id].checkOnSubmit||c[at.p.id].checkOnUpdate){Q="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bYes+"</a>",W="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bNo+"</a>",P="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bExit+"</a>",al=b.zIndex||999,al++,d("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+al+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(al+1)+"'>"+b.saveData+"<br/><br/>"+Q+W+P+"</div>").insertAfter("#"+ap),d("#sNew","#"+d.jgrid.jqID(ah.themodal)).click(function(){ad();d("#"+ap).data("disabled",!1);d(".confirm","#"+d.jgrid.jqID(ah.themodal)).hide();return !1}),d("#nNew","#"+d.jgrid.jqID(ah.themodal)).click(function(){d(".confirm","#"+d.jgrid.jqID(ah.themodal)).hide();d("#"+ap).data("disabled",!1);setTimeout(function(){d(":input:visible","#"+ap)[0].focus()},0);return !1}),d("#cNew","#"+d.jgrid.jqID(ah.themodal)).click(function(){d(".confirm","#"+d.jgrid.jqID(ah.themodal)).hide();d("#"+ap).data("disabled",!1);d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose});return !1})}d(at).triggerHandler("jqGridAddEditInitializeForm",[d("#"+ap),ag]);aa&&aa.call(at,d("#"+ap),ag);"_empty"!==a&&c[at.p.id].viewPagerButtons?d("#pData,#nData",aj+"_2").show():d("#pData,#nData",aj+"_2").hide();d(at).triggerHandler("jqGridAddEditBeforeShowForm",[d("#"+ap),ag]);R&&R.call(at,d("#"+ap),ag);d("#"+d.jgrid.jqID(ah.themodal)).data("onClose",c[at.p.id].onClose);d.jgrid.viewModal("#"+d.jgrid.jqID(ah.themodal),{gbox:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,onHide:function(e){d(at).data("formProp",{top:parseFloat(d(e.w).css("top")),left:parseFloat(d(e.w).css("left")),width:d(e.w).width(),height:d(e.w).height(),dataheight:d("#"+ap).height(),datawidth:d("#"+ap).width()});e.w.remove();e.o&&e.o.remove()}});j||d("."+d.jgrid.jqID(b.overlayClass)).click(function(){if(!aq()){return !1}d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose});return !1});d(".fm-button","#"+d.jgrid.jqID(ah.themodal)).hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});d("#sData",aj+"_2").click(function(){am={};d("#FormError",aj).hide();ar();"_empty"===am[at.p.id+"_id"]?ad():!0===b.checkOnSubmit?(o=af(am,c[at.p.id]._savedData))?(d("#"+ap).data("disabled",!0),d(".confirm","#"+d.jgrid.jqID(ah.themodal)).show()):ad():ad();return !1});d("#cData",aj+"_2").click(function(){if(!aq()){return !1}d.jgrid.hideModal("#"+d.jgrid.jqID(ah.themodal),{gb:"#gbox_"+d.jgrid.jqID(X),jqm:b.jqModal,onClose:c[at.p.id].onClose});return !1});d("#nData",aj+"_2").click(function(){if(!aq()){return !1}d("#FormError",aj).hide();var f=T();f[0]=parseInt(f[0],10);if(-1!==f[0]&&f[1][f[0]+1]){d(at).triggerHandler("jqGridAddEditClickPgButtons",["next",d("#"+ap),f[1][f[0]]]);var g;if(d.isFunction(b.onclickPgButtons)&&(g=b.onclickPgButtons.call(at,"next",d("#"+ap),f[1][f[0]]),void 0!==g&&!1===g)||d("#"+d.jgrid.jqID(f[1][f[0]+1])).hasClass("ui-state-disabled")){return !1}V(f[1][f[0]+1],at,ap);d(at).jqGrid("setSelection",f[1][f[0]+1]);d(at).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",d("#"+ap),f[1][f[0]]]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(at,"next",d("#"+ap),f[1][f[0]+1]);Z(f[0]+1,f)}return !1});d("#pData",aj+"_2").click(function(){if(!aq()){return !1}d("#FormError",aj).hide();var f=T();if(-1!==f[0]&&f[1][f[0]-1]){d(at).triggerHandler("jqGridAddEditClickPgButtons",["prev",d("#"+ap),f[1][f[0]]]);var g;if(d.isFunction(b.onclickPgButtons)&&(g=b.onclickPgButtons.call(at,"prev",d("#"+ap),f[1][f[0]]),void 0!==g&&!1===g)||d("#"+d.jgrid.jqID(f[1][f[0]-1])).hasClass("ui-state-disabled")){return !1}V(f[1][f[0]-1],at,ap);d(at).jqGrid("setSelection",f[1][f[0]-1]);d(at).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",d("#"+ap),f[1][f[0]]]);d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(at,"prev",d("#"+ap),f[1][f[0]-1]);Z(f[0]-1,f)}return !1});d(at).triggerHandler("jqGridAddEditAfterShowForm",[d("#"+ap),ag]);ac&&ac.call(at,d("#"+ap),ag);R=T();Z(R[0],R)}}})},viewGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},d.jgrid.view,b||{});c[d(this)[0].p.id]=b;return this.each(function(){function P(){!0!==c[G.p.id].closeOnEscape&&!0!==c[G.p.id].navkeys[0]||setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(n.modalhead)).focus()},0)}function M(ak,aj,ai,ah){var ag,ae,af,aa=0,ad,ac,Z=[],Y=!1,W,V="<td class='CaptionTD form-view-label ui-widget-content' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",R="",E=["integer","number","currency"],U=0,T=0,ab,S,X;for(W=1;W<=ah;W++){R+=1===W?V:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>"}d(aj.p.colModel).each(function(){(ae=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==d.inArray(this.formatter,E)?U=Math.max(U,parseInt(this.width,10)):T=Math.max(T,parseInt(this.width,10)))});ab=0!==U?U:0!==T?T:0;Y=d(aj).jqGrid("getInd",ak);d(aj.p.colModel).each(function(e){ag=this.name;S=!1;ac=(ae=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";X="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==ag&&"subgrid"!==ag&&"rn"!==ag&&X){ad=!1===Y?"":ag===aj.p.ExpandColumn&&!0===aj.p.treeGrid?d("td:eq("+e+")",aj.rows[Y]).text():d("td:eq("+e+")",aj.rows[Y]).html();S="right"===this.align&&0!==ab?!0:!1;var k=d.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),h=parseInt(k.rowpos,10)||aa+1,g=parseInt(2*(parseInt(k.colpos,10)||1),10);if(k.rowabove){var f=d("<tr><td class='contentinfo' colspan='"+2*ah+"'>"+k.rowcontent+"</td></tr>");d(ai).append(f);f[0].rp=h}af=d(ai).find("tr[rowpos="+h+"]");0===af.length&&(af=d("<tr "+ac+" rowpos='"+h+"'></tr>").addClass("FormData").attr("id","trv_"+ag),d(af).append(R),d(ai).append(af),af[0].rp=h);d("td:eq("+(g-2)+")",af[0]).html("<b>"+(void 0===k.label?aj.p.colNames[e]:k.label)+"</b>");d("td:eq("+(g-1)+")",af[0]).append("<span>"+ad+"</span>").attr("id","v_"+ag);S&&d("td:eq("+(g-1)+") span",af[0]).css({"text-align":"right",width:ab+"px"});Z[aa]=e;aa++}});0<aa&&(ak=d("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*ah-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+ak+"'/></td></tr>"),ak[0].rp=aa+99,d(ai).append(ak));return Z}function l(h,t){var s,r,q=0,p,m;if(m=d(t).jqGrid("getInd",h,!0)){d("td",m).each(function(e){s=t.p.colModel[e].name;r=t.p.colModel[e].editrules&&!0===t.p.colModel[e].editrules.edithidden?!1:!0===t.p.colModel[e].hidden?!0:!1;"cb"!==s&&"subgrid"!==s&&"rn"!==s&&(p=s===t.p.ExpandColumn&&!0===t.p.treeGrid?d(this).text():d(this).html(),s=d.jgrid.jqID("v_"+s),d("#"+s+" span","#"+o).html(p),r&&d("#"+s,"#"+o).parents("tr:first").hide(),q++)}),0<q&&d("#id_g","#"+o).val(h)}}function B(e,g){var f=g[1].length-1;0===e?d("#pData","#"+o+"_2").addClass("ui-state-disabled"):void 0!==g[1][e-1]&&d("#"+d.jgrid.jqID(g[1][e-1])).hasClass("ui-state-disabled")?d("#pData",o+"_2").addClass("ui-state-disabled"):d("#pData","#"+o+"_2").removeClass("ui-state-disabled");e===f?d("#nData","#"+o+"_2").addClass("ui-state-disabled"):void 0!==g[1][e+1]&&d("#"+d.jgrid.jqID(g[1][e+1])).hasClass("ui-state-disabled")?d("#nData",o+"_2").addClass("ui-state-disabled"):d("#nData","#"+o+"_2").removeClass("ui-state-disabled")}function F(){var e=d(G).jqGrid("getDataIDs"),f=d("#id_g","#"+o).val();return[d.inArray(f,e),e]}var G=this;if(G.grid&&a){var O=G.p.id,L="ViewGrid_"+d.jgrid.jqID(O),o="ViewTbl_"+d.jgrid.jqID(O),j="ViewGrid_"+O,Q="ViewTbl_"+O,n={themodal:"viewmod"+O,modalhead:"viewhd"+O,modalcontent:"viewcnt"+O,scrollelm:L},N=d.isFunction(c[G.p.id].beforeInitData)?c[G.p.id].beforeInitData:!1,K=!0,J=1,H=0;b.recreateForm||d(G).data("viewProp")&&d.extend(c[d(this)[0].p.id],d(G).data("viewProp"));var i=isNaN(c[d(this)[0].p.id].dataheight)?c[d(this)[0].p.id].dataheight:c[d(this)[0].p.id].dataheight+"px",C=isNaN(c[d(this)[0].p.id].datawidth)?c[d(this)[0].p.id].datawidth:c[d(this)[0].p.id].datawidth+"px",j=d("<form name='FormPost' id='"+j+"' class='FormGrid' style='width:"+C+";overflow:auto;position:relative;height:"+i+";'></form>"),I=d("<table id='"+Q+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");N&&(K=N.call(G,d("#"+L)),void 0===K&&(K=!0));if(!1!==K){d(G.p.colModel).each(function(){var e=this.formoptions;J=Math.max(J,e?e.colpos||0:0);H=Math.max(H,e?e.rowpos||0:0)});d(j).append(I);M(a,G,I,J);Q="rtl"===G.p.direction?!0:!1;N="<a id='"+(Q?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";K="<a id='"+(Q?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";i="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bClose+"</a>";if(0<H){var z=[];d.each(d(I)[0].rows,function(f,e){z[f]=e});z.sort(function(f,e){return f.rp>e.rp?1:f.rp<e.rp?-1:0});d.each(z,function(e,f){d("tbody",I).append(f)})}b.gbox="#gbox_"+d.jgrid.jqID(O);j=d("<div></div>").append(j).append("<table border='0' class='EditTable' id='"+o+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+b.labelswidth+"'>"+(Q?K+N:N+K)+"</td><td class='EditButton'>"+i+"</td></tr></tbody></table>");d.jgrid.createModal(n,j,b,"#gview_"+d.jgrid.jqID(G.p.id),d("#gview_"+d.jgrid.jqID(G.p.id))[0]);Q&&(d("#pData, #nData","#"+o+"_2").css("float","right"),d(".EditButton","#"+o+"_2").css("text-align","left"));b.viewPagerButtons||d("#pData, #nData","#"+o+"_2").hide();j=null;d("#"+n.themodal).keydown(function(e){if(27===e.which){return c[G.p.id].closeOnEscape&&d.jgrid.hideModal("#"+d.jgrid.jqID(n.themodal),{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose}),!1}if(!0===b.navkeys[0]){if(e.which===b.navkeys[1]){return d("#pData","#"+o+"_2").trigger("click"),!1}if(e.which===b.navkeys[2]){return d("#nData","#"+o+"_2").trigger("click"),!1}}});b.closeicon=d.extend([!0,"left","ui-icon-close"],b.closeicon);!0===b.closeicon[0]&&d("#cData","#"+o+"_2").addClass("right"===b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");d.isFunction(b.beforeShowForm)&&b.beforeShowForm.call(G,d("#"+L));d.jgrid.viewModal("#"+d.jgrid.jqID(n.themodal),{gbox:"#gbox_"+d.jgrid.jqID(O),jqm:b.jqModal,overlay:b.overlay,modal:b.modal,onHide:function(e){d(G).data("viewProp",{top:parseFloat(d(e.w).css("top")),left:parseFloat(d(e.w).css("left")),width:d(e.w).width(),height:d(e.w).height(),dataheight:d("#"+L).height(),datawidth:d("#"+L).width()});e.w.remove();e.o&&e.o.remove()}});d(".fm-button:not(.ui-state-disabled)","#"+o+"_2").hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});P();d("#cData","#"+o+"_2").click(function(){d.jgrid.hideModal("#"+d.jgrid.jqID(n.themodal),{gb:"#gbox_"+d.jgrid.jqID(O),jqm:b.jqModal,onClose:b.onClose});return !1});d("#nData","#"+o+"_2").click(function(){d("#FormError","#"+o).hide();var e=F();e[0]=parseInt(e[0],10);-1!==e[0]&&e[1][e[0]+1]&&(d.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(G,"next",d("#"+L),e[1][e[0]]),l(e[1][e[0]+1],G),d(G).jqGrid("setSelection",e[1][e[0]+1]),d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(G,"next",d("#"+L),e[1][e[0]+1]),B(e[0]+1,e));P();return !1});d("#pData","#"+o+"_2").click(function(){d("#FormError","#"+o).hide();var e=F();-1!==e[0]&&e[1][e[0]-1]&&(d.isFunction(b.onclickPgButtons)&&b.onclickPgButtons.call(G,"prev",d("#"+L),e[1][e[0]]),l(e[1][e[0]-1],G),d(G).jqGrid("setSelection",e[1][e[0]-1]),d.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons.call(G,"prev",d("#"+L),e[1][e[0]-1]),B(e[0]-1,e));P();return !1});j=F();B(j[0],j)}}})},delGridRow:function(a,b){b=d.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},d.jgrid.del,b||{});c[d(this)[0].p.id]=b;return this.each(function(){var B=this;if(B.grid&&a){var y=d.isFunction(c[B.p.id].beforeShowForm),E=d.isFunction(c[B.p.id].afterShowForm),H=d.isFunction(c[B.p.id].beforeInitData)?c[B.p.id].beforeInitData:!1,I=B.p.id,i={},A=!0,o="DelTbl_"+d.jgrid.jqID(I),G,D,C,F,z="DelTbl_"+I,n={themodal:"delmod"+I,modalhead:"delhd"+I,modalcontent:"delcnt"+I,scrollelm:o};d.isArray(a)&&(a=a.join());if(void 0!==d("#"+d.jgrid.jqID(n.themodal))[0]){H&&(A=H.call(B,d("#"+o)),void 0===A&&(A=!0));if(!1===A){return}d("#DelData>td","#"+o).text(a);d("#DelError","#"+o).hide();!0===c[B.p.id].processing&&(c[B.p.id].processing=!1,d("#dData","#"+o).removeClass("ui-state-active"));y&&c[B.p.id].beforeShowForm.call(B,d("#"+o));d.jgrid.viewModal("#"+d.jgrid.jqID(n.themodal),{gbox:"#gbox_"+d.jgrid.jqID(I),jqm:c[B.p.id].jqModal,jqM:!1,overlay:c[B.p.id].overlay,modal:c[B.p.id].modal})}else{var l=isNaN(c[B.p.id].dataheight)?c[B.p.id].dataheight:c[B.p.id].dataheight+"px",j=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",z="<div id='"+z+"' class='formdata' style='width:"+j+";overflow:auto;position:relative;height:"+l+";'><table class='DelTable'><tbody>",z=z+"<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",z=z+("<tr id='DelData' style='display:none'><td >"+a+"</td></tr>"),z=z+('<tr><td class="delmsg" style="white-space:pre;">'+c[B.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),z=z+"</tbody></table></div>",z=z+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+o+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>")+"&#160;"+("<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>")+"</td></tr></tbody></table>");b.gbox="#gbox_"+d.jgrid.jqID(I);d.jgrid.createModal(n,z,b,"#gview_"+d.jgrid.jqID(B.p.id),d("#gview_"+d.jgrid.jqID(B.p.id))[0]);H&&(A=H.call(B,d("#"+o)),void 0===A&&(A=!0));if(!1===A){return}d(".fm-button","#"+o+"_2").hover(function(){d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")});b.delicon=d.extend([!0,"left","ui-icon-scissors"],c[B.p.id].delicon);b.cancelicon=d.extend([!0,"left","ui-icon-cancel"],c[B.p.id].cancelicon);!0===b.delicon[0]&&d("#dData","#"+o+"_2").addClass("right"===b.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.delicon[2]+"'></span>");!0===b.cancelicon[0]&&d("#eData","#"+o+"_2").addClass("right"===b.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.cancelicon[2]+"'></span>");d("#dData","#"+o+"_2").click(function(){var m=[!0,""],k,e=d("#DelData>td","#"+o).text();i={};d.isFunction(c[B.p.id].onclickSubmit)&&(i=c[B.p.id].onclickSubmit.call(B,c[B.p.id],e)||{});d.isFunction(c[B.p.id].beforeSubmit)&&(m=c[B.p.id].beforeSubmit.call(B,e));if(m[0]&&!c[B.p.id].processing){c[B.p.id].processing=!0;C=B.p.prmNames;G=d.extend({},c[B.p.id].delData,i);F=C.oper;G[F]=C.deloper;D=C.id;e=String(e).split(",");if(!e.length){return !1}for(k in e){e.hasOwnProperty(k)&&(e[k]=d.jgrid.stripPref(B.p.idPrefix,e[k]))}G[D]=e.join();d(this).addClass("ui-state-active");k=d.extend({url:c[B.p.id].url||d(B).jqGrid("getGridParam","editurl"),type:c[B.p.id].mtype,data:d.isFunction(c[B.p.id].serializeDelData)?c[B.p.id].serializeDelData.call(B,G):G,complete:function(s,f){var h;300<=s.status&&304!==s.status?(m[0]=!1,d.isFunction(c[B.p.id].errorTextFormat)?m[1]=c[B.p.id].errorTextFormat.call(B,s):m[1]=f+" Status: '"+s.statusText+"'. Error code: "+s.status):d.isFunction(c[B.p.id].afterSubmit)&&(m=c[B.p.id].afterSubmit.call(B,s,G));if(!1===m[0]){d("#DelError>td","#"+o).html(m[1]),d("#DelError","#"+o).show()}else{if(c[B.p.id].reloadAfterSubmit&&"local"!==B.p.datatype){d(B).trigger("reloadGrid")}else{if(!0===B.p.treeGrid){try{d(B).jqGrid("delTreeNode",B.p.idPrefix+e[0])}catch(r){}}else{for(h=0;h<e.length;h++){d(B).jqGrid("delRowData",B.p.idPrefix+e[h])}}B.p.selrow=null;B.p.selarrrow=[]}d.isFunction(c[B.p.id].afterComplete)&&setTimeout(function(){c[B.p.id].afterComplete.call(B,s,e)},500)}c[B.p.id].processing=!1;d("#dData","#"+o+"_2").removeClass("ui-state-active");m[0]&&d.jgrid.hideModal("#"+d.jgrid.jqID(n.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:b.jqModal,onClose:c[B.p.id].onClose})}},d.jgrid.ajaxOptions,c[B.p.id].ajaxDelOptions);k.url||c[B.p.id].useDataProxy||(d.isFunction(B.p.dataProxy)?c[B.p.id].useDataProxy=!0:(m[0]=!1,m[1]+=" "+d.jgrid.errors.nourl));m[0]&&(c[B.p.id].useDataProxy?(k=B.p.dataProxy.call(B,k,"del_"+B.p.id),void 0===k&&(k=[!0,""]),!1===k[0]?(m[0]=!1,m[1]=k[1]||"Error deleting the selected row!"):d.jgrid.hideModal("#"+d.jgrid.jqID(n.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:b.jqModal,onClose:c[B.p.id].onClose})):d.ajax(k))}!1===m[0]&&(d("#DelError>td","#"+o).html(m[1]),d("#DelError","#"+o).show());return !1});d("#eData","#"+o+"_2").click(function(){d.jgrid.hideModal("#"+d.jgrid.jqID(n.themodal),{gb:"#gbox_"+d.jgrid.jqID(I),jqm:c[B.p.id].jqModal,onClose:c[B.p.id].onClose});return !1});y&&c[B.p.id].beforeShowForm.call(B,d("#"+o));d.jgrid.viewModal("#"+d.jgrid.jqID(n.themodal),{gbox:"#gbox_"+d.jgrid.jqID(I),jqm:c[B.p.id].jqModal,overlay:c[B.p.id].overlay,modal:c[B.p.id].modal})}E&&c[B.p.id].afterShowForm.call(B,d("#"+o));!0===c[B.p.id].closeOnEscape&&setTimeout(function(){d(".ui-jqdialog-titlebar-close","#"+d.jgrid.jqID(n.modalhead)).focus()},0)}})},navGrid:function(a,l,k,j,f,g,i){l=d.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},d.jgrid.nav,l||{});return this.each(function(){if(!this.nav){var b={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},q=this,n;if(q.grid&&"string"===typeof a){void 0===d("#"+b.themodal)[0]&&(l.alerttop||l.alertleft||(void 0!==window.innerWidth?(l.alertleft=window.innerWidth,l.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(l.alertleft=document.documentElement.clientWidth,l.alerttop=document.documentElement.clientHeight):(l.alertleft=1024,l.alerttop=768),l.alertleft=l.alertleft/2-parseInt(l.alertwidth,10)/2,l.alerttop=l.alerttop/2-25),d.jgrid.createModal(b,"<div>"+l.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+d.jgrid.jqID(q.p.id),jqModal:!0,drag:!0,resize:!0,caption:l.alertcap,top:l.alerttop,left:l.alertleft,width:l.alertwidth,height:l.alertheight,closeOnEscape:l.closeOnEscape,zIndex:l.alertzIndex},"#gview_"+d.jgrid.jqID(q.p.id),d("#gbox_"+d.jgrid.jqID(q.p.id))[0],!0));var y=1,t,s=function(){d(this).hasClass("ui-state-disabled")||d(this).addClass("ui-state-hover")},w=function(){d(this).removeClass("ui-state-hover")};l.cloneToTop&&q.p.toppager&&(y=2);for(t=0;t<y;t++){var o=d("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),h,e;0===t?(h=a,e=q.p.id,h===q.p.toppager&&(e+="_top",y=1)):(h=q.p.toppager,e=q.p.id+"_top");"rtl"===q.p.direction&&d(o).attr("dir","rtl").css("float","right");l.add&&(j=j||{},n=d("<td class='ui-pg-button ui-corner-all'></td>"),d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.addicon+"'></span>"+l.addtext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.addtitle||"",id:j.id||"add_"+e}).click(function(){d(this).hasClass("ui-state-disabled")||(d.isFunction(l.addfunc)?l.addfunc.call(q):d(q).jqGrid("editGridRow","new",j));return !1}).hover(s,w),n=null);l.edit&&(n=d("<td class='ui-pg-button ui-corner-all'></td>"),k=k||{},d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.editicon+"'></span>"+l.edittext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.edittitle||"",id:k.id||"edit_"+e}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m=q.p.selrow;m?d.isFunction(l.editfunc)?l.editfunc.call(q,m):d(q).jqGrid("editGridRow",m,k):(d.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+d.jgrid.jqID(q.p.id),jqm:!0}),d("#jqg_alrt").focus())}return !1}).hover(s,w),n=null);l.view&&(n=d("<td class='ui-pg-button ui-corner-all'></td>"),i=i||{},d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.viewicon+"'></span>"+l.viewtext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.viewtitle||"",id:i.id||"view_"+e}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m=q.p.selrow;m?d.isFunction(l.viewfunc)?l.viewfunc.call(q,m):d(q).jqGrid("viewGridRow",m,i):(d.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+d.jgrid.jqID(q.p.id),jqm:!0}),d("#jqg_alrt").focus())}return !1}).hover(s,w),n=null);l.del&&(n=d("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.delicon+"'></span>"+l.deltext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.deltitle||"",id:f.id||"del_"+e}).click(function(){if(!d(this).hasClass("ui-state-disabled")){var m;q.p.multiselect?(m=q.p.selarrrow,0===m.length&&(m=null)):m=q.p.selrow;m?d.isFunction(l.delfunc)?l.delfunc.call(q,m):d(q).jqGrid("delGridRow",m,f):(d.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+d.jgrid.jqID(q.p.id),jqm:!0}),d("#jqg_alrt").focus())}return !1}).hover(s,w),n=null);(l.add||l.edit||l.del||l.view)&&d("tr",o).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");l.search&&(n=d("<td class='ui-pg-button ui-corner-all'></td>"),g=g||{},d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.searchicon+"'></span>"+l.searchtext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.searchtitle||"",id:g.id||"search_"+e}).click(function(){d(this).hasClass("ui-state-disabled")||(d.isFunction(l.searchfunc)?l.searchfunc.call(q,g):d(q).jqGrid("searchGrid",g));return !1}).hover(s,w),g.showOnLoad&&!0===g.showOnLoad&&d(n,o).click(),n=null);l.refresh&&(n=d("<td class='ui-pg-button ui-corner-all'></td>"),d(n).append("<div class='ui-pg-div'><span class='ui-icon "+l.refreshicon+"'></span>"+l.refreshtext+"</div>"),d("tr",o).append(n),d(n,o).attr({title:l.refreshtitle||"",id:"refresh_"+e}).click(function(){if(!d(this).hasClass("ui-state-disabled")){d.isFunction(l.beforeRefresh)&&l.beforeRefresh.call(q);q.p.search=!1;q.p.resetsearch=!0;try{var m=q.p.id;q.p.postData.filters="";try{d("#fbox_"+d.jgrid.jqID(m)).jqFilter("resetFilter")}catch(r){}d.isFunction(q.clearToolbar)&&q.clearToolbar.call(q,!1)}catch(p){}switch(l.refreshstate){case"firstpage":d(q).trigger("reloadGrid",[{page:1}]);break;case"current":d(q).trigger("reloadGrid",[{current:!0}])}d.isFunction(l.afterRefresh)&&l.afterRefresh.call(q)}return !1}).hover(s,w),n=null);n=d(".ui-jqgrid").css("font-size")||"11px";d("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+n+";visibility:hidden;' ></div>");n=d(o).clone().appendTo("#testpg2").width();d("#testpg2").remove();d(h+"_"+l.position,h).append(o);q.p._nvtd&&(n>q.p._nvtd[0]&&(d(h+"_"+l.position,h).width(n),q.p._nvtd[0]=n),q.p._nvtd[1]=n);o=n=n=null;this.nav=!0}}}})},navButtonAdd:function(a,e){e=d.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},e||{});return this.each(function(){if(this.grid){"string"===typeof a&&0!==a.indexOf("#")&&(a="#"+d.jgrid.jqID(a));var g=d(".navtable",a)[0],f=this;if(g&&(!e.id||void 0===d("#"+d.jgrid.jqID(e.id),g)[0])){var b=d("<td></td>");"NONE"===e.buttonicon.toString().toUpperCase()?d(b).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+e.caption+"</div>"):d(b).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+e.buttonicon+"'></span>"+e.caption+"</div>");e.id&&d(b).attr("id",e.id);"first"===e.position?0===g.rows[0].cells.length?d("tr",g).append(b):d("tr td:eq(0)",g).before(b):d("tr",g).append(b);d(b,g).attr("title",e.title||"").click(function(h){d(this).hasClass("ui-state-disabled")||d.isFunction(e.onClickButton)&&e.onClickButton.call(f,h);return !1}).hover(function(){d(this).hasClass("ui-state-disabled")||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(a,e){e=d.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},e||{});return this.each(function(){if(this.grid){"string"===typeof a&&0!==a.indexOf("#")&&(a="#"+d.jgrid.jqID(a));var f=d(".navtable",a)[0];if(f){var b="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+e.sepclass+"'></span>"+e.sepcontent+"</td>";"first"===e.position?0===f.rows[0].cells.length?d("tr",f).append(b):d("tr td:eq(0)",f).before(b):d("tr",f).append(b)}}})},GridToForm:function(a,e){return this.each(function(){var g=this,f;if(g.grid){var b=d(g).jqGrid("getRowData",a);if(b){for(f in b){b.hasOwnProperty(f)&&(d("[name="+d.jgrid.jqID(f)+"]",e).is("input:radio")||d("[name="+d.jgrid.jqID(f)+"]",e).is("input:checkbox")?d("[name="+d.jgrid.jqID(f)+"]",e).each(function(){if(d(this).val()==b[f]){d(this)[g.p.useProp?"prop":"attr"]("checked",!0)}else{d(this)[g.p.useProp?"prop":"attr"]("checked",!1)}}):d("[name="+d.jgrid.jqID(f)+"]",e).val(b[f]))}}}})},FormToGrid:function(a,i,g,f){return this.each(function(){if(this.grid){g||(g="set");f||(f="first");var b=d(i).serializeArray(),e={};d.each(b,function(j,h){e[h.name]=h.value});"add"===g?d(this).jqGrid("addRowData",a,e,f):"set"===g&&d(this).jqGrid("setRowData",a,e)}})}})})(jQuery);(function(b){b.fn.jqFilter=function(e){if("string"===typeof e){var c=b.fn.jqFilter[e];if(!c){throw"jqFilter - No such method: "+e}var a=b.makeArray(arguments).slice(1);return c.apply(this,a)}var f=b.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},b.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}var k,j=this.p.columns.length,i,g=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=b.extend(!0,{},this.p.filter);if(j){for(k=0;k<j;k++){i=this.p.columns[k],i.stype?i.inputtype=i.stype:i.inputtype||(i.inputtype="text"),i.sorttype?i.searchtype=i.sorttype:i.searchtype||(i.searchtype="string"),void 0===i.hidden&&(i.hidden=!1),i.label||(i.label=i.name),i.index&&(i.name=i.index),i.hasOwnProperty("searchoptions")||(i.searchoptions={}),i.hasOwnProperty("searchrules")||(i.searchrules={})}this.p.showQuery&&b(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var h=function(p,o){var n=[!0,""],q=b("#"+b.jgrid.jqID(f.id))[0]||null;if(b.isFunction(o.searchrules)){n=o.searchrules.call(q,p,o)}else{if(b.jgrid&&b.jgrid.checkValues){try{n=b.jgrid.checkValues.call(q,p,-1,o.searchrules,o.label)}catch(d){}}}n&&n.length&&!1===n[0]&&(f.error=!n[0],f.errmsg=n[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return b.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){b("table.group:first",this).remove();var d=this.createTableForGroup(f.filter,null);b(this).append(d);b.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(r,o){var w=this,v,n=b("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),t="left";"rtl"===this.p.direction&&(t="right",n.attr("dir","rtl"));null===o&&n.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+t+"'></th></tr>");var q=b("<tr></tr>");n.append(q);t=b("<th colspan='5' align='"+t+"'></th>");q.append(t);if(!0===this.p.ruleButtons){var u=b("<select class='opsel'></select>");t.append(u);var q="",p;for(v=0;v<f.groupOps.length;v++){p=r.groupOp===w.p.groupOps[v].op?" selected='selected'":"",q+="<option value='"+w.p.groupOps[v].op+"'"+p+">"+w.p.groupOps[v].text+"</option>"}u.append(q).bind("change",function(){r.groupOp=b(u).val();w.onchange()})}q="<span></span>";this.p.groupButton&&(q=b("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),q.bind("click",function(){void 0===r.groups&&(r.groups=[]);r.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});w.reDraw();w.onchange();return !1}));t.append(q);if(!0===this.p.ruleButtons){var q=b("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),s;q.bind("click",function(){void 0===r.rules&&(r.rules=[]);for(v=0;v<w.p.columns.length;v++){var m=void 0===w.p.columns[v].search?!0:w.p.columns[v].search,d=!0===w.p.columns[v].hidden;if(!0===w.p.columns[v].searchoptions.searchhidden&&m||m&&!d){s=w.p.columns[v];break}}m=s.searchoptions.sopt?s.searchoptions.sopt:w.p.sopt?w.p.sopt:-1!==b.inArray(s.searchtype,w.p.strarr)?w.p.stropts:w.p.numopts;r.rules.push({field:s.name,op:m[0],data:""});w.reDraw();return !1});t.append(q)}null!==o&&(q=b("<input type='button' value='-' title='Delete group' class='delete-group'/>"),t.append(q),q.bind("click",function(){for(v=0;v<o.groups.length;v++){if(o.groups[v]===r){o.groups.splice(v,1);break}}w.reDraw();w.onchange();return !1}));if(void 0!==r.groups){for(v=0;v<r.groups.length;v++){t=b("<tr></tr>"),n.append(t),q=b("<td class='first'></td>"),t.append(q),q=b("<td colspan='4'></td>"),q.append(this.createTableForGroup(r.groups[v],r)),t.append(q)}}void 0===r.groupOp&&(r.groupOp=w.p.groupOps[0].op);if(void 0!==r.rules){for(v=0;v<r.rules.length;v++){n.append(this.createTableRowForRule(r.rules[v],r))}}return n};this.createTableRowForRule=function(B,y){var G=this,F=b("#"+b.jgrid.jqID(f.id))[0]||null,x=b("<tr></tr>"),D,A,C,z,E="",K;x.append("<td class='first'></td>");var w=b("<td class='columns'></td>");x.append(w);var o=b("<select></select>"),n,J=[];w.append(o);o.bind("change",function(){B.field=b(o).val();C=b(this).parents("tr:first");for(D=0;D<G.p.columns.length;D++){if(G.p.columns[D].name===B.field){z=G.p.columns[D];break}}if(z){z.searchoptions.id=b.jgrid.randId();g&&"text"===z.inputtype&&!z.searchoptions.size&&(z.searchoptions.size=10);var r=b.jgrid.createEl.call(F,z.inputtype,z.searchoptions,"",!0,G.p.ajaxSelectOptions||{},!0);b(r).addClass("input-elm");A=z.searchoptions.sopt?z.searchoptions.sopt:G.p.sopt?G.p.sopt:-1!==b.inArray(z.searchtype,G.p.strarr)?G.p.stropts:G.p.numopts;var q="",p=0;J=[];b.each(G.p.ops,function(){J.push(this.oper)});for(D=0;D<A.length;D++){n=b.inArray(A[D],J),-1!==n&&(0===p&&(B.op=G.p.ops[n].oper),q+="<option value='"+G.p.ops[n].oper+"'>"+G.p.ops[n].text+"</option>",p++)}b(".selectopts",C).empty().append(q);b(".selectopts",C)[0].selectedIndex=0;b.jgrid.msie&&9>b.jgrid.msiever()&&(q=parseInt(b("select.selectopts",C)[0].offsetWidth,10)+1,b(".selectopts",C).width(q),b(".selectopts",C).css("width","auto"));b(".data",C).empty().append(r);b.jgrid.bindEv.call(F,r,z.searchoptions);b(".input-elm",C).bind("change",function(d){d=d.target;B.data="SPAN"===d.nodeName.toUpperCase()&&z.searchoptions&&b.isFunction(z.searchoptions.custom_value)?z.searchoptions.custom_value.call(F,b(d).children(".customelement:first"),"get"):d.value;G.onchange()});setTimeout(function(){B.data=b(r).val();G.onchange()},0)}});for(D=w=0;D<G.p.columns.length;D++){K=void 0===G.p.columns[D].search?!0:G.p.columns[D].search;var I=!0===G.p.columns[D].hidden;if(!0===G.p.columns[D].searchoptions.searchhidden&&K||K&&!I){K="",B.field===G.p.columns[D].name&&(K=" selected='selected'",w=D),E+="<option value='"+G.p.columns[D].name+"'"+K+">"+G.p.columns[D].label+"</option>"}}o.append(E);E=b("<td class='operators'></td>");x.append(E);z=f.columns[w];z.searchoptions.id=b.jgrid.randId();g&&"text"===z.inputtype&&!z.searchoptions.size&&(z.searchoptions.size=10);w=b.jgrid.createEl.call(F,z.inputtype,z.searchoptions,B.data,!0,G.p.ajaxSelectOptions||{},!0);if("nu"===B.op||"nn"===B.op){b(w).attr("readonly","true"),b(w).attr("disabled","true")}var H=b("<select class='selectopts'></select>");E.append(H);H.bind("change",function(){B.op=b(H).val();C=b(this).parents("tr:first");var d=b(".input-elm",C)[0];"nu"===B.op||"nn"===B.op?(B.data="","SELECT"!==d.tagName.toUpperCase()&&(d.value=""),d.setAttribute("readonly","true"),d.setAttribute("disabled","true")):("SELECT"===d.tagName.toUpperCase()&&(B.data=d.value),d.removeAttribute("readonly"),d.removeAttribute("disabled"));G.onchange()});A=z.searchoptions.sopt?z.searchoptions.sopt:G.p.sopt?G.p.sopt:-1!==b.inArray(z.searchtype,G.p.strarr)?G.p.stropts:G.p.numopts;E="";b.each(G.p.ops,function(){J.push(this.oper)});for(D=0;D<A.length;D++){n=b.inArray(A[D],J),-1!==n&&(K=B.op===G.p.ops[n].oper?" selected='selected'":"",E+="<option value='"+G.p.ops[n].oper+"'"+K+">"+G.p.ops[n].text+"</option>")}H.append(E);E=b("<td class='data'></td>");x.append(E);E.append(w);b.jgrid.bindEv.call(F,w,z.searchoptions);b(w).addClass("input-elm").bind("change",function(){B.data="custom"===z.inputtype?z.searchoptions.custom_value.call(F,b(this).children(".customelement:first"),"get"):b(this).val();G.onchange()});E=b("<td></td>");x.append(E);!0===this.p.ruleButtons&&(w=b("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),E.append(w),w.bind("click",function(){for(D=0;D<y.rules.length;D++){if(y.rules[D]===B){y.rules.splice(D,1);break}}G.reDraw();G.onchange();return !1}));return x};this.getStringForGroup=function(m){var o="(",l;if(void 0!==m.groups){for(l=0;l<m.groups.length;l++){1<o.length&&(o+=" "+m.groupOp+" ");try{o+=this.getStringForGroup(m.groups[l])}catch(p){alert(p)}}}if(void 0!==m.rules){try{for(l=0;l<m.rules.length;l++){1<o.length&&(o+=" "+m.groupOp+" "),o+=this.getStringForRule(m.rules[l])}}catch(n){alert(n)}}o+=")";return"()"===o?"":o};this.getStringForRule=function(p){var o="",n="",q,l;for(q=0;q<this.p.ops.length;q++){if(this.p.ops[q].oper===p.op){o=this.p.operands.hasOwnProperty(p.op)?this.p.operands[p.op]:"";n=this.p.ops[q].oper;break}}for(q=0;q<this.p.columns.length;q++){if(this.p.columns[q].name===p.field){l=this.p.columns[q];break}}if(void 0==l){return""}q=p.data;if("bw"===n||"bn"===n){q+="%"}if("ew"===n||"en"===n){q="%"+q}if("cn"===n||"nc"===n){q="%"+q+"%"}if("in"===n||"ni"===n){q=" ("+q+")"}f.errorcheck&&h(p.data,l);return -1!==b.inArray(l.searchtype,["int","integer","float","number","currency"])||"nn"===n||"nu"===n?p.field+" "+o+" "+q:p.field+" "+o+' "'+q+'"'};this.resetFilter=function(){this.p.filter=b.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){b("th.ui-state-error",this).html("");b("tr.error",this).hide()};this.showError=function(){b("th.ui-state-error",this).html(this.p.errmsg);b("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function l(d){var s="(",p;if(void 0!==d.groups){for(p=0;p<d.groups.length;p++){1<s.length&&(s="OR"===d.groupOp?s+" || ":s+" && "),s+=l(d.groups[p])}}if(void 0!==d.rules){for(p=0;p<d.rules.length;p++){1<s.length&&(s="OR"===d.groupOp?s+" || ":s+" && ");var q=d.rules[p];if(m.p.errorcheck){for(var o=void 0,r=void 0,o=0;o<m.p.columns.length;o++){if(m.p.columns[o].name===q.field){r=m.p.columns[o];break}}r&&h(q.data,r)}s+=q.op+"(item."+q.field+",'"+q.data+"')"}}s+=")";return"()"===s?"":s}var m=this;return l(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=!0}}})};b.extend(b.fn.jqFilter,{toSQLString:function(){var c="";this.each(function(){c=this.toUserFriendlyString()});return c},filterData:function(){var c;this.each(function(){c=this.p.filter});return c},getParameter:function(c){return void 0!==c&&this.p.hasOwnProperty(c)?this.p[c]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=b.jgrid.parse(a));this.each(function(){this.p.filter=a;this.reDraw();this.onchange()})}})})(jQuery);(function(b){b.jgrid.inlineEdit=b.jgrid.inlineEdit||{};b.jgrid.extend({editRow:function(u,s,v,k,o,i,a,q,r){var j={},t=b.makeArray(arguments).slice(1);"object"===b.type(t[0])?j=t[0]:(void 0!==s&&(j.keys=s),b.isFunction(v)&&(j.oneditfunc=v),b.isFunction(k)&&(j.successfunc=k),void 0!==o&&(j.url=o),void 0!==i&&(j.extraparam=i),b.isFunction(a)&&(j.aftersavefunc=a),b.isFunction(q)&&(j.errorfunc=q),b.isFunction(r)&&(j.afterrestorefunc=r));j=b.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},b.jgrid.inlineEdit,j);return this.each(function(){var A=this,y,z,B,x=0,w=null,m={},p,c;A.grid&&(p=b(A).jqGrid("getInd",u,!0),!1!==p&&(B=b.isFunction(j.beforeEditRow)?j.beforeEditRow.call(A,j,u):void 0,void 0===B&&(B=!0),B&&(B=b(p).attr("editable")||"0","0"!==B||b(p).hasClass("not-editable-row")||(c=A.p.colModel,b('td[role="gridcell"]',p).each(function(f){y=c[f].name;var g=!0===A.p.treeGrid&&y===A.p.ExpandColumn;if(g){z=b("span:first",this).html()}else{try{z=b.unformat.call(A,this,{rowId:u,colModel:c[f]},f)}catch(e){z=c[f].edittype&&"textarea"===c[f].edittype?b(this).text():b(this).html()}}if("cb"!==y&&"subgrid"!==y&&"rn"!==y&&(A.p.autoencode&&(z=b.jgrid.htmlDecode(z)),m[y]=z,!0===c[f].editable)){null===w&&(w=f);g?b("span:first",this).html(""):b(this).html("");var h=b.extend({},c[f].editoptions||{},{id:u+"_"+y,name:y});c[f].edittype||(c[f].edittype="text");if("&nbsp;"===z||"&#160;"===z||1===z.length&&160===z.charCodeAt(0)){z=""}var d=b.jgrid.createEl.call(A,c[f].edittype,h,z,!0,b.extend({},b.jgrid.ajaxOptions,A.p.ajaxSelectOptions||{}));b(d).addClass("editable");g?b("span:first",this).append(d):b(this).append(d);b.jgrid.bindEv.call(A,d,h);"select"===c[f].edittype&&void 0!==c[f].editoptions&&!0===c[f].editoptions.multiple&&void 0===c[f].editoptions.dataUrl&&b.jgrid.msie&&b(d).width(b(d).width());x++}}),0<x&&(m.id=u,A.p.savedRow.push(m),b(p).attr("editable","1"),setTimeout(function(){b("td:eq("+w+") input",p).focus()},0),!0===j.keys&&b(p).bind("keydown",function(d){if(27===d.keyCode){b(A).jqGrid("restoreRow",u,j.afterrestorefunc);if(A.p._inlinenav){try{b(A).jqGrid("showAddEditButtons")}catch(g){}}return !1}if(13===d.keyCode){if("TEXTAREA"===d.target.tagName){return !0}if(b(A).jqGrid("saveRow",u,j)&&A.p._inlinenav){try{b(A).jqGrid("showAddEditButtons")}catch(h){}}return !1}}),b(A).triggerHandler("jqGridInlineEditRow",[u,j]),b.isFunction(j.oneditfunc)&&j.oneditfunc.call(A,u))))))})},saveRow:function(Q,O,R,J,L,H,G){var M=b.makeArray(arguments).slice(1),N={};"object"===b.type(M[0])?N=M[0]:(b.isFunction(O)&&(N.successfunc=O),void 0!==R&&(N.url=R),void 0!==J&&(N.extraparam=J),b.isFunction(L)&&(N.aftersavefunc=L),b.isFunction(H)&&(N.errorfunc=H),b.isFunction(G)&&(N.afterrestorefunc=G));var N=b.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},b.jgrid.inlineEdit,N),I=!1,P=this[0],D,K={},i={},o={},j,a,x;if(!P.grid){return I}x=b(P).jqGrid("getInd",Q,!0);if(!1===x){return I}M=b.isFunction(N.beforeSaveRow)?N.beforeSaveRow.call(P,N,Q):void 0;void 0===M&&(M=!0);if(M){M=b(x).attr("editable");N.url=N.url||P.p.editurl;if("1"===M){var B;b('td[role="gridcell"]',x).each(function(k){B=P.p.colModel[k];D=B.name;if("cb"!==D&&"subgrid"!==D&&!0===B.editable&&"rn"!==D&&!b(this).hasClass("not-editable-cell")){switch(B.edittype){case"checkbox":var d=["Yes","No"];B.editoptions&&(d=B.editoptions.value.split(":"));K[D]=b("input",this).is(":checked")?d[0]:d[1];break;case"text":case"password":case"textarea":case"button":K[D]=b("input, textarea",this).val();break;case"select":if(B.editoptions.multiple){var d=b("select",this),h=[];K[D]=b(d).val();K[D]=K[D]?K[D].join(","):"";b("select option:selected",this).each(function(e,c){h[e]=b(c).text()});i[D]=h.join(",")}else{K[D]=b("select option:selected",this).val(),i[D]=b("select option:selected",this).text()}B.formatter&&"select"===B.formatter&&(i={});break;case"custom":try{if(B.editoptions&&b.isFunction(B.editoptions.custom_value)){if(K[D]=B.editoptions.custom_value.call(P,b(".customelement",this),"get"),void 0===K[D]){throw"e2"}}else{throw"e1"}}catch(f){"e1"===f&&b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.nodefined,b.jgrid.edit.bClose),"e2"===f?b.jgrid.info_dialog(b.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.novalue,b.jgrid.edit.bClose):b.jgrid.info_dialog(b.jgrid.errors.errcap,f.message,b.jgrid.edit.bClose)}}a=b.jgrid.checkValues.call(P,K[D],k);if(!1===a[0]){return !1}P.p.autoencode&&(K[D]=b.jgrid.htmlEncode(K[D]));"clientArray"!==N.url&&B.editoptions&&!0===B.editoptions.NullIfEmpty&&""===K[D]&&(o[D]="null")}});if(!1===a[0]){try{var E=b(P).jqGrid("getGridRowById",Q),C=b.jgrid.findPos(E);b.jgrid.info_dialog(b.jgrid.errors.errcap,a[1],b.jgrid.edit.bClose,{left:C[0],top:C[1]+b(E).outerHeight()})}catch(F){alert(a[1])}return I}M=P.p.prmNames;E=Q;C=!1===P.p.keyIndex?M.id:P.p.colModel[P.p.keyIndex+(!0===P.p.rownumbers?1:0)+(!0===P.p.multiselect?1:0)+(!0===P.p.subGrid?1:0)].name;K&&(K[M.oper]=M.editoper,void 0===K[C]||""===K[C]?K[C]=Q:x.id!==P.p.idPrefix+K[C]&&(M=b.jgrid.stripPref(P.p.idPrefix,Q),void 0!==P.p._index[M]&&(P.p._index[K[C]]=P.p._index[M],delete P.p._index[M]),Q=P.p.idPrefix+K[C],b(x).attr("id",Q),P.p.selrow===E&&(P.p.selrow=Q),b.isArray(P.p.selarrrow)&&(M=b.inArray(E,P.p.selarrrow),0<=M&&(P.p.selarrrow[M]=Q)),P.p.multiselect&&(M="jqg_"+P.p.id+"_"+Q,b("input.cbox",x).attr("id",M).attr("name",M))),void 0===P.p.inlineData&&(P.p.inlineData={}),K=b.extend({},K,P.p.inlineData,N.extraparam));if("clientArray"===N.url){K=b.extend({},K,i);P.p.autoencode&&b.each(K,function(e,c){K[e]=b.jgrid.htmlDecode(c)});M=b(P).jqGrid("setRowData",Q,K);b(x).attr("editable","0");for(C=0;C<P.p.savedRow.length;C++){if(String(P.p.savedRow[C].id)===String(E)){j=C;break}}0<=j&&P.p.savedRow.splice(j,1);b(P).triggerHandler("jqGridInlineAfterSaveRow",[Q,M,K,N]);b.isFunction(N.aftersavefunc)&&N.aftersavefunc.call(P,Q,M,N);I=!0;b(x).removeClass("jqgrid-new-row").unbind("keydown")}else{b("#lui_"+b.jgrid.jqID(P.p.id)).show(),o=b.extend({},K,o),o[C]=b.jgrid.stripPref(P.p.idPrefix,o[C]),b.ajax(b.extend({url:N.url,data:b.isFunction(P.p.serializeRowData)?P.p.serializeRowData.call(P,o):o,type:N.mtype,async:!1,complete:function(c,k){b("#lui_"+b.jgrid.jqID(P.p.id)).hide();if("success"===k){var f=!0,d;d=b(P).triggerHandler("jqGridInlineSuccessSaveRow",[c,Q,N]);b.isArray(d)||(d=[!0,K]);d[0]&&b.isFunction(N.successfunc)&&(d=N.successfunc.call(P,c));b.isArray(d)?(f=d[0],K=d[1]||K):f=d;if(!0===f){P.p.autoencode&&b.each(K,function(e,g){K[e]=b.jgrid.htmlDecode(g)});K=b.extend({},K,i);b(P).jqGrid("setRowData",Q,K);b(x).attr("editable","0");for(f=0;f<P.p.savedRow.length;f++){if(String(P.p.savedRow[f].id)===String(Q)){j=f;break}}0<=j&&P.p.savedRow.splice(j,1);b(P).triggerHandler("jqGridInlineAfterSaveRow",[Q,c,K,N]);b.isFunction(N.aftersavefunc)&&N.aftersavefunc.call(P,Q,c);I=!0;b(x).removeClass("jqgrid-new-row").unbind("keydown")}else{b(P).triggerHandler("jqGridInlineErrorSaveRow",[Q,c,k,null,N]),b.isFunction(N.errorfunc)&&N.errorfunc.call(P,Q,c,k,null),!0===N.restoreAfterError&&b(P).jqGrid("restoreRow",Q,N.afterrestorefunc)}}},error:function(c,k,f){b("#lui_"+b.jgrid.jqID(P.p.id)).hide();b(P).triggerHandler("jqGridInlineErrorSaveRow",[Q,c,k,f,N]);if(b.isFunction(N.errorfunc)){N.errorfunc.call(P,Q,c,k,f)}else{c=c.responseText||c.statusText;try{b.jgrid.info_dialog(b.jgrid.errors.errcap,'<div class="ui-state-error">'+c+"</div>",b.jgrid.edit.bClose,{buttonalign:"right"})}catch(d){alert(c)}}!0===N.restoreAfterError&&b(P).jqGrid("restoreRow",Q,N.afterrestorefunc)}},b.jgrid.ajaxOptions,P.p.ajaxRowOptions||{}))}}return I}},restoreRow:function(g,f){var a=b.makeArray(arguments).slice(1),d={};"object"===b.type(a[0])?d=a[0]:b.isFunction(f)&&(d.afterrestorefunc=f);d=b.extend(!0,{},b.jgrid.inlineEdit,d);return this.each(function(){var h=this,l=-1,k,i={},j;if(h.grid&&(k=b(h).jqGrid("getInd",g,!0),!1!==k&&(j=b.isFunction(d.beforeCancelRow)?d.beforeCancelRow.call(h,d,sr):void 0,void 0===j&&(j=!0),j))){for(j=0;j<h.p.savedRow.length;j++){if(String(h.p.savedRow[j].id)===String(g)){l=j;break}}if(0<=l){if(b.isFunction(b.fn.datepicker)){try{b("input.hasDatepicker","#"+b.jgrid.jqID(k.id)).datepicker("hide")}catch(c){}}b.each(h.p.colModel,function(){!0===this.editable&&h.p.savedRow[l].hasOwnProperty(this.name)&&(i[this.name]=h.p.savedRow[l][this.name])});b(h).jqGrid("setRowData",g,i);b(k).attr("editable","0").unbind("keydown");h.p.savedRow.splice(l,1);b("#"+b.jgrid.jqID(g),"#"+b.jgrid.jqID(h.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){b(h).jqGrid("delRowData",g);b(h).jqGrid("showAddEditButtons")},0)}b(h).triggerHandler("jqGridInlineAfterRestoreRow",[g]);b.isFunction(d.afterrestorefunc)&&d.afterrestorefunc.call(h,g)}})},addRow:function(a){a=b.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},a||{});return this.each(function(){if(this.grid){var d=this,c=b.isFunction(a.beforeAddRow)?a.beforeAddRow.call(d,a.addRowParams):void 0;void 0===c&&(c=!0);c&&(a.rowID=b.isFunction(a.rowID)?a.rowID.call(d,a):null!=a.rowID?a.rowID:b.jgrid.randId(),!0===a.useDefValues&&b(d.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue,e=b.isFunction(e)?e.call(d):e;a.initdata[this.name]=e}}),b(d).jqGrid("addRowData",a.rowID,a.initdata,a.position),a.rowID=d.p.idPrefix+a.rowID,b("#"+b.jgrid.jqID(a.rowID),"#"+b.jgrid.jqID(d.p.id)).addClass("jqgrid-new-row"),a.useFormatter?b("#"+b.jgrid.jqID(a.rowID)+" .ui-inline-edit","#"+b.jgrid.jqID(d.p.id)).click():(c=d.p.prmNames,a.addRowParams.extraparam[c.oper]=c.addoper,b(d).jqGrid("editRow",a.rowID,a.addRowParams),b(d).jqGrid("setSelection",a.rowID)))}})},inlineNav:function(d,a){a=b.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},b.jgrid.nav,a||{});return this.each(function(){if(this.grid){var c=this,e,f=b.jgrid.jqID(c.p.id);c.p._inlinenav=!0;if(!0===a.addParams.useFormatter){var i=c.p.colModel,g;for(g=0;g<i.length;g++){if(i[g].formatter&&"actions"===i[g].formatter){i[g].formatoptions&&(i=b.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},i[g].formatoptions),a.addParams.addRowParams={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:i.afterSave,errorfunc:i.onError,afterrestorefunc:i.afterRestore});break}}}a.add&&b(c).jqGrid("navButtonAdd",d,{caption:a.addtext,title:a.addtitle,buttonicon:a.addicon,id:c.p.id+"_iladd",onClickButton:function(){b(c).jqGrid("addRow",a.addParams);a.addParams.useFormatter||(b("#"+f+"_ilsave").removeClass("ui-state-disabled"),b("#"+f+"_ilcancel").removeClass("ui-state-disabled"),b("#"+f+"_iladd").addClass("ui-state-disabled"),b("#"+f+"_iledit").addClass("ui-state-disabled"))}});a.edit&&b(c).jqGrid("navButtonAdd",d,{caption:a.edittext,title:a.edittitle,buttonicon:a.editicon,id:c.p.id+"_iledit",onClickButton:function(){var h=b(c).jqGrid("getGridParam","selrow");h?(b(c).jqGrid("editRow",h,a.editParams),b("#"+f+"_ilsave").removeClass("ui-state-disabled"),b("#"+f+"_ilcancel").removeClass("ui-state-disabled"),b("#"+f+"_iladd").addClass("ui-state-disabled"),b("#"+f+"_iledit").addClass("ui-state-disabled")):(b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),b("#jqg_alrt").focus())}});a.save&&(b(c).jqGrid("navButtonAdd",d,{caption:a.savetext||"",title:a.savetitle||"Save row",buttonicon:a.saveicon,id:c.p.id+"_ilsave",onClickButton:function(){var l=c.p.savedRow[0].id;if(l){var j=c.p.prmNames,h=j.oper,k=a.editParams;b("#"+b.jgrid.jqID(l),"#"+f).hasClass("jqgrid-new-row")?(a.addParams.addRowParams.extraparam[h]=j.addoper,k=a.addParams.addRowParams):(a.editParams.extraparam||(a.editParams.extraparam={}),a.editParams.extraparam[h]=j.editoper);b(c).jqGrid("saveRow",l,k)&&b(c).jqGrid("showAddEditButtons")}else{b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),b("#jqg_alrt").focus()}}}),b("#"+f+"_ilsave").addClass("ui-state-disabled"));a.cancel&&(b(c).jqGrid("navButtonAdd",d,{caption:a.canceltext||"",title:a.canceltitle||"Cancel row editing",buttonicon:a.cancelicon,id:c.p.id+"_ilcancel",onClickButton:function(){var j=c.p.savedRow[0].id,h=a.editParams;j?(b("#"+b.jgrid.jqID(j),"#"+f).hasClass("jqgrid-new-row")&&(h=a.addParams.addRowParams),b(c).jqGrid("restoreRow",j,h),b(c).jqGrid("showAddEditButtons")):(b.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),b("#jqg_alrt").focus())}}),b("#"+f+"_ilcancel").addClass("ui-state-disabled"));!0===a.restoreAfterSelect&&(e=b.isFunction(c.p.beforeSelectRow)?c.p.beforeSelectRow:!1,c.p.beforeSelectRow=function(l,k){var j=!0;0<c.p.savedRow.length&&!0===c.p._inlinenav&&l!==c.p.selrow&&null!==c.p.selrow&&(c.p.selrow===a.addParams.rowID?b(c).jqGrid("delRowData",c.p.selrow):b(c).jqGrid("restoreRow",c.p.selrow,a.editParams),b(c).jqGrid("showAddEditButtons"));e&&(j=e.call(c,l,k));return j})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var a=b.jgrid.jqID(this.p.id);b("#"+a+"_ilsave").addClass("ui-state-disabled");b("#"+a+"_ilcancel").addClass("ui-state-disabled");b("#"+a+"_iladd").removeClass("ui-state-disabled");b("#"+a+"_iledit").removeClass("ui-state-disabled")}})}})})(jQuery);(function(a){a.jgrid.extend({editCell:function(e,c,b){return this.each(function(){var r=this,n,p,j,i;if(r.grid&&!0===r.p.cellEdit){c=parseInt(c,10);r.p.selrow=r.rows[e].id;r.p.knv||a(r).jqGrid("GridNav");if(0<r.p.savedRow.length){if(!0===b&&e==r.p.iRow&&c==r.p.iCol){return}a(r).jqGrid("saveCell",r.p.savedRow[0].id,r.p.savedRow[0].ic)}else{window.setTimeout(function(){a("#"+a.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}i=r.p.colModel[c];n=i.name;if("subgrid"!==n&&"cb"!==n&&"rn"!==n){j=a("td:eq("+c+")",r.rows[e]);if(!0!==i.editable||!0!==b||j.hasClass("not-editable-cell")){0<=parseInt(r.p.iCol,10)&&0<=parseInt(r.p.iRow,10)&&(a("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover")),j.addClass("edit-cell ui-state-highlight"),a(r.rows[e]).addClass("selected-row ui-state-hover"),p=j.html().replace(/\&#160\;/ig,""),a(r).triggerHandler("jqGridSelectCell",[r.rows[e].id,n,p,e,c]),a.isFunction(r.p.onSelectCell)&&r.p.onSelectCell.call(r,r.rows[e].id,n,p,e,c)}else{0<=parseInt(r.p.iCol,10)&&0<=parseInt(r.p.iRow,10)&&(a("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover"));a(j).addClass("edit-cell ui-state-highlight");a(r.rows[e]).addClass("selected-row ui-state-hover");try{p=a.unformat.call(r,j,{rowId:r.rows[e].id,colModel:i},c)}catch(d){p=i.edittype&&"textarea"===i.edittype?a(j).text():a(j).html()}r.p.autoencode&&(p=a.jgrid.htmlDecode(p));i.edittype||(i.edittype="text");r.p.savedRow.push({id:e,ic:c,name:n,v:p});if("&nbsp;"===p||"&#160;"===p||1===p.length&&160===p.charCodeAt(0)){p=""}if(a.isFunction(r.p.formatCell)){var f=r.p.formatCell.call(r,r.rows[e].id,n,p,e,c);void 0!==f&&(p=f)}a(r).triggerHandler("jqGridBeforeEditCell",[r.rows[e].id,n,p,e,c]);a.isFunction(r.p.beforeEditCell)&&r.p.beforeEditCell.call(r,r.rows[e].id,n,p,e,c);var f=a.extend({},i.editoptions||{},{id:e+"_"+n,name:n}),o=a.jgrid.createEl.call(r,i.edittype,f,p,!0,a.extend({},a.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));a(j).html("").append(o).attr("tabindex","0");a.jgrid.bindEv.call(r,o,f);window.setTimeout(function(){a(o).focus()},0);a("input, select, textarea",j).bind("keydown",function(g){27===g.keyCode&&(0<a("input.hasDatepicker",j).length?a(".ui-datepicker").is(":hidden")?a(r).jqGrid("restoreCell",e,c):a("input.hasDatepicker",j).datepicker("hide"):a(r).jqGrid("restoreCell",e,c));if(13===g.keyCode){return a(r).jqGrid("saveCell",e,c),!1}if(9===g.keyCode){if(r.grid.hDiv.loading){return !1}g.shiftKey?a(r).jqGrid("prevCell",e,c):a(r).jqGrid("nextCell",e,c)}g.stopPropagation()});a(r).triggerHandler("jqGridAfterEditCell",[r.rows[e].id,n,p,e,c]);a.isFunction(r.p.afterEditCell)&&r.p.afterEditCell.call(r,r.rows[e].id,n,p,e,c)}r.p.iCol=c;r.p.iRow=e}}})},saveCell:function(c,b){return this.each(function(){var B=this,A;if(B.grid&&!0===B.p.cellEdit){A=1<=B.p.savedRow.length?0:null;if(null!==A){var y=a("td:eq("+b+")",B.rows[c]),z,x,w=B.p.colModel[b],o=w.name,v=a.jgrid.jqID(o);switch(w.edittype){case"select":if(w.editoptions.multiple){var v=a("#"+c+"_"+v,B.rows[c]),f=[];(z=a(v).val())?z.join(","):z="";a("option:selected",v).each(function(e,g){f[e]=a(g).text()});x=f.join(",")}else{z=a("#"+c+"_"+v+" option:selected",B.rows[c]).val(),x=a("#"+c+"_"+v+" option:selected",B.rows[c]).text()}w.formatter&&(x=z);break;case"checkbox":var j=["Yes","No"];w.editoptions&&(j=w.editoptions.value.split(":"));x=z=a("#"+c+"_"+v,B.rows[c]).is(":checked")?j[0]:j[1];break;case"password":case"text":case"textarea":case"button":x=z=a("#"+c+"_"+v,B.rows[c]).val();break;case"custom":try{if(w.editoptions&&a.isFunction(w.editoptions.custom_value)){z=w.editoptions.custom_value.call(B,a(".customelement",y),"get");if(void 0===z){throw"e2"}x=z}else{throw"e1"}}catch(d){"e1"===d&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===d?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,d.message,a.jgrid.edit.bClose)}}if(x!==B.p.savedRow[A].v){if(A=a(B).triggerHandler("jqGridBeforeSaveCell",[B.rows[c].id,o,z,c,b])){x=z=A}a.isFunction(B.p.beforeSaveCell)&&(A=B.p.beforeSaveCell.call(B,B.rows[c].id,o,z,c,b))&&(x=z=A);var E=a.jgrid.checkValues.call(B,z,b);if(!0===E[0]){A=a(B).triggerHandler("jqGridBeforeSubmitCell",[B.rows[c].id,o,z,c,b])||{};a.isFunction(B.p.beforeSubmitCell)&&((A=B.p.beforeSubmitCell.call(B,B.rows[c].id,o,z,c,b))||(A={}));0<a("input.hasDatepicker",y).length&&a("input.hasDatepicker",y).datepicker("hide");if("remote"===B.p.cellsubmit){if(B.p.cellurl){var i={};B.p.autoencode&&(z=a.jgrid.htmlEncode(z));i[o]=z;j=B.p.prmNames;w=j.id;v=j.oper;i[w]=a.jgrid.stripPref(B.p.idPrefix,B.rows[c].id);i[v]=j.editoper;i=a.extend(A,i);a("#lui_"+a.jgrid.jqID(B.p.id)).show();B.grid.hDiv.loading=!0;a.ajax(a.extend({url:B.p.cellurl,data:a.isFunction(B.p.serializeCellData)?B.p.serializeCellData.call(B,i):i,type:"POST",complete:function(h,g){a("#lui_"+B.p.id).hide();B.grid.hDiv.loading=!1;if("success"===g){var e=a(B).triggerHandler("jqGridAfterSubmitCell",[B,h,i.id,o,z,c,b])||[!0,""];!0===e[0]&&a.isFunction(B.p.afterSubmitCell)&&(e=B.p.afterSubmitCell.call(B,h,i.id,o,z,c,b));!0===e[0]?(a(y).empty(),a(B).jqGrid("setCell",B.rows[c].id,b,x,!1,!1,!0),a(y).addClass("dirty-cell"),a(B.rows[c]).addClass("edited"),a(B).triggerHandler("jqGridAfterSaveCell",[B.rows[c].id,o,z,c,b]),a.isFunction(B.p.afterSaveCell)&&B.p.afterSaveCell.call(B,B.rows[c].id,o,z,c,b),B.p.savedRow.splice(0,1)):(a.jgrid.info_dialog(a.jgrid.errors.errcap,e[1],a.jgrid.edit.bClose),a(B).jqGrid("restoreCell",c,b))}},error:function(l,k,g){a("#lui_"+a.jgrid.jqID(B.p.id)).hide();B.grid.hDiv.loading=!1;a(B).triggerHandler("jqGridErrorCell",[l,k,g]);a.isFunction(B.p.errorCell)?B.p.errorCell.call(B,l,k,g):a.jgrid.info_dialog(a.jgrid.errors.errcap,l.status+" : "+l.statusText+"<br/>"+k,a.jgrid.edit.bClose);a(B).jqGrid("restoreCell",c,b)}},a.jgrid.ajaxOptions,B.p.ajaxCellOptions||{}))}else{try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose),a(B).jqGrid("restoreCell",c,b)}catch(D){}}}"clientArray"===B.p.cellsubmit&&(a(y).empty(),a(B).jqGrid("setCell",B.rows[c].id,b,x,!1,!1,!0),a(y).addClass("dirty-cell"),a(B.rows[c]).addClass("edited"),a(B).triggerHandler("jqGridAfterSaveCell",[B.rows[c].id,o,z,c,b]),a.isFunction(B.p.afterSaveCell)&&B.p.afterSaveCell.call(B,B.rows[c].id,o,z,c,b),B.p.savedRow.splice(0,1))}else{try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,z+" "+E[1],a.jgrid.edit.bClose)},100),a(B).jqGrid("restoreCell",c,b)}catch(C){}}}else{a(B).jqGrid("restoreCell",c,b)}}window.setTimeout(function(){a("#"+a.jgrid.jqID(B.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(c,b){return this.each(function(){var d=this,i;if(d.grid&&!0===d.p.cellEdit){i=1<=d.p.savedRow.length?0:null;if(null!==i){var f=a("td:eq("+b+")",d.rows[c]);if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker",f).datepicker("hide")}catch(h){}}a(f).empty().attr("tabindex","-1");a(d).jqGrid("setCell",d.rows[c].id,b,d.p.savedRow[i].v,!1,!1,!0);a(d).triggerHandler("jqGridAfterRestoreCell",[d.rows[c].id,d.p.savedRow[i].v,c,b]);a.isFunction(d.p.afterRestoreCell)&&d.p.afterRestoreCell.call(d,d.rows[c].id,d.p.savedRow[i].v,c,b);d.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+d.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(c,b){return this.each(function(){var d=!1,e;if(this.grid&&!0===this.p.cellEdit){for(e=b+1;e<this.p.colModel.length;e++){if(!0===this.p.colModel[e].editable){d=e;break}}!1!==d?a(this).jqGrid("editCell",c,d,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,b)}})},prevCell:function(c,b){return this.each(function(){var d=!1,e;if(this.grid&&!0===this.p.cellEdit){for(e=b-1;0<=e;e--){if(!0===this.p.colModel[e].editable){d=e;break}}!1!==d?a(this).jqGrid("editCell",c,d,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,b)}})},GridNav:function(){return this.each(function(){function k(u,s,q){if("v"===q.substr(0,1)){var p=a(b.grid.bDiv)[0].clientHeight,o=a(b.grid.bDiv)[0].scrollTop,t=b.rows[u].offsetTop+b.rows[u].clientHeight,m=b.rows[u].offsetTop;"vd"===q&&t>=p&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop+b.rows[u].clientHeight);"vu"===q&&m<o&&(a(b.grid.bDiv)[0].scrollTop=a(b.grid.bDiv)[0].scrollTop-b.rows[u].clientHeight)}"h"===q&&(q=a(b.grid.bDiv)[0].clientWidth,p=a(b.grid.bDiv)[0].scrollLeft,o=b.rows[u].cells[s].offsetLeft,b.rows[u].cells[s].offsetLeft+b.rows[u].cells[s].clientWidth>=q+parseInt(p,10)?a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft+b.rows[u].cells[s].clientWidth:o<p&&(a(b.grid.bDiv)[0].scrollLeft=a(b.grid.bDiv)[0].scrollLeft-b.rows[u].cells[s].clientWidth))}function i(f,n){var m,g;if("lft"===n){for(m=f+1,g=f;0<=g;g--){if(!0!==b.p.colModel[g].hidden){m=g;break}}}if("rgt"===n){for(m=f-1,g=f;g<b.p.colModel.length;g++){if(!0!==b.p.colModel[g].hidden){m=g;break}}}return m}var b=this;if(b.grid&&!0===b.p.cellEdit){b.p.knv=b.p.id+"_kn";var l=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+b.p.knv+"'></div></div>"),h,j;a(l).insertBefore(b.grid.cDiv);a("#"+b.p.knv).focus().keydown(function(d){j=d.keyCode;"rtl"===b.p.direction&&(37===j?j=39:39===j&&(j=37));switch(j){case 38:0<b.p.iRow-1&&(k(b.p.iRow-1,b.p.iCol,"vu"),a(b).jqGrid("editCell",b.p.iRow-1,b.p.iCol,!1));break;case 40:b.p.iRow+1<=b.rows.length-1&&(k(b.p.iRow+1,b.p.iCol,"vd"),a(b).jqGrid("editCell",b.p.iRow+1,b.p.iCol,!1));break;case 37:0<=b.p.iCol-1&&(h=i(b.p.iCol-1,"lft"),k(b.p.iRow,h,"h"),a(b).jqGrid("editCell",b.p.iRow,h,!1));break;case 39:b.p.iCol+1<=b.p.colModel.length-1&&(h=i(b.p.iCol+1,"rgt"),k(b.p.iRow,h,"h"),a(b).jqGrid("editCell",b.p.iRow,h,!1));break;case 13:0<=parseInt(b.p.iCol,10)&&0<=parseInt(b.p.iRow,10)&&a(b).jqGrid("editCell",b.p.iRow,b.p.iCol,!0);break;default:return !0}return !1})}})},getChangedCells:function(c){var b=[];c||(c="all");this.each(function(){var d=this,e;d.grid&&!0===d.p.cellEdit&&a(d.rows).each(function(f){var h={};a(this).hasClass("edited")&&(a("td",this).each(function(j){e=d.p.colModel[j].name;if("cb"!==e&&"subgrid"!==e){if("dirty"===c){if(a(this).hasClass("dirty-cell")){try{h[e]=a.unformat.call(d,this,{rowId:d.rows[f].id,colModel:d.p.colModel[j]},j)}catch(i){h[e]=a.jgrid.htmlDecode(a(this).html())}}}else{try{h[e]=a.unformat.call(d,this,{rowId:d.rows[f].id,colModel:d.p.colModel[j]},j)}catch(g){h[e]=a.jgrid.htmlDecode(a(this).html())}}}}),h.id=this.id,b.push(h))})});return b}})})(jQuery);(function(j){j.fn.jqm=function(c){var d={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:i,ajaxText:"",target:i,modal:i,toTop:i,onShow:i,onHide:i,onLoad:i};return this.each(function(){if(this._jqm){return h[this._jqm].c=j.extend({},h[this._jqm].c,c)}f++;this._jqm=f;h[f]={c:j.extend(d,j.jqm.params,c),a:i,w:j(this).addClass("jqmID"+f),s:f};d.trigger&&j(this).jqmAddTrigger(d.trigger)})};j.fn.jqmAddClose=function(c){return a(this,c,"jqmHide")};j.fn.jqmAddTrigger=function(c){return a(this,c,"jqmShow")};j.fn.jqmShow=function(c){return this.each(function(){j.jqm.open(this._jqm,c)})};j.fn.jqmHide=function(c){return this.each(function(){j.jqm.close(this._jqm,c)})};j.jqm={hash:{},open:function(d,l){var c=h[d],p=c.c,m="."+p.closeClass,o=parseInt(c.w.css("z-index")),o=0<o?o:3000,n=j("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":o-1,opacity:p.overlay/100});if(c.a){return i}c.t=l;c.a=!0;c.w.css("z-index",o);p.modal?(g[0]||setTimeout(function(){k("bind")},1),g.push(d)):0<p.overlay?p.closeoverlay&&c.w.jqmAddClose(n):n=i;c.o=n?n.addClass(p.overlayClass).prependTo("body"):i;p.ajax?(o=p.target||c.w,n=p.ajax,o="string"==typeof o?j(o,c.w):j(o),n="@"==n.substr(0,1)?j(l).attr(n.substring(1)):n,o.html(p.ajaxText).load(n,function(){p.onLoad&&p.onLoad.call(this,c);m&&c.w.jqmAddClose(j(m,c.w));e(c)})):m&&c.w.jqmAddClose(j(m,c.w));p.toTop&&c.o&&c.w.before('<span id="jqmP'+c.w[0]._jqm+'"></span>').insertAfter(c.o);p.onShow?p.onShow(c):c.w.show();e(c);return i},close:function(c){c=h[c];if(!c.a){return i}c.a=i;g[0]&&(g.pop(),g[0]||k("unbind"));c.c.toTop&&c.o&&j("#jqmP"+c.w[0]._jqm).after(c.w).remove();if(c.c.onHide){c.c.onHide(c)}else{c.w.hide(),c.o&&c.o.remove()}return i},params:{}};var f=0,h=j.jqm.hash,g=[],i=!1,e=function(c){try{j(":input:visible",c.w)[0].focus()}catch(l){}},k=function(c){j(document)[c]("keypress",b)[c]("keydown",b)[c]("mousedown",b)},b=function(l){var m=h[g[g.length-1]],c=!j(l.target).parents(".jqmID"+m.s)[0];c&&(j(".jqmID"+m.s).each(function(){var o=j(this),n=o.offset();if(n.top<=l.pageY&&l.pageY<=n.top+o.height()&&n.left<=l.pageX&&l.pageX<=n.left+o.width()){return c=!1}}),e(m));return !c},a=function(d,l,c){return d.each(function(){var m=this._jqm;j(l).each(function(){this[c]||(this[c]=[],j(this).click(function(){for(var o in {jqmShow:1,jqmHide:1}){for(var n in this[o]){if(h[this[o][n]]){h[this[o][n]].w[o](this)}}}return i}));this[c].push(m)})})}})(jQuery);(function(r){r.fn.jqDrag=function(b){return j(this,b,"d")};r.fn.jqResize=function(d,c){return j(this,d,"r",c)};r.jqDnR={dnr:{},e:0,drag:function(b){"d"==p.k?o.css({left:p.X+b.pageX-p.pX,top:p.Y+b.pageY-p.pY}):(o.css({width:Math.max(b.pageX-p.pX+p.W,0),height:Math.max(b.pageY-p.pY+p.H,0)}),n&&k.css({width:Math.max(b.pageX-n.pX+n.W,0),height:Math.max(b.pageY-n.pY+n.H,0)}));return !1},stop:function(){r(document).unbind("mousemove",q.drag).unbind("mouseup",q.stop)}};var q=r.jqDnR,p=q.dnr,o=q.e,k,n,j=function(b,f,d,e){return b.each(function(){f=f?r(f,b):b;f.bind("mousedown",{e:b,k:d},function(g){var t=g.data,l={};o=t.e;k=e?r(e):!1;if("relative"!=o.css("position")){try{o.position(l)}catch(m){}}p={X:l.left||i("left")||0,Y:l.top||i("top")||0,W:i("width")||o[0].scrollWidth||0,H:i("height")||o[0].scrollHeight||0,pX:g.pageX,pY:g.pageY,k:t.k};n=k&&"d"!=t.k?{X:l.left||a("left")||0,Y:l.top||a("top")||0,W:k[0].offsetWidth||a("width")||0,H:k[0].offsetHeight||a("height")||0,pX:g.pageX,pY:g.pageY,k:t.k}:!1;if(r("input.hasDatepicker",o[0])[0]){try{r("input.hasDatepicker",o[0]).datepicker("hide")}catch(s){}}r(document).mousemove(r.jqDnR.drag).mouseup(r.jqDnR.stop);return !1})})},i=function(b){return parseInt(o.css(b),10)||!1},a=function(b){return parseInt(k.css(b),10)||!1}})(jQuery);(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,e;this.p.subGridOptions=a.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});b=this.p.subGridModel;if(b[0]){for(b[0].align=a.extend([],b[0].align||[]),e=0;e<b[0].name.length;e++){b[0].align[e]=b[0].align[e]||"left"}}})},addSubGridCell:function(d,h){var e="",f,g;this.each(function(){e=this.formatCol(d,h);g=this.p.id;f=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+g+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e+"><a style='cursor:pointer;'><span class='ui-icon "+f+"'></span></a></td>"},addSubGrid:function(b,e){return this.each(function(){var w=this;if(w.grid){var f=function(m,l,g){l=a("<td align='"+w.p.subGridModel[0].align[g]+"'></td>").html(l);a(m).append(l)},h=function(s,r){var m,p,q,n=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=a("<tr></tr>");for(p=0;p<w.p.subGridModel[0].name.length;p++){m=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+w.p.direction+"'></th>"),a(m).html(w.p.subGridModel[0].name[p]),a(m).width(w.p.subGridModel[0].width[p]),a(l).append(m)}a(n).append(l);s&&(q=w.p.xmlReader.subgrid,a(q.root+" "+q.row,s).each(function(){l=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===q.repeatitems){a(q.cell,this).each(function(t){f(l,a(this).text()||"&#160;",t)})}else{var g=w.p.subGridModel[0].mapping||w.p.subGridModel[0].name;if(g){for(p=0;p<g.length;p++){f(l,a(g[p],this).text()||"&#160;",p)}}}a(n).append(l)}));m=a("table:first",w.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(m+r)).append(n);w.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(w.p.id)).hide();return !1},c=function(D,C){var t,v,B,u,s,q=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),r=a("<tr></tr>");for(v=0;v<w.p.subGridModel[0].name.length;v++){t=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+w.p.direction+"'></th>"),a(t).html(w.p.subGridModel[0].name[v]),a(t).width(w.p.subGridModel[0].width[v]),a(r).append(t)}a(q).append(r);if(D&&(u=w.p.jsonReader.subgrid,t=a.jgrid.getAccessor(D,u.root),void 0!==t)){for(v=0;v<t.length;v++){B=t[v];r=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===u.repeatitems){for(u.cell&&(B=B[u.cell]),s=0;s<B.length;s++){f(r,B[s]||"&#160;",s)}}else{var p=w.p.subGridModel[0].mapping||w.p.subGridModel[0].name;if(p.length){for(s=0;s<p.length;s++){f(r,B[p[s]]||"&#160;",s)}}}a(q).append(r)}}v=a("table:first",w.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(v+C)).append(q);w.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(w.p.id)).hide();return !1},x=function(q){var n,p,m,l;n=a(q).attr("id");p={nd_:(new Date).getTime()};p[w.p.prmNames.subgridid]=n;if(!w.p.subGridModel[0]){return !1}if(w.p.subGridModel[0].params){for(l=0;l<w.p.subGridModel[0].params.length;l++){for(m=0;m<w.p.colModel.length;m++){w.p.colModel[m].name===w.p.subGridModel[0].params[l]&&(p[w.p.colModel[m].name]=a("td:eq("+m+")",q).text().replace(/\&#160\;/ig,""))}}}if(!w.grid.hDiv.loading){switch(w.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(w.p.id)).show(),w.p.subgridtype||(w.p.subgridtype=w.p.datatype),a.isFunction(w.p.subgridtype)?w.p.subgridtype.call(w,p):w.p.subgridtype=w.p.subgridtype.toLowerCase(),w.p.subgridtype){case"xml":case"json":a.ajax(a.extend({type:w.p.mtype,url:w.p.subGridUrl,dataType:w.p.subgridtype,data:a.isFunction(w.p.serializeSubGridData)?w.p.serializeSubGridData.call(w,p):p,complete:function(g){"xml"===w.p.subgridtype?h(g.responseXML,n):c(a.jgrid.parse(g.responseText),n)}},a.jgrid.ajaxOptions,w.p.ajaxSubgridOptions||{}))}}return !1},o,i,A,z=0,k,j;a.each(w.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||z++});var y=w.rows.length,d=1;void 0!==e&&0<e&&(d=e,y=e+1);for(;d<y;){a(w.rows[d]).hasClass("jqgrow")&&a(w.rows[d].cells[b]).bind("click",function(){var g=a(this).parent("tr")[0];j=g.nextSibling;if(a(this).hasClass("sgcollapsed")){i=w.p.id;o=g.id;if(!0===w.p.subGridOptions.reloadOnExpand||!1===w.p.subGridOptions.reloadOnExpand&&!a(j).hasClass("ui-subgrid")){A=1<=b?"<td colspan='"+b+"'>&#160;</td>":"";k=a(w).triggerHandler("jqGridSubGridBeforeExpand",[i+"_"+o,o]);(k=!1===k||"stop"===k?!1:!0)&&a.isFunction(w.p.subGridBeforeExpand)&&(k=w.p.subGridBeforeExpand.call(w,i+"_"+o,o));if(!1===k){return !1}a(g).after("<tr role='row' class='ui-subgrid'>"+A+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+w.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(w.p.colNames.length-1-z,10)+"' class='ui-widget-content subgrid-data'><div id="+i+"_"+o+" class='tablediv'></div></td></tr>");a(w).triggerHandler("jqGridSubGridRowExpanded",[i+"_"+o,o]);a.isFunction(w.p.subGridRowExpanded)?w.p.subGridRowExpanded.call(w,i+"_"+o,o):x(g)}else{a(j).show()}a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+w.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");w.p.subGridOptions.selectOnExpand&&a(w).jqGrid("setSelection",o)}else{if(a(this).hasClass("sgexpanded")){k=a(w).triggerHandler("jqGridSubGridRowColapsed",[i+"_"+o,o]);k=!1===k||"stop"===k?!1:!0;o=g.id;k&&a.isFunction(w.p.subGridRowColapsed)&&(k=w.p.subGridRowColapsed.call(w,i+"_"+o,o));if(!1===k){return !1}!0===w.p.subGridOptions.reloadOnExpand?a(j).remove(".ui-subgrid"):a(j).hasClass("ui-subgrid")&&a(j).hide();a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+w.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");w.p.subGridOptions.selectOnCollapse&&a(w).jqGrid("setSelection",o)}}return !1}),d++}!0===w.p.subGridOptions.expandOnLoad&&a(w.rows).filter(".jqgrow").each(function(g,l){a(l.cells[0]).click()});w.subGridXml=function(l,g){h(l,g)};w.subGridJson=function(l,g){c(l,g)}}})},expandSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",b,!0);d&&(d=a("td.sgcollapsed",d)[0])&&a(d).trigger("click")}})},collapseSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var d=a(this).jqGrid("getInd",b,!0);d&&(d=a("td.sgexpanded",d)[0])&&a(d).trigger("click")}})},toggleSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",b,!0);if(e){var d=a("td.sgcollapsed",e)[0];d?a(d).trigger("click"):(d=a("td.sgexpanded",e)[0])&&a(d).trigger("click")}}})}})})(jQuery);(function(a){a.extend(a.jgrid,{template:function(d){var f=a.makeArray(arguments).slice(1),e,g=f.length;null==d&&(d="");return d.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(h,c){if(!isNaN(parseInt(c,10))){return f[parseInt(c,10)]}for(e=0;e<g;e++){if(a.isArray(f[e])){for(var j=f[e],i=j.length;i--;){if(c===j[i].nm){return j[i].v}}}}})}});a.jgrid.extend({groupingSetup:function(){return this.each(function(){var d,f,e=this.p.colModel,g=this.p.groupingView;if(null===g||"object"!==typeof g&&!a.isFunction(g)){this.p.grouping=!1}else{if(g.groupField.length){void 0===g.visibiltyOnNextGrouping&&(g.visibiltyOnNextGrouping=[]);g.lastvalues=[];g._locgr||(g.groups=[]);g.counters=[];for(d=0;d<g.groupField.length;d++){g.groupOrder[d]||(g.groupOrder[d]="asc"),g.groupText[d]||(g.groupText[d]="{0}"),"boolean"!==typeof g.groupColumnShow[d]&&(g.groupColumnShow[d]=!0),"boolean"!==typeof g.groupSummary[d]&&(g.groupSummary[d]=!1),g.groupSummaryPos[d]||(g.groupSummaryPos[d]="footer"),!0===g.groupColumnShow[d]?(g.visibiltyOnNextGrouping[d]=!0,a(this).jqGrid("showCol",g.groupField[d])):(g.visibiltyOnNextGrouping[d]=a("#"+a.jgrid.jqID(this.p.id+"_"+g.groupField[d])).is(":visible"),a(this).jqGrid("hideCol",g.groupField[d]))}g.summary=[];g.hideFirstGroupCol&&(g.formatDisplayField[0]=function(b){return b});d=0;for(f=e.length;d<f;d++){g.hideFirstGroupCol&&!e[d].hidden&&g.groupField[0]===e[d].name&&(e[d].formatter=function(){return""}),e[d].summaryType&&(e[d].summaryDivider?g.summary.push({nm:e[d].name,st:e[d].summaryType,v:"",sd:e[d].summaryDivider,vd:"",sr:e[d].summaryRound,srt:e[d].summaryRoundType||"round"}):g.summary.push({nm:e[d].name,st:e[d].summaryType,v:"",sr:e[d].summaryRound,srt:e[d].summaryRoundType||"round"}))}}else{this.p.grouping=!1}}})},groupingPrepare:function(c,d){this.each(function(){var i=this.p.groupingView,q=this,k,b=i.groupField.length,o,l,j,n=0;for(k=0;k<b;k++){o=i.groupField[k],j=i.displayField[k],l=c[o],j=null==j?null:c[j],null==j&&(j=l),void 0!==l&&(0===d?(i.groups.push({idx:k,dataIndex:o,value:l,displayValue:j,startRow:d,cnt:1,summary:[]}),i.lastvalues[k]=l,i.counters[k]={cnt:1,pos:i.groups.length-1,summary:a.extend(!0,[],i.summary)}):"object"===typeof l||(a.isArray(i.isInTheSameGroup)&&a.isFunction(i.isInTheSameGroup[k])?i.isInTheSameGroup[k].call(q,i.lastvalues[k],l,k,i):i.lastvalues[k]===l)?1===n?(i.groups.push({idx:k,dataIndex:o,value:l,displayValue:j,startRow:d,cnt:1,summary:[]}),i.lastvalues[k]=l,i.counters[k]={cnt:1,pos:i.groups.length-1,summary:a.extend(!0,[],i.summary)}):(i.counters[k].cnt+=1,i.groups[i.counters[k].pos].cnt=i.counters[k].cnt):(i.groups.push({idx:k,dataIndex:o,value:l,displayValue:j,startRow:d,cnt:1,summary:[]}),i.lastvalues[k]=l,n=1,i.counters[k]={cnt:1,pos:i.groups.length-1,summary:a.extend(!0,[],i.summary)}),a.each(i.counters[k].summary,function(){a.isFunction(this.st)?this.v=this.st.call(q,this.v,this.nm,c):(this.v=a(q).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=a(q).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,c)))}),i.groups[i.counters[k].pos].summary=i.counters[k].summary)}});return this},groupingToggle:function(c){this.each(function(){var o=this.p.groupingView,x=c.split("_"),w=parseInt(x[x.length-2],10);x.splice(x.length-2,2);var t=x.join("_"),x=o.minusicon,l=o.plusicon,v=a("#"+a.jgrid.jqID(c)),v=v.length?v[0].nextSibling:null,u=a("#"+a.jgrid.jqID(c)+" span.tree-wrap-"+this.p.direction),s=function(e){e=a.map(e.split(" "),function(f){if(f.substring(0,t.length+1)===t+"_"){return parseInt(f.substring(t.length+1),10)}});return 0<e.length?e[0]:void 0},i,b=!1,d=this.p.frozenColumns?this.p.id+"_frozen":!1,j=d?a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(d)):!1,j=j&&j.length?j[0].nextSibling:null;if(u.hasClass(x)){if(o.showSummaryOnHide){if(v){for(;v&&!(a(v).hasClass("jqfoot")&&parseInt(a(v).attr("jqfootlevel"),10)<=w);){a(v).hide(),v=v.nextSibling,d&&(a(j).hide(),j=j.nextSibling)}}}else{if(v){for(;v;){o=s(v.className);if(void 0!==o&&o<=w){break}a(v).hide();v=v.nextSibling;d&&(a(j).hide(),j=j.nextSibling)}}}u.removeClass(x).addClass(l);b=!0}else{if(v){for(i=void 0;v;){o=s(v.className);void 0===i&&(i=void 0===o);if(void 0!==o){if(o<=w){break}o===w+1&&(a(v).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(x).addClass(l),d&&a(j).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(x).addClass(l))}else{i&&(a(v).show(),d&&a(j).show())}v=v.nextSibling;d&&(j=j.nextSibling)}}u.removeClass(l).addClass(x)}a(this).triggerHandler("jqGridGroupingClickGroup",[c,b]);a.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,c,b)});return !1},groupingRender:function(d,f,e,g){return this.each(function(){function s(m,h,q){var p=!1;if(0===h){p=q[m]}else{var n=q[m].idx;if(0===n){p=q[m]}else{for(;0<=m;m--){if(q[m].idx===n-h){p=q[m];break}}}}return p}function l(J,I,H,G){var F=s(J,I,H),E=v.p.colModel,A,y=F.cnt;J="";var z;for(z=G;z<f;z++){var x="<td "+v.formatCol(z,1,"")+">&#160;</td>",K="{0}";a.each(F.summary,function(){if(this.nm===E[z].name){E[z].summaryTpl&&(K=E[z].summaryTpl);"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v/=this.vd:this.v&&0<y&&(this.v/=y));try{this.groupCount=F.cnt,this.groupIndex=F.dataIndex,this.groupValue=F.value,A=v.formatter("",this.v,z,this)}catch(h){A=this.v}x="<td "+v.formatCol(z,1,"")+">"+a.jgrid.format(K,A)+"</td>";return !1}});J+=x}return J}var v=this,u=v.p.groupingView,o="",i="",b,c,k=u.groupCollapse?u.plusicon:u.minusicon,D,B=[],w=u.groupField.length,k=k+(" tree-wrap-"+v.p.direction);a.each(v.p.colModel,function(m,h){var n;for(n=0;n<w;n++){if(u.groupField[n]===h.name){B[n]=m;break}}});var C=0,j=a.makeArray(u.groupSummary);j.reverse();a.each(u.groups,function(r,m){if(u._locgr&&!(m.startRow+m.cnt>(e-1)*g&&m.startRow<e*g)){return !0}C++;c=v.p.id+"ghead_"+m.idx;b=c+"_"+r;i="<span style='cursor:pointer;' class='ui-icon "+k+"' onclick=\"jQuery('#"+a.jgrid.jqID(v.p.id)+"').jqGrid('groupingToggle','"+b+"');return false;\"></span>";try{a.isArray(u.formatDisplayField)&&a.isFunction(u.formatDisplayField[m.idx])?(m.displayValue=u.formatDisplayField[m.idx].call(v,m.displayValue,m.value,v.p.colModel[B[m.idx]],m.idx,u),D=m.displayValue):D=v.formatter(b,m.displayValue,B[m.idx],m.value)}catch(t){D=m.displayValue}"header"===u.groupSummaryPos[m.idx]?(o+='<tr id="'+b+'"'+(u.groupCollapse&&0<m.idx?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+v.p.direction+" "+c+'"><td style="padding-left:'+12*m.idx+'px;">'+i+a.jgrid.template(u.groupText[m.idx],D,m.cnt,m.summary)+"</td>",o+=l(r,m.idx-1,u.groups,1),o+="</tr>"):o+='<tr id="'+b+'"'+(u.groupCollapse&&0<m.idx?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+v.p.direction+" "+c+'"><td style="padding-left:'+12*m.idx+'px;" colspan="'+f+'">'+i+a.jgrid.template(u.groupText[m.idx],D,m.cnt,m.summary)+"</td></tr>";if(w-1===m.idx){var q=u.groups[r+1],n,p=0;n=m.startRow;var x=void 0!==q?u.groups[r+1].startRow:d.length;u._locgr&&(p=(e-1)*g,p>m.startRow&&(n=p));for(;n<x&&d[n-p];n++){o+=d[n-p].join("")}if("header"!==u.groupSummaryPos[m.idx]){var h;if(void 0!==q){for(h=0;h<u.groupField.length&&q.dataIndex!==u.groupField[h];h++){}C=u.groupField.length-h}for(q=0;q<C;q++){j[q]&&(p="",u.groupCollapse&&!u.showSummaryOnHide&&(p=' style="display:none;"'),o+="<tr"+p+' jqfootlevel="'+(m.idx-q)+'" role="row" class="ui-widget-content jqfoot ui-row-'+v.p.direction+'">',o+=l(r,q,u.groups,0),o+="</tr>")}C=h}}});a("#"+a.jgrid.jqID(v.p.id)+" tbody:first").append(o);o=null})},groupingGroupBy:function(c,d){return this.each(function(){"string"===typeof c&&(c=[c]);var b=this.p.groupingView;this.p.grouping=!0;void 0===b.visibiltyOnNextGrouping&&(b.visibiltyOnNextGrouping=[]);var e;for(e=0;e<b.groupField.length;e++){!b.groupColumnShow[e]&&b.visibiltyOnNextGrouping[e]&&a(this).jqGrid("showCol",b.groupField[e])}for(e=0;e<c.length;e++){b.visibiltyOnNextGrouping[e]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(c[e])).is(":visible")}this.p.groupingView=a.extend(this.p.groupingView,d||{});b.groupField=c;a(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){void 0===c&&(c=!0);this.p.grouping=!1;if(!0===c){var d=this.p.groupingView,b;for(b=0;b<d.groupField.length;b++){!d.groupColumnShow[b]&&d.visibiltyOnNextGrouping[b]&&a(this).jqGrid("showCol",d.groupField)}a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(this.p.id)+" tbody:first").remove();a("tr.jqgrow:hidden","#"+a.jgrid.jqID(this.p.id)+" tbody:first").show()}else{a(this).trigger("reloadGrid")}})},groupingCalculations:{handler:function(h,l,i,n,j,f){var k={sum:function(){return parseFloat(l||0)+parseFloat(f[i]||0)},min:function(){return""===l?parseFloat(f[i]||0):Math.min(parseFloat(l),parseFloat(f[i]||0))},max:function(){return""===l?parseFloat(f[i]||0):Math.max(parseFloat(l),parseFloat(f[i]||0))},count:function(){""===l&&(l=0);return f.hasOwnProperty(i)?l+1:0},avg:function(){return k.sum()}};if(!k[h]){throw"jqGrid Grouping No such method: "+h}h=k[h]();null!=n&&("fixed"===j?h=h.toFixed(n):(n=Math.pow(10,n),h=Math.round(h*n)/n));return h}}})})(jQuery);(function(a){a.jgrid.extend({setTreeNode:function(d,e){return this.each(function(){var w=this;if(w.grid&&w.p.treeGrid){for(var s=w.p.expColInd,v=w.p.treeReader.expanded_field,r=w.p.treeReader.leaf_field,t=w.p.treeReader.level_field,u=w.p.treeReader.icon_field,i=w.p.treeReader.loaded,j,c,b,o;d<e;){o=a.jgrid.stripPref(w.p.idPrefix,w.rows[d].id),o=w.p.data[w.p._index[o]],"nested"!==w.p.treeGridModel||o[r]||(j=parseInt(o[w.p.treeReader.left_field],10),c=parseInt(o[w.p.treeReader.right_field],10),o[r]=c===j+1?"true":"false",w.rows[d].cells[w.p._treeleafpos].innerHTML=o[r]),j=parseInt(o[t],10),0===w.p.tree_root_level?(b=j+1,c=j):(b=j,c=j-1),b="<div class='tree-wrap tree-wrap-"+w.p.direction+"' style='width:"+18*b+"px;'>",b+="<div style='"+("rtl"===w.p.direction?"right:":"left:")+18*c+"px;' class='ui-icon ",void 0!==o[i]&&(o[i]="true"===o[i]||!0===o[i]?!0:!1),"true"===o[r]||!0===o[r]?(b+=(void 0!==o[u]&&""!==o[u]?o[u]:w.p.treeIcons.leaf)+" tree-leaf treeclick",o[r]=!0,c="leaf"):(o[r]=!1,c=""),o[v]=("true"===o[v]||!0===o[v]?!0:!1)&&(o[i]||void 0===o[i]),b=!1===o[v]?b+(!0===o[r]?"'":w.p.treeIcons.plus+" tree-plus treeclick'"):b+(!0===o[r]?"'":w.p.treeIcons.minus+" tree-minus treeclick'"),b+="></div></div>",a(w.rows[d].cells[s]).wrapInner("<span class='cell-wrapper"+c+"'></span>").prepend(b),j!==parseInt(w.p.tree_root_level,10)&&((o=(o=a(w).jqGrid("getNodeParent",o))&&o.hasOwnProperty(v)?o[v]:!0)||a(w.rows[d]).css("display","none")),a(w.rows[d].cells[s]).find("div.treeclick").bind("click",function(f){f=a.jgrid.stripPref(w.p.idPrefix,a(f.target||f.srcElement,w.rows).closest("tr.jqgrow")[0].id);f=w.p._index[f];w.p.data[f][r]||(w.p.data[f][v]?(a(w).jqGrid("collapseRow",w.p.data[f]),a(w).jqGrid("collapseNode",w.p.data[f])):(a(w).jqGrid("expandRow",w.p.data[f]),a(w).jqGrid("expandNode",w.p.data[f])));return !1}),!0===w.p.ExpandColClick&&a(w.rows[d].cells[s]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(f){f=a.jgrid.stripPref(w.p.idPrefix,a(f.target||f.srcElement,w.rows).closest("tr.jqgrow")[0].id);var g=w.p._index[f];w.p.data[g][r]||(w.p.data[g][v]?(a(w).jqGrid("collapseRow",w.p.data[g]),a(w).jqGrid("collapseNode",w.p.data[g])):(a(w).jqGrid("expandRow",w.p.data[g]),a(w).jqGrid("expandNode",w.p.data[g])));a(w).jqGrid("setSelection",f);return !1}),d++}}})},setTreeGrid:function(){return this.each(function(){var d=this,n=0,f,j=!1,m,i,l=[];if(d.p.treeGrid){d.p.treedatatype||a.extend(d.p,{treedatatype:d.p.datatype});d.p.subGrid=!1;d.p.altRows=!1;d.p.pgbuttons=!1;d.p.pginput=!1;d.p.gridview=!0;null===d.p.rowTotal&&(d.p.rowNum=10000);d.p.multiselect=!1;d.p.rowList=[];d.p.expColInd=0;f="ui-icon-triangle-1-"+("rtl"===d.p.direction?"w":"e");d.p.treeIcons=a.extend({plus:f,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},d.p.treeIcons||{});"nested"===d.p.treeGridModel?d.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader):"adjacency"===d.p.treeGridModel&&(d.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},d.p.treeReader));for(m in d.p.colModel){if(d.p.colModel.hasOwnProperty(m)){for(i in f=d.p.colModel[m].name,f!==d.p.ExpandColumn||j||(j=!0,d.p.expColInd=n),n++,d.p.treeReader){d.p.treeReader.hasOwnProperty(i)&&d.p.treeReader[i]===f&&l.push(f)}}}a.each(d.p.treeReader,function(b,c){c&&-1===a.inArray(c,l)&&("leaf_field"===b&&(d.p._treeleafpos=n),n++,d.p.colNames.push(c),d.p.colModel.push({name:c,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(c){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var b=a(e).jqGrid("getNodeChildren",c),d=e.p.treeReader.expanded_field;a(b).each(function(){var f=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",f)).css("display","");this[d]&&a(e).jqGrid("expandRow",this)})}})},collapseRow:function(c){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var b=a(e).jqGrid("getNodeChildren",c),d=e.p.treeReader.expanded_field;a(b).each(function(){var f=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",f)).css("display","none");this[d]&&a(e).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var c=[];this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){switch(e.p.treeGridModel){case"nested":var b=e.p.treeReader.level_field;a(e.p.data).each(function(){parseInt(this[b],10)===parseInt(e.p.tree_root_level,10)&&c.push(this)});break;case"adjacency":var d=e.p.treeReader.parent_id_field;a(e.p.data).each(function(){null!==this[d]&&"null"!==String(this[d]).toLowerCase()||c.push(this)})}}});return c},getNodeDepth:function(d){var e=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":e=parseInt(d[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":e=a(this).jqGrid("getNodeAncestors",d).length}}});return e},getNodeParent:function(d){var e=null;this.each(function(){var s=this;if(s.grid&&s.p.treeGrid){switch(s.p.treeGridModel){case"nested":var l=s.p.treeReader.left_field,r=s.p.treeReader.right_field,j=s.p.treeReader.level_field,o=parseInt(d[l],10),q=parseInt(d[r],10),c=parseInt(d[j],10);a(this.p.data).each(function(){if(parseInt(this[j],10)===c-1&&parseInt(this[l],10)<o&&parseInt(this[r],10)>q){return e=this,!1}});break;case"adjacency":var i=s.p.treeReader.parent_id_field,b=s.p.localReader.id;a(this.p.data).each(function(){if(this[b]===a.jgrid.stripPref(s.p.idPrefix,d[i])){return e=this,!1}})}}});return e},getNodeChildren:function(d){var e=[];this.each(function(){var s=this;if(s.grid&&s.p.treeGrid){switch(s.p.treeGridModel){case"nested":var l=s.p.treeReader.left_field,r=s.p.treeReader.right_field,j=s.p.treeReader.level_field,o=parseInt(d[l],10),q=parseInt(d[r],10),c=parseInt(d[j],10);a(this.p.data).each(function(){parseInt(this[j],10)===c+1&&parseInt(this[l],10)>o&&parseInt(this[r],10)<q&&e.push(this)});break;case"adjacency":var i=s.p.treeReader.parent_id_field,b=s.p.localReader.id;a(this.p.data).each(function(){this[i]==a.jgrid.stripPref(s.p.idPrefix,d[b])&&e.push(this)})}}});return e},getFullTreeNode:function(d){var e=[];this.each(function(){var u=this,o;if(u.grid&&u.p.treeGrid){switch(u.p.treeGridModel){case"nested":var t=u.p.treeReader.left_field,l=u.p.treeReader.right_field,r=u.p.treeReader.level_field,s=parseInt(d[t],10),i=parseInt(d[l],10),j=parseInt(d[r],10);a(this.p.data).each(function(){parseInt(this[r],10)>=j&&parseInt(this[t],10)>=s&&parseInt(this[t],10)<=i&&e.push(this)});break;case"adjacency":if(d){e.push(d);var c=u.p.treeReader.parent_id_field,b=u.p.localReader.id;a(this.p.data).each(function(f){o=e.length;for(f=0;f<o;f++){if(a.jgrid.stripPref(u.p.idPrefix,e[f][b])===this[c]){e.push(this);break}}})}}}});return e},getNodeAncestors:function(d){var e=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var b=a(this).jqGrid("getNodeParent",d);b;){e.push(b),b=a(this).jqGrid("getNodeParent",b)}}});return e},isVisibleNode:function(d){var e=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var b=a(this).jqGrid("getNodeAncestors",d),c=this.p.treeReader.expanded_field;a(b).each(function(){e=e&&this[c];if(!e){return !1}})}});return e},isNodeLoaded:function(d){var e;this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.leaf_field,c=this.p.treeReader.loaded;e=void 0!==d?void 0!==d[c]?d[c]:d[b]||0<a(this).jqGrid("getNodeChildren",d).length?!0:!1:!1}});return e},expandNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var q=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,j=this.p.treeReader.loaded,p=this.p.treeReader.level_field,i=this.p.treeReader.left_field,l=this.p.treeReader.right_field;if(!c[q]){var o=a.jgrid.getAccessor(c,this.p.localReader.id),b=a("#"+this.p.idPrefix+a.jgrid.jqID(o),this.grid.bDiv)[0],d=this.p._index[o];a(this).jqGrid("isNodeLoaded",this.p.data[d])?(c[q]=!0,a("div.treeclick",b).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(c[q]=!0,a("div.treeclick",b).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=b.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:o,n_left:c[i],n_right:c[l],n_level:c[p]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:o,parentid:c[r],n_level:c[p]}}),a(this).trigger("reloadGrid"),c[j]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(c){return this.each(function(){if(this.grid&&this.p.treeGrid){var b=this.p.treeReader.expanded_field;c[b]&&(c[b]=!1,b=a.jgrid.getAccessor(c,this.p.localReader.id),b=a("#"+this.p.idPrefix+a.jgrid.jqID(b),this.grid.bDiv)[0],a("div.treeclick",b).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(d,g,e,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var j,c,h,i=[],l=this,b;j=a(this).jqGrid("getRootNodes");j=a.jgrid.from(j);j.orderBy(d,g,e,f);b=j.select();j=0;for(c=b.length;j<c;j++){h=b[j],i.push(h),a(this).jqGrid("collectChildrenSortTree",i,h,d,g,e,f)}a.each(i,function(m){var k=a.jgrid.getAccessor(this,l.p.localReader.id);a("#"+a.jgrid.jqID(l.p.id)+" tbody tr:eq("+m+")").after(a("tr#"+a.jgrid.jqID(k),l.grid.bDiv))});i=b=j=null}})},collectChildrenSortTree:function(d,l,f,i,j,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var c,e,h,b;c=a(this).jqGrid("getNodeChildren",l);c=a.jgrid.from(c);c.orderBy(f,i,j,g);b=c.select();c=0;for(e=b.length;c<e;c++){h=b[c],d.push(h),a(this).jqGrid("collectChildrenSortTree",d,h,f,i,j,g)}}})},setTreeRow:function(d,f){var e=!1;this.each(function(){this.grid&&this.p.treeGrid&&(e=a(this).jqGrid("setRowData",d,f))});return e},delTreeNode:function(c){return this.each(function(){var p=this.p.localReader.id,b,i=this.p.treeReader.left_field,m=this.p.treeReader.right_field,d,j,l;if(this.grid&&this.p.treeGrid&&(b=this.p._index[c],void 0!==b)){d=parseInt(this.p.data[b][m],10);j=d-parseInt(this.p.data[b][i],10)+1;var o=a(this).jqGrid("getFullTreeNode",this.p.data[b]);if(0<o.length){for(b=0;b<o.length;b++){a(this).jqGrid("delRowData",o[b][p])}}if("nested"===this.p.treeGridModel){p=a.jgrid.from(this.p.data).greater(i,d,{stype:"integer"}).select();if(p.length){for(l in p){p.hasOwnProperty(l)&&(p[l][i]=parseInt(p[l][i],10)-j)}}p=a.jgrid.from(this.p.data).greater(m,d,{stype:"integer"}).select();if(p.length){for(l in p){p.hasOwnProperty(l)&&(p[l][m]=parseInt(p[l][m],10)-j)}}}}})},addChildNode:function(O,N,P,J){var M=this[0];if(P){var I=M.p.treeReader.expanded_field,K=M.p.treeReader.leaf_field,L=M.p.treeReader.level_field,F=M.p.treeReader.parent_id_field,G=M.p.treeReader.left_field,E=M.p.treeReader.right_field,D=M.p.treeReader.loaded,H,z,A,j,B;H=0;var o=N,i;void 0===J&&(J=!1);if(void 0===O||null===O){B=M.p.data.length-1;if(0<=B){for(;0<=B;){H=Math.max(H,parseInt(M.p.data[B][M.p.localReader.id],10)),B--}}O=H+1}var d=a(M).jqGrid("getInd",N);i=!1;void 0===N||null===N||""===N?(o=N=null,H="last",j=M.p.tree_root_level,B=M.p.data.length+1):(H="after",z=M.p._index[N],A=M.p.data[z],N=A[M.p.localReader.id],j=parseInt(A[L],10)+1,B=a(M).jqGrid("getFullTreeNode",A),B.length?(o=B=B[B.length-1][M.p.localReader.id],B=a(M).jqGrid("getInd",o)+1):B=a(M).jqGrid("getInd",N)+1,A[K]&&(i=!0,A[I]=!0,a(M.rows[d]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(M.p.treeIcons.leaf+" tree-leaf").addClass(M.p.treeIcons.minus+" tree-minus"),M.p.data[z][K]=!1,A[D]=!0));z=B+1;void 0===P[I]&&(P[I]=!1);void 0===P[D]&&(P[D]=!1);P[L]=j;void 0===P[K]&&(P[K]=!0);"adjacency"===M.p.treeGridModel&&(P[F]=N);if("nested"===M.p.treeGridModel){var C;if(null!==N){K=parseInt(A[E],10);L=a.jgrid.from(M.p.data);L=L.greaterOrEquals(E,K,{stype:"integer"});L=L.select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][G]=L[C][G]>K?parseInt(L[C][G],10)+2:L[C][G],L[C][E]=L[C][E]>=K?parseInt(L[C][E],10)+2:L[C][E])}}P[G]=K;P[E]=K+1}else{K=parseInt(a(M).jqGrid("getCol",E,!1,"max"),10);L=a.jgrid.from(M.p.data).greater(G,K,{stype:"integer"}).select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][G]=parseInt(L[C][G],10)+2)}}L=a.jgrid.from(M.p.data).greater(E,K,{stype:"integer"}).select();if(L.length){for(C in L){L.hasOwnProperty(C)&&(L[C][E]=parseInt(L[C][E],10)+2)}}P[G]=K+1;P[E]=K+2}}if(null===N||a(M).jqGrid("isNodeLoaded",A)||i){a(M).jqGrid("addRowData",O,P,H,o),a(M).jqGrid("setTreeNode",B,z)}A&&!A[I]&&J&&a(M.rows[d]).find("div.treeclick").click()}}})})(jQuery);(function(b){function a(j,k){var f,i,c=[],g;if(!this||"function"!==typeof j||j instanceof RegExp){throw new TypeError}g=this.length;for(f=0;f<g;f++){if(this.hasOwnProperty(f)&&(i=this[f],j.call(k,i,f,this))){c.push(i);break}}return c}b.assocArraySize=function(e){var f=0,c;for(c in e){e.hasOwnProperty(c)&&f++}return f};b.jgrid.extend({pivotSetup:function(g,i){var j=[],l=[],p=[],d=[],o={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},k=[],m=b.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},i||{});this.each(function(){function R(s,t,n){s=a.call(s,t,n);return 0<s.length?s[0]:null}function f(x,n){var u=0,t=!0,s;for(s in x){if(x[s]!=this[u]){t=!1;break}u++;if(u>=this.length){break}}t&&(N=n);return t}function I(ae,ag,ac,aa){var ab=ag.length,af,Z,ad,Y;Y=b.isArray(ac)?ac.length:1;d=[];for(ad=d.root=0;ad<Y;ad++){var K=[],X;for(af=0;af<ab;af++){if(null==ac){X=Z=b.trim(ag[af].member)+"_"+ag[af].aggregator}else{X=ac[ad].replace(/\s+/g,"");try{Z=1===ab?X:X+"_"+ag[af].aggregator+"_"+af}catch(D){}}var F=aa,E=Z,A=K,z=Z,B=aa[Z],J=ag[af].member,H=ae,G=void 0;switch(ag[af].aggregator){case"sum":G=parseFloat(B||0)+parseFloat(H[J]||0);break;case"count":if(""===B||null==B){B=0}G=H.hasOwnProperty(J)?B+1:0;break;case"min":G=""===B||null==B?parseFloat(H[J]||0):Math.min(parseFloat(B),parseFloat(H[J]||0));break;case"max":G=""===B||null==B?parseFloat(H[J]||0):Math.max(parseFloat(B),parseFloat(H[J]||0))}F[E]=A[z]=G}d[X]=K}return aa}function r(s){var y,n,u,t,x;for(u in s){if(s.hasOwnProperty(u)){if("object"!==typeof s[u]&&("level"===u&&(void 0===w[s.level]&&(w[s.level]="",0<s.level&&"_r_Totals"!==s.text&&(k[s.level-1]={useColSpanStyle:!1,groupHeaders:[]})),w[s.level]!==s.text&&s.children.length&&"_r_Totals"!==s.text&&0<s.level&&(k[s.level-1].groupHeaders.push({titleText:s.text}),n=k[s.level-1].groupHeaders.length,x=1===n?c:v+(n-1)*e,k[s.level-1].groupHeaders[n-1].startColumnName=j[x].name,k[s.level-1].groupHeaders[n-1].numberOfColumns=j.length-x,v=j.length),w[s.level]=s.text),s.level===T&&"level"===u&&0<T)){if(1<e){n=1;for(y in s.fields){1===n&&k[T-1].groupHeaders.push({startColumnName:y,numberOfColumns:1,titleText:s.text}),n++}k[T-1].groupHeaders[k[T-1].groupHeaders.length-1].numberOfColumns=n-1}else{k.splice(T-1,1)}}null!=s[u]&&"object"===typeof s[u]&&r(s[u]);if("level"===u&&0<s.level){for(y in n=0,s.fields){x={};for(t in m.aggregates[n]){if(m.aggregates[n].hasOwnProperty(t)){switch(t){case"member":case"label":case"aggregator":break;default:x[t]=m.aggregates[n][t]}}}1<e?(x.name=y,x.label=m.aggregates[n].label||y):(x.name=s.text,x.label="_r_Totals"===s.text?m.rowTotalsText:s.text);j.push(x);n++}}}}}var S,N,W,h=g.length,M,T,e,U,Q=0;m.rowTotals&&0<m.yDimension.length&&(m.yDimension.splice(0,0,{dataName:m.yDimension[0].dataName}),m.yDimension[0].converter=function(){return"_r_Totals"});M=b.isArray(m.xDimension)?m.xDimension.length:0;T=m.yDimension.length;e=b.isArray(m.aggregates)?m.aggregates.length:0;if(0===M||0===e){throw"xDimension or aggregates optiona are not set!"}var q;for(W=0;W<M;W++){q={name:m.xDimension[W].dataName,frozen:m.frozenStaticCols},q=b.extend(!0,q,m.xDimension[W]),j.push(q)}q=M-1;for(var P={};Q<h;){S=g[Q];var L=[],C=[];U={};W=0;do{L[W]=b.trim(S[m.xDimension[W].dataName]),U[m.xDimension[W].dataName]=L[W],W++}while(W<M);var V=0;N=-1;W=R(l,f,L);if(!W){V=0;if(1<=T){for(V=0;V<T;V++){C[V]=b.trim(S[m.yDimension[V].dataName]),m.yDimension[V].converter&&b.isFunction(m.yDimension[V].converter)&&(C[V]=m.yDimension[V].converter.call(this,C[V],L,C))}U=I(S,m.aggregates,C,U)}else{0===T&&(U=I(S,m.aggregates,null,U))}l.push(U)}else{if(0<=N){V=0;if(1<=T){for(V=0;V<T;V++){C[V]=b.trim(S[m.yDimension[V].dataName]),m.yDimension[V].converter&&b.isFunction(m.yDimension[V].converter)&&(C[V]=m.yDimension[V].converter.call(this,C[V],L,C))}W=I(S,m.aggregates,C,W)}else{0===T&&(W=I(S,m.aggregates,null,W))}l[N]=W}}S=0;var L=U=null,O;for(O in d){if(0===S){P.children&&void 0!==P.children||(P={text:O,level:0,children:[]}),U=P.children}else{L=null;for(W=0;W<U.length;W++){if(U[W].text===O){L=U[W];break}}L?U=L.children:(U.push({children:[],text:O,level:S,fields:d[O]}),U=U[U.length-1].children)}S++}Q++}var w=[],v=j.length,c=v;0<T&&(k[T-1]={useColSpanStyle:!1,groupHeaders:[]});r(P,0);if(m.colTotals){for(Q=l.length;Q--;){for(W=M;W<j.length;W++){h=j[W].name,p[h]=p[h]?p[h]+parseFloat(l[Q][h]||0):parseFloat(l[Q][h]||0)}}}if(0<q){for(W=0;W<q;W++){o.groupingView.groupField[W]=j[W].name,o.groupingView.groupSummary[W]=m.groupSummary,o.groupingView.groupSummaryPos[W]=m.groupSummaryPos}}else{o.grouping=!1}o.sortname=j[q].name;o.groupingView.hideFirstGroupCol=!0});return{colModel:j,rows:l,groupOptions:o,groupHeaders:k,summary:p}},jqPivot:function(d,g,c,f){return this.each(function(){function e(i){var j=jQuery(h).jqGrid("pivotSetup",i,g),l=0<b.assocArraySize(j.summary)?!0:!1,k=b.jgrid.from(j.rows);for(i=0;i<j.groupOptions.groupingView.groupField.length;i++){k.orderBy(j.groupOptions.groupingView.groupField[i],"a","text","")}jQuery(h).jqGrid(b.extend({datastr:b.extend(k.select(),l?{userdata:j.summary}:{}),datatype:"jsonstring",footerrow:l,userDataOnFooter:l,colModel:j.colModel,viewrecords:!0,sortname:g.xDimension[0].dataName},c||{},j.groupOptions));j=j.groupHeaders;if(j.length){for(i=0;i<j.length;i++){j[i]&&j[i].groupHeaders.length&&jQuery(h).jqGrid("setGroupHeaders",j[i])}}g.frozenStaticCols&&jQuery(h).jqGrid("setFrozenColumns")}var h=this;"string"===typeof d?b.ajax(b.extend({url:d,dataType:"json",success:function(i){e(b.jgrid.getAccessor(i,f&&f.reader?f.reader:"rows"))}},f||{})):e(d)})}})})(jQuery);(function(a){a.jgrid.extend({jqGridImport:function(b){b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{});return this.each(function(){var i=this,h=function(j,d){var n=a(d.xmlGrid.config,j)[0],k=a(d.xmlGrid.data,j)[0],m,l;if(xmlJsonClass.xml2json&&a.jgrid.parse){n=xmlJsonClass.xml2json(n," ");n=a.jgrid.parse(n);for(l in n){n.hasOwnProperty(l)&&(m=n[l])}k?(k=n.grid.datatype,n.grid.datatype="xmlstring",n.grid.datastr=j,a(i).jqGrid(m).jqGrid("setGridParam",{datatype:k})):a(i).jqGrid(m)}else{alert("xml2json or parse are not present")}},c=function(j,d){if(j&&"string"===typeof j){var m=!1;a.jgrid.useJSON&&(a.jgrid.useJSON=!1,m=!0);var l=a.jgrid.parse(j);m&&(a.jgrid.useJSON=!0);m=l[d.jsonGrid.config];if(l=l[d.jsonGrid.data]){var k=m.datatype;m.datatype="jsonstring";m.datastr=l;a(i).jqGrid(m).jqGrid("setGridParam",{datatype:k})}else{a(i).jqGrid(m)}}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(d,f){"success"===f&&(h(d.responseXML,b),a(i).triggerHandler("jqGridImportComplete",[d,b]),a.isFunction(b.importComplete)&&b.importComplete(d))}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&"string"===typeof b.impstring){var e=a.parseXML(b.impstring);e&&(h(e,b),a(i).triggerHandler("jqGridImportComplete",[e,b]),a.isFunction(b.importComplete)&&b.importComplete(e),b.impstring=null);e=null}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(j){try{c(j.responseText,b),a(i).triggerHandler("jqGridImportComplete",[j,b]),a.isFunction(b.importComplete)&&b.importComplete(j)}catch(d){}}},b.ajaxOptions));break;case"jsonstring":b.impstring&&"string"===typeof b.impstring&&(c(b.impstring,b),a(i).triggerHandler("jqGridImportComplete",[b.impstring,b]),a.isFunction(b.importComplete)&&b.importComplete(b.impstring),b.impstring=null)}})},jqGridExport:function(b){b=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},b||{});var c=null;this.each(function(){if(this.grid){var e,d=a.extend(!0,{},a(this).jqGrid("getGridParam"));d.rownumbers&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.multiselect&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.subGrid&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.knv=null;if(d.treeGrid){for(e in d.treeReader){d.treeReader.hasOwnProperty(e)&&(d.colNames.splice(d.colNames.length-1),d.colModel.splice(d.colModel.length-1))}}switch(b.exptype){case"xmlstring":c="<"+b.root+">"+xmlJsonClass.json2xml(d,b.ident)+"</"+b.root+">";break;case"jsonstring":c="{"+xmlJsonClass.toJson(d,b.root,b.ident,!1)+"}",void 0!==d.postData.filters&&(c=c.replace(/filters":"/,'filters":'),c=c.replace(/}]}"/,"}]}"))}}});return c},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{});return this.each(function(){if(this.grid){var c;"remote"===b.exptype&&(c=a.extend({},this.p.postData),c[b.oper]=b.tag,c=jQuery.param(c),c=-1!==b.url.indexOf("?")?b.url+"&"+c:b.url+"?"+c,window.location=c)}})}})})(jQuery);var xmlJsonClass={xml2json:function(d,c){9===d.nodeType&&(d=d.documentElement);var e=this.removeWhite(d),e=this.toObj(e),e=this.toJson(e,d.nodeName,"\t");return"{\n"+c+(c?e.replace(/\t/g,c):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(d,c){var h=function(l,g,p){var q="",o,m;if(l instanceof Array){if(0===l.length){q+=p+"<"+g+">__EMPTY_ARRAY_</"+g+">\n"}else{for(o=0,m=l.length;o<m;o+=1){var r=p+h(l[o],g,p+"\t")+"\n",q=q+r}}}else{if("object"===typeof l){o=!1;q+=p+"<"+g;for(m in l){l.hasOwnProperty(m)&&("@"===m.charAt(0)?q+=" "+m.substr(1)+'="'+l[m].toString()+'"':o=!0)}q+=o?">":"/>";if(o){for(m in l){l.hasOwnProperty(m)&&("#text"===m?q+=l[m]:"#cdata"===m?q+="<![CDATA["+l[m]+"]]\x3e":"@"!==m.charAt(0)&&(q+=h(l[m],m,p+"\t")))}q+=("\n"===q.charAt(q.length-1)?p:"")+"</"+g+">"}}else{"function"===typeof l?q+=p+"<"+g+"><![CDATA["+l+"]]\x3e</"+g+">":(void 0===l&&(l=""),q='""'===l.toString()||0===l.toString().length?q+(p+"<"+g+">__EMPTY_STRING_</"+g+">"):q+(p+"<"+g+">"+l.toString()+"</"+g+">"))}}return q},i="",j;for(j in d){d.hasOwnProperty(j)&&(i+=h(d[j],j,""))}return c?i.replace(/\t/g,c):i.replace(/\t|\n/g,"")},toObj:function(i){var d={},k=/function/i;if(1===i.nodeType){if(i.attributes.length){var l;for(l=0;l<i.attributes.length;l+=1){d["@"+i.attributes[l].nodeName]=(i.attributes[l].nodeValue||"").toString()}}if(i.firstChild){var m=l=0,j=!1,n;for(n=i.firstChild;n;n=n.nextSibling){1===n.nodeType?j=!0:3===n.nodeType&&n.nodeValue.match(/[^ \f\n\r\t\v]/)?l+=1:4===n.nodeType&&(m+=1)}if(j){if(2>l&&2>m){for(this.removeWhite(i),n=i.firstChild;n;n=n.nextSibling){3===n.nodeType?d["#text"]=this.escape(n.nodeValue):4===n.nodeType?k.test(n.nodeValue)?d[n.nodeName]=[d[n.nodeName],n.nodeValue]:d["#cdata"]=this.escape(n.nodeValue):d[n.nodeName]?d[n.nodeName] instanceof Array?d[n.nodeName][d[n.nodeName].length]=this.toObj(n):d[n.nodeName]=[d[n.nodeName],this.toObj(n)]:d[n.nodeName]=this.toObj(n)}}else{i.attributes.length?d["#text"]=this.escape(this.innerXml(i)):d=this.escape(this.innerXml(i))}}else{if(l){i.attributes.length?d["#text"]=this.escape(this.innerXml(i)):(d=this.escape(this.innerXml(i)),"__EMPTY_ARRAY_"===d?d="[]":"__EMPTY_STRING_"===d&&(d=""))}else{if(m){if(1<m){d=this.escape(this.innerXml(i))}else{for(n=i.firstChild;n;n=n.nextSibling){if(k.test(i.firstChild.nodeValue)){d=i.firstChild.nodeValue;break}else{d["#cdata"]=this.escape(n.nodeValue)}}}}}}}i.attributes.length||i.firstChild||(d=null)}else{9===i.nodeType?d=this.toObj(i.documentElement):alert("unhandled node type: "+i.nodeType)}return d},toJson:function(t,s,n,o){void 0===o&&(o=!0);var p=s?'"'+s+'"':"",k="\t",r="\n";o||(r=k="");if("[]"===t){p+=s?":[]":"[]"}else{if(t instanceof Array){var j,q,i=[];q=0;for(j=t.length;q<j;q+=1){i[q]=this.toJson(t[q],"",n+k,o)}p+=(s?":[":"[")+(1<i.length?r+n+k+i.join(","+r+n+k)+r+n:i.join(""))+"]"}else{if(null===t){p+=(s&&":")+"null"}else{if("object"===typeof t){j=[];for(q in t){t.hasOwnProperty(q)&&(j[j.length]=this.toJson(t[q],q,n+k,o))}p+=(s?":{":"{")+(1<j.length?r+n+k+j.join(","+r+n+k)+r+n:j.join(""))+"}"}else{p="string"===typeof t?p+((s&&":")+'"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):p+((s&&":")+t.toString())}}}}return p},innerXml:function(d){var c="";if("innerHTML" in d){c=d.innerHTML}else{var e=function(g){var f="",i;if(1===g.nodeType){f+="<"+g.nodeName;for(i=0;i<g.attributes.length;i+=1){f+=" "+g.attributes[i].nodeName+'="'+(g.attributes[i].nodeValue||"").toString()+'"'}if(g.firstChild){f+=">";for(i=g.firstChild;i;i=i.nextSibling){f+=e(i)}f+="</"+g.nodeName+">"}else{f+="/>"}}else{3===g.nodeType?f+=g.nodeValue:4===g.nodeType&&(f+="<![CDATA["+g.nodeValue+"]]\x3e")}return f};for(d=d.firstChild;d;d=d.nextSibling){c+=e(d)}}return c},escape:function(b){return b.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(d){d.normalize();var c;for(c=d.firstChild;c;){if(3===c.nodeType){if(c.nodeValue.match(/[^ \f\n\r\t\v]/)){c=c.nextSibling}else{var e=c.nextSibling;d.removeChild(c);c=e}}else{1===c.nodeType&&this.removeWhite(c),c=c.nextSibling}}return d}};function tableToGrid(b,a){jQuery(b).each(function(){if(!this.grid){jQuery(this).width("99%");var q=jQuery(this).width(),p=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),r=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),p=0<p.length,r=!p&&0<r.length,i=p||r,o=[],n=[];jQuery("th",jQuery(this)).each(function(){0===o.length&&i?(o.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),n.push("__selection__")):(o.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),n.push(jQuery(this).html()))});var m=[],l=[],j=[];jQuery("tbody > tr",jQuery(this)).each(function(){var c={},d=0;jQuery("td",jQuery(this)).each(function(){if(0===d&&i){var g=jQuery("input",jQuery(this)),f=g.attr("value");l.push(f||m.length);g.is(":checked")&&j.push(f);c[o[d].name]=g.attr("value")}else{c[o[d].name]=jQuery(this).html()}d++});0<d&&m.push(c)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:q,colNames:n,colModel:o,multiselect:p},a||{}));for(q=0;q<m.length;q++){r=null,0<l.length&&(r=l[q])&&r.replace&&(r=encodeURIComponent(r).replace(/[.\-%]/g,"_")),null===r&&(r=q+1),jQuery(this).jqGrid("addRowData",r,m[q])}for(q=0;q<j.length;q++){jQuery(this).jqGrid("setSelection",j[q])}}})}(function(b){b.jgrid.msie&&8===b.jgrid.msiever()&&(b.expr[":"].hidden=function(b){return 0===b.offsetWidth||0===b.offsetHeight||"none"===b.style.display});b.jgrid._multiselect=!1;if(b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var r=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,d){var c=r.call(this,a,d);if(d&&this.selectedList){var e=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(e)})}return c}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===b.Widget?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)});b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function d(){c.p.disableClick=!0}var c=this,e=b.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(b,a){a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}},update:function(a,e){var d=b(e.item).parent(),d=b(">th",d),f={},g=c.p.id+"_";b.each(c.p.colModel,function(b){f[this.name]=b});var l=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&l.push(f[a])});b(c).jqGrid("remapColumns",l,!0,!0);b.isFunction(c.p.sortable.update)&&c.p.sortable.update(l);setTimeout(function(){c.p.disableClick=!1},50)}};c.p.sortable.options?b.extend(e,c.p.sortable.options):b.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable});if(e.start){var g=e.start;e.start=function(b,a){d();g.call(this,b,a)}}else{e.start=d}c.p.sortable.exclude&&(e.items+=":not("+c.p.sortable.exclude+")");a.sortable(e).data("sortable").floating=!0})},columnChooser:function(a){function d(a,c){a&&("string"===typeof a?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var c=this;if(!b("#colchooser_"+b.jgrid.jqID(c[0].p.id)).length){var e=b('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),g=b("select",e);a=b.extend({width:420,height:240,classname:null,done:function(b){b&&c.jqGrid("remapColumns",b,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};c[a.bSubmit]=function(){a.apply_perm();a.cleanup(!1)};c[a.bCancel]=function(){a.cleanup(!0)};return b.extend(!0,{buttons:c,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",g).each(function(){this.selected?c.jqGrid("showCol",k[this.value].name):c.jqGrid("hideCol",k[this.value].name)});var e=[];b("option:selected",g).each(function(){e.push(parseInt(this.value,10))});b.each(e,function(){delete p[k[parseInt(this,10)].name]});b.each(p,function(){var b=parseInt(this,10);var a=e,c=b;if(0<=c){var d=a.slice(),k=d.splice(c,Math.max(a.length-c,c));c>a.length&&(c=a.length);d[c]=b;e=d.concat(k)}else{e=void 0}});a.done&&a.done.call(c,e)},cleanup:function(b){d(a.dlog,e,"destroy");d(a.msel,g,"destroy");e.remove();b&&a.done&&a.done.call(c)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&"multiselect"===a.msel){if(!b.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption);a.classname&&(e.addClass(a.classname),g.addClass(a.classname));a.width&&(b(">div",e).css({width:a.width,margin:"0 auto"}),g.css("width",a.width));a.height&&(b(">div",e).css("height",a.height),g.css("height",a.height-10));var k=c.jqGrid("getGridParam","colModel"),t=c.jqGrid("getGridParam","colNames"),p={},f=[];g.empty();b.each(k,function(a){p[this.name]=a;this.hidedlg?this.hidden||f.push(a):g.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+b.jgrid.stripHtml(t[a])+"</option>")});var q=b.isFunction(a.dlog_opts)?a.dlog_opts.call(c,a):a.dlog_opts;d(a.dlog,e,q);q=b.isFunction(a.msel_opts)?a.msel_opts.call(c,a):a.msel_opts;d(a.msel,g,q)}},sortableRows:function(a){return this.each(function(){var d=this;d.grid&&!d.p.treeGrid&&b.fn.sortable&&(a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{}),a.start&&b.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&b.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,e){b(e.item).css("border-width","0");b("td",e.item).each(function(b){this.style.width=d.grid.cols[b].style.width});if(d.p.subGrid){var g=b(e.item).attr("id");try{b(d).jqGrid("collapseSubGridRow",g)}catch(k){}}a._start_&&a._start_.apply(this,[c,e])},a.update=function(c,e){b(e.item).css("border-width","");!0===d.p.rownumbers&&b("td.jqgrid-rownum",d.rows).each(function(a){b(this).html(a+1+(parseInt(d.p.page,10)-1)*parseInt(d.p.rowNum,10))});a._update_&&a._update_.apply(this,[c,e])},b("tbody:first",d).sortable(a),b("tbody:first",d).disableSelection())})},gridDnD:function(a){return this.each(function(){function d(){var a=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(a.drag)?a.drag.call(b(c),a):a.drag)}var c=this,e,g;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable){if(void 0===b("#jqgrid_dnd")[0]&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"===typeof a&&"updateDnD"===a&&!0===c.p.jqgdnd){d()}else{if(a=b.extend({drag:function(a){return b.extend({start:function(e,d){var f;if(c.p.subGrid){f=b(d.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(g){}}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){0===b(b.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")&&b(b.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{})}d.helper.addClass("ui-state-highlight");b("td",d.helper).each(function(b){this.style.width=c.grid.headers[b].width+"px"});a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(c),e,d)},stop:function(e,d){var f;d.helper.dropped&&!a.dragcopy&&(f=b(d.helper).attr("id"),void 0===f&&(f=b(this).attr("id")),b(c).jqGrid("delRowData",f));for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row")}a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(c),e,d)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){if(!b(a).hasClass("jqgrow")){return a}a=b(a).closest("table.ui-jqgrid-btable");return 0<a.length&&void 0!==b.data(a[0],"dnd")?(a=b.data(a[0],"dnd").connectWith,-1!==b.inArray("#"+b.jgrid.jqID(this.id),a)?!0:!1):!1},drop:function(e,d){if(b(d.draggable).hasClass("jqgrow")){var f=b(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",f);if(!a.dropbyname){var g=0,l={},h,n,s=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(n in f){f.hasOwnProperty(n)&&(h=s[g].name,"cb"!==h&&"rn"!==h&&"subgrid"!==h&&f.hasOwnProperty(n)&&s[g]&&(l[h]=f[n]),g++)}f=l}catch(r){}}d.helper.dropped=!0;a.beforedrop&&b.isFunction(a.beforedrop)&&(h=a.beforedrop.call(this,e,d,f,b("#"+b.jgrid.jqID(c.p.id)),b(this)),void 0!==h&&null!==h&&"object"===typeof h&&(f=h));if(d.helper.dropped){var m;a.autoid&&(b.isFunction(a.autoid)?m=a.autoid.call(this,f):(m=Math.ceil(1000*Math.random()),m=a.autoidprefix+m));b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",m,f,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,e,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith){for(a.connectWith=a.connectWith.split(","),a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)}),b.data(c,"dnd",a),0===c.p.reccount||c.p.jqgdnd||d(),c.p.jqgdnd=!0,e=0;e<a.connectWith.length;e++){g=a.connectWith[e],b(g).droppable(b.isFunction(a.drop)?a.drop.call(b(c),a):a.drop)}}}}})},gridResize:function(a){return this.each(function(){var d=this,c=b.jgrid.jqID(d.p.id);d.grid&&b.fn.resizable&&(a=b.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&b.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(e,g){b(d).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()});b(d).jqGrid("setGridWidth",g.size.width,a.shrinkToFit);a._stop_&&a._stop_.call(d,e,g)},a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c),delete a._alsoResize_,b("#gbox_"+c).resizable(a))})}})})(jQuery);