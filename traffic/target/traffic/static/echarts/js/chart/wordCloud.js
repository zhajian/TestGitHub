define("echarts/chart/wordCloud",["require","./base","zrender/shape/Text","../layout/WordCloud","../component/grid","../component/dataRange","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(h){function m(q,l,s,i,r){g.call(this,q,l,s,i,r),this.refresh(i)}var g=h("./base"),d=h("zrender/shape/Text"),j=h("../layout/WordCloud");h("../component/grid"),h("../component/dataRange");var c=h("../config"),b=h("../util/ecData"),p=h("zrender/tool/util"),f=h("zrender/tool/color");return c.wordCloud={zlevel:0,z:2,clickable:!0,center:["50%","50%"],size:["40%","40%"],textRotation:[0,90],textPadding:0,autoSize:{enable:!0,minSize:12},itemStyle:{normal:{textStyle:{fontSize:function(a){return a.value}}}}},m.prototype={type:c.CHART_TYPE_WORDCLOUD,refresh:function(a){a&&(this.option=a,this.series=a.series),this._init()},_init:function(){var o=this.series;this.backupShapeList();for(var l=this.component.legend,a=0;a<o.length;a++){if(o[a].type===c.CHART_TYPE_WORDCLOUD){o[a]=this.reformOption(o[a]);var q=o[a].name||"";if(this.selectedMap[q]=l?l.isSelected(q):!0,!this.selectedMap[q]){continue}this.buildMark(a),this._initSerie(o[a])}}},_initSerie:function(v){var l=v.itemStyle.normal.textStyle,a=[this.parsePercent(v.size[0],this.zr.getWidth())||200,this.parsePercent(v.size[1],this.zr.getHeight())||200],x=this.parseCenter(this.zr,v.center),w={size:a,wordletype:{autoSizeCal:v.autoSize},center:x,rotate:v.textRotation,padding:v.textPadding,font:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontStyle:l.fontStyle,text:function(i){return i.name},data:v.data},u=new j(w),q=this;u.end(function(i){q._buildShapes(i)}),u.start()},_buildShapes:function(n){for(var l=n.length,a=0;l>a;a++){this._buildTextShape(n[a],0,a)}this.addShapeList()},_buildTextShape:function(z,E,w){var C=this.series,n=C[E],F=n.name||"",x=n.data[w],r=[x,n],q=this.component.legend,A=q?q.getColor(F):this.zr.getColor(E),v=this.deepMerge(r,"itemStyle.normal")||{},l=this.deepMerge(r,"itemStyle.emphasis")||{},B=this.getItemStyleColor(v.color,E,w,x)||A,D=this.getItemStyleColor(l.color,E,w,x)||("string"==typeof B?f.lift(B,-0.2):B),y=new d({zlevel:n.zlevel,z:n.z,hoverable:!0,clickable:this.deepQuery(r,"clickable"),style:{x:0,y:0,text:z.text,color:B,textFont:[z.style,z.weight,z.size+"px",z.font].join(" "),textBaseline:"alphabetic",textAlign:"center"},highlightStyle:{brushType:l.borderWidth?"both":"fill",color:D,lineWidth:l.borderWidth||0,strokeColor:l.borderColor},position:[z.x,z.y],rotation:[-z.rotate/180*Math.PI,0,0]});b.pack(y,n,E,x,w,x.name),this.shapeList.push(y)}},p.inherits(m,g),h("../chart").define("wordCloud",m),m}),define("echarts/layout/WordCloud",["require","../layout/WordCloudRectZero","zrender/tool/util"],function(c){function b(f){this._init(f)}var a=c("../layout/WordCloudRectZero"),d=c("zrender/tool/util");return b.prototype={start:function(){function y(){g.totalArea=f,z.autoSizeCal.enable&&g._autoCalTextSize(u,f,B,i,z.autoSizeCal.minSize),q.timer&&clearInterval(q.timer),q.timer=setInterval(C,0),C()}function C(){for(var m,l=+new Date,h=u.length;+new Date-l<q.timeInterval&&++D<h&&q.timer;){m=u[D],m.x=v[0]>>1,m.y=v[1]>>1,g._cloudSprite(m,u,D),m.hasText&&g._place(j,m,x)&&(w.push(m),m.x-=v[0]>>1,m.y-=v[1]>>1)}D>=h&&(g.stop(),g._fixTagPosition(w),q.endcallback(w))}var j=null,B=0,i=0,f=0,D=-1,w=[],x=null,u=this.wordsdata,q=this.defaultOption,z=q.wordletype,v=q.size,g=this,A=new a({type:z.type,width:v[0],height:v[1]});return A.calculate(function(e){j=e.initarr,B=e.maxWit,i=e.maxHit,f=e.area,x=e.imgboard,y()},this),this},_fixTagPosition:function(h){for(var g=this.defaultOption.center,f=0,j=h.length;j>f;f++){h[f].x+=g[0],h[f].y+=g[1]}},stop:function(){return this.defaultOption.timer&&(clearInterval(this.defaultOption.timer),this.defaultOption.timer=null),this},end:function(f){return f&&(this.defaultOption.endcallback=f),this},_init:function(f){this.defaultOption={},this._initProperty(f),this._initMethod(f),this._initCanvas(),this._initData(f.data)},_initData:function(h){var g=this,f=g.defaultOption;this.wordsdata=h.map(function(i,j){return i.text=f.text.call(g,i,j),i.font=f.font.call(g,i,j),i.style=f.fontStyle.call(g,i,j),i.weight=f.fontWeight.call(g,i,j),i.rotate=f.rotate.call(g,i,j),i.size=~~f.fontSize.call(g,i,j),i.padding=f.padding.call(g,i,j),i}).sort(function(j,i){return i.value-j.value})},_initMethod:function(x){function z(h){return h.name}function v(){return"sans-serif"}function j(){return"normal"}function y(h){return h.value}function g(){return 0}function f(h){return function(){return h[Math.round(Math.random()*(h.length-1))]}}function A(){return 0}function u(i){var h=i[0]/i[1];return function(l){return[h*(l*=0.1)*Math.cos(l),l*Math.sin(l)]}}function w(o){var m=4,l=m*o[0]/o[1],r=0,h=0;return function(i){var n=0>i?-1:1;switch(Math.sqrt(1+4*n*i)-n&3){case 0:r+=l;break;case 1:h+=m;break;case 2:r-=l;break;default:h-=m}return[r,h]}}function q(h){return"function"==typeof h?h:function(){return h}}var p=this.defaultOption;p.text=x.text?q(x.text):z,p.font=x.font?q(x.font):v,p.fontSize=x.fontSize?q(x.fontSize):y,p.fontStyle=x.fontStyle?q(x.fontStyle):j,p.fontWeight=x.fontWeight?q(x.fontWeight):j,p.rotate=x.rotate?f(x.rotate):g,p.padding=x.padding?q(x.padding):A,p.center=x.center,p.spiral=u,p.endcallback=function(){},p.rectangularSpiral=w,p.archimedeanSpiral=u},_initProperty:function(g){var f=this.defaultOption;f.size=g.size||[256,256],f.wordletype=g.wordletype,f.words=g.words||[],f.timeInterval=1/0,f.timer=null,f.spirals={archimedean:f.archimedeanSpiral,rectangular:f.rectangularSpiral},d.merge(f,{size:[256,256],wordletype:{type:"RECT",areaPresent:0.058,autoSizeCal:{enable:!0,minSize:12}}})},_initCanvas:function(){var j,h=Math.PI/180,g=64,m=2048,f=1;"undefined"!=typeof document?(j=document.createElement("canvas"),j.width=1,j.height=1,f=Math.sqrt(j.getContext("2d").getImageData(0,0,1,1).data.length>>2),j.width=(g<<5)/f,j.height=m/f):j=new Canvas(g<<5,m);var l=j.getContext("2d");l.fillStyle=l.strokeStyle="red",l.textAlign="center",this.defaultOption.c=l,this.defaultOption.cw=g,this.defaultOption.ch=m,this.defaultOption.ratio=f,this.defaultOption.cloudRadians=h},_cloudSprite:function(Z,H,R){if(!Z.sprite){var N=this.defaultOption.cw,ad=this.defaultOption.ch,M=this.defaultOption.c,J=this.defaultOption.ratio,I=this.defaultOption.cloudRadians;M.clearRect(0,0,(N<<5)/J,ad/J);var P=0,S=0,O=0,z=H.length;for(--R;++R<z;){Z=H[R],M.save(),M.font=Z.style+" "+Z.weight+" "+~~((Z.size+1)/J)+"px "+Z.font;var aa=M.measureText(Z.text+"m").width*J,A=Z.size<<1;if(Z.rotate){var K=Math.sin(Z.rotate*I),ab=Math.cos(Z.rotate*I),G=aa*ab,T=aa*K,C=A*ab,ac=A*K;aa=Math.max(Math.abs(G+ac),Math.abs(G-ac))+31>>5<<5,A=~~Math.max(Math.abs(T+C),Math.abs(T-C))}else{aa=aa+31>>5<<5}if(A>O&&(O=A),P+aa>=N<<5&&(P=0,S+=O,O=0),S+A>=ad){break}M.translate((P+(aa>>1))/J,(S+(A>>1))/J),Z.rotate&&M.rotate(Z.rotate*I),M.fillText(Z.text,0,0),Z.padding&&(M.lineWidth=2*Z.padding,M.strokeText(Z.text,0,0)),M.restore(),Z.width=aa,Z.height=A,Z.xoff=P,Z.yoff=S,Z.x1=aa>>1,Z.y1=A>>1,Z.x0=-Z.x1,Z.y0=-Z.y1,Z.hasText=!0,P+=aa}for(var Y=M.getImageData(0,0,(N<<5)/J,ad/J).data,Q=[];--R>=0;){if(Z=H[R],Z.hasText){for(var aa=Z.width,ae=aa>>5,A=Z.y1-Z.y0,D=0;A*ae>D;D++){Q[D]=0}if(P=Z.xoff,null==P){return}S=Z.yoff;for(var B=0,q=-1,j=0;A>j;j++){for(var D=0;aa>D;D++){var F=ae*j+(D>>5),E=Y[(S+j)*(N<<5)+(P+D)<<2]?1<<31-D%32:0;Q[F]|=E,B|=E}B?q=j:(Z.y0++,A--,j--,S++)}Z.y1=Z.y0+q,Z.sprite=Q.slice(0,(Z.y1-Z.y0)*ae)}}}},_place:function(Q,C,M){function H(W,ab,L){L>>=5;for(var p,aa=W.sprite,g=W.width>>5,f=W.x-(g<<4),ac=127&f,y=32-ac,U=W.y1-W.y0,x=(W.y+W.y0)*L+(f>>5),u=0;U>u;u++){p=0;for(var Z=0;g>=Z;Z++){if((p<<y|(g>Z?(p=aa[u*g+Z])>>>ac:0))&ab[x+Z]){return !0}}x+=L}return !1}function X(g,f){return f.row[g.y]&&f.cloumn[g.x]&&g.x>=f.row[g.y].start&&g.x<=f.row[g.y].end&&g.y>=f.cloumn[g.x].start&&g.y<=f.cloumn[g.x].end}for(var G,E,D,J=this.defaultOption.size,N=([{x:0,y:0},{x:J[0],y:J[1]}],C.x),I=C.y,q=Math.sqrt(J[0]*J[0]+J[1]*J[1]),R=this.defaultOption.spiral(J),v=Math.random()<0.5?1:-1,F=-v;(G=R(F+=v))&&(E=~~G[0],D=~~G[1],!(Math.min(E,D)>q));){if(C.x=N+E,C.y=I+D,!(C.x+C.x0<0||C.y+C.y0<0||C.x+C.x1>J[0]||C.y+C.y1>J[1])&&!H(C,Q,J[0])&&X(C,M)){for(var S,B=C.sprite,O=C.width>>5,z=J[0]>>5,T=C.x-(O<<4),P=127&T,K=32-P,Y=C.y1-C.y0,A=(C.y+C.y0)*z+(T>>5),w=0;Y>w;w++){S=0;for(var j=0;O>=j;j++){Q[A+j]|=S<<K|(O>j?(S=B[w*O+j])>>>P:0)}A+=z}return delete C.sprite,!0}}return !1},_autoCalTextSize:function(G,v,D,A,J){function z(L){I.clearRect(0,0,(j<<5)/q,y/q),I.save(),I.font=L.style+" "+L.weight+" "+~~((L.size+1)/q)+"px "+L.font;var O=I.measureText(L.text+"m").width*q,g=L.size<<1;O=O+31>>5<<5,I.restore(),L.aw=O,L.ah=g;var P,o,u;if(L.rotate){var n=Math.sin(L.rotate*F),i=Math.cos(L.rotate*F),N=O*i,M=O*n,K=g*i,p=g*n;o=Math.max(Math.abs(N+p),Math.abs(N-p))+31>>5<<5,u=~~Math.max(Math.abs(M+K),Math.abs(M-K))}return L.size<=H||L.rotate&&O*g<=L.area&&D>=o&&A>=u||O*g<=L.area&&D>=O&&A>=g?void (L.area=O*g):(P=L.rotate&&o>D&&u>A?Math.min(D/o,A/u):O>D||g>A?Math.min(D/O,A/g):Math.sqrt(L.area/(L.aw*L.ah)),L.size=~~(P*L.size),L.size<J?void (L.size=J):z(L))}function x(l,h){for(var g=l.length,m=0;g--;){m+=h(l[g])}return m}for(var w,C,E=x(G,function(g){return g.size}),B=G.length,f=0.25,H=J,j=this.defaultOption.cw,y=this.defaultOption.ch,I=this.defaultOption.c,q=this.defaultOption.ratio,F=this.defaultOption.cloudRadians;B--;){w=G[B],C=w.size/E,w.areapre=f?f>C?C:f:C,w.area=v*w.areapre,w.totalarea=v,z(w)}}},b}),define("echarts/component/dataRange",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../util/shape/HandlePolygon","../config","zrender/tool/util","zrender/tool/event","zrender/tool/area","zrender/tool/color","../component"],function(q){function v(m,i,x,h,r){j.call(this,m,i,x,h,r);var l=this;l._ondrift=function(n,a){return l.__ondrift(this,n,a)},l._ondragend=function(){return l.__ondragend()},l._dataRangeSelected=function(a){return l.__dataRangeSelected(a)},l._dispatchHoverLink=function(a){return l.__dispatchHoverLink(a)},l._onhoverlink=function(a){return l.__onhoverlink(a)},this._selectedMap={},this._range={},this.refresh(h),i.bind(b.EVENT.HOVER,this._onhoverlink)}var j=q("./base"),d=q("zrender/shape/Text"),u=q("zrender/shape/Rectangle"),c=q("../util/shape/HandlePolygon"),b=q("../config");b.dataRange={zlevel:0,z:4,show:!0,orient:"vertical",x:"left",y:"bottom",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,precision:0,splitNumber:5,splitList:null,calculable:!1,selectedMode:!0,hoverLink:!0,realtime:!0,color:["#006edd","#e0ffff"],textStyle:{color:"#333"}};var w=q("zrender/tool/util"),g=q("zrender/tool/event"),p=q("zrender/tool/area"),f=q("zrender/tool/color");return v.prototype={type:b.COMPONENT_TYPE_DATARANGE,_textGap:10,_buildShape:function(){if(this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._isContinuity()?this._buildGradient():this._buildItem(),this.dataRangeOption.show){for(var h=0,a=this.shapeList.length;a>h;h++){this.zr.addShape(this.shapeList[h])}}this._syncShapeFromRange()},_buildItem:function(){var D,H,B,n,a=this._valueTextList,I=a.length,A=this.getFont(this.dataRangeOption.textStyle),y=this._itemGroupLocation.x,x=this._itemGroupLocation.y,E=this.dataRangeOption.itemWidth,z=this.dataRangeOption.itemHeight,h=this.dataRangeOption.itemGap,F=p.getTextHeight("国",A);"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(y=this._itemGroupLocation.x+this._itemGroupLocation.width-E);var G=!0;this.dataRangeOption.text&&(G=!1,this.dataRangeOption.text[0]&&(B=this._getTextShape(y,x,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?y+=p.getTextWidth(this.dataRangeOption.text[0],A)+this._textGap:(x+=F+this._textGap,B.style.y+=F/2+this._textGap,B.style.textBaseline="bottom"),this.shapeList.push(new d(B))));for(var C=0;I>C;C++){D=a[C],n=this.getColorByIndex(C),H=this._getItemShape(y,x,E,z,this._selectedMap[C]?n:"#ccc"),H._idx=C,H.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(H.clickable=!0,H.onclick=this._dataRangeSelected),this.shapeList.push(new u(H)),G&&(B={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:y+E+5,y:x,color:this._selectedMap[C]?this.dataRangeOption.textStyle.color:"#ccc",text:a[C],textFont:A,textBaseline:"top"},highlightStyle:{brushType:"fill"}},"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(B.style.x-=E+10,B.style.textAlign="right"),B._idx=C,B.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(B.clickable=!0,B.onclick=this._dataRangeSelected),this.shapeList.push(new d(B))),"horizontal"==this.dataRangeOption.orient?y+=E+(G?5:0)+(G?p.getTextWidth(D,A):0)+h:x+=z+h}!G&&this.dataRangeOption.text[1]&&("horizontal"==this.dataRangeOption.orient?y=y-h+this._textGap:x=x-h+this._textGap,B=this._getTextShape(y,x,this.dataRangeOption.text[1]),"horizontal"!=this.dataRangeOption.orient&&(B.style.y-=5,B.style.textBaseline="top"),this.shapeList.push(new d(B)))},_buildGradient:function(){var H,B,h=this.getFont(this.dataRangeOption.textStyle),a=this._itemGroupLocation.x,I=this._itemGroupLocation.y,A=this.dataRangeOption.itemWidth,x=this.dataRangeOption.itemHeight,n=p.getTextHeight("国",h),D=10,z=!0;this.dataRangeOption.text&&(z=!1,this.dataRangeOption.text[0]&&(B=this._getTextShape(a,I,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?a+=p.getTextWidth(this.dataRangeOption.text[0],h)+this._textGap:(I+=n+this._textGap,B.style.y+=n/2+this._textGap,B.style.textBaseline="bottom"),this.shapeList.push(new d(B))));for(var e=q("zrender/tool/color"),E=1/(this.dataRangeOption.color.length-1),G=[],C=0,F=this.dataRangeOption.color.length;F>C;C++){G.push([C*E,this.dataRangeOption.color[C]])}"horizontal"==this.dataRangeOption.orient?(H={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a,y:I,width:A*D,height:x,color:e.getLinearGradient(a,I,a+A*D,I,G)},hoverable:!1},a+=A*D+this._textGap):(H={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a,y:I,width:A,height:x*D,color:e.getLinearGradient(a,I,a,I+x*D,G)},hoverable:!1},I+=x*D+this._textGap),this.shapeList.push(new u(H)),this._calculableLocation=H.style,this.dataRangeOption.calculable&&(this._buildFiller(),this._bulidMask(),this._bulidHandle()),this._buildIndicator(),!z&&this.dataRangeOption.text[1]&&(B=this._getTextShape(a,I,this.dataRangeOption.text[1]),this.shapeList.push(new d(B)))},_buildIndicator:function(){var y,m,l=this._calculableLocation.x,z=this._calculableLocation.y,h=this._calculableLocation.width,x=this._calculableLocation.height,o=5;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(y=[[l,z+x],[l-o,z+x+o],[l+o,z+x+o]],m="bottom"):(y=[[l,z],[l-o,z-o],[l+o,z-o]],m="top"):"right"!=this.dataRangeOption.x?(y=[[l+h,z],[l+h+o,z-o],[l+h+o,z+o]],m="right"):(y=[[l,z],[l-o,z-o],[l-o,z+o]],m="left"),this._indicatorShape={style:{pointList:y,color:"#fff",__rect:{x:Math.min(y[0][0],y[1][0]),y:Math.min(y[0][1],y[1][1]),width:o*("horizontal"==this.dataRangeOption.orient?2:1),height:o*("horizontal"==this.dataRangeOption.orient?1:2)}},highlightStyle:{brushType:"fill",textPosition:m,textColor:this.dataRangeOption.textStyle.color},hoverable:!1},this._indicatorShape=new c(this._indicatorShape)},_buildFiller:function(){this._fillerShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:this._calculableLocation.x,y:this._calculableLocation.y,width:this._calculableLocation.width,height:this._calculableLocation.height,color:"rgba(255,255,255,0)"},highlightStyle:{strokeColor:"rgba(255,255,255,0.5)",lineWidth:1},draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,onmousemove:this._dispatchHoverLink,_type:"filler"},this._fillerShape=new u(this._fillerShape),this.shapeList.push(this._fillerShape)},_bulidHandle:function(){var D,I,C,x,G,h,J,B,z=this._calculableLocation.x,y=this._calculableLocation.y,E=this._calculableLocation.width,A=this._calculableLocation.height,o=this.getFont(this.dataRangeOption.textStyle),F=p.getTextHeight("国",o),H=Math.max(p.getTextWidth(this._textFormat(this.dataRangeOption.max),o),p.getTextWidth(this._textFormat(this.dataRangeOption.min),o))+2;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(D=[[z,y],[z,y+A+F],[z-F,y+A+F],[z-1,y+A],[z-1,y]],I=z-H/2-F,C=y+A+F/2+2,x={x:z-H-F,y:y+A,width:H+F,height:F},G=[[z+E,y],[z+E,y+A+F],[z+E+F,y+A+F],[z+E+1,y+A],[z+E+1,y]],h=z+E+H/2+F,J=C,B={x:z+E,y:y+A,width:H+F,height:F}):(D=[[z,y+A],[z,y-F],[z-F,y-F],[z-1,y],[z-1,y+A]],I=z-H/2-F,C=y-F/2-2,x={x:z-H-F,y:y-F,width:H+F,height:F},G=[[z+E,y+A],[z+E,y-F],[z+E+F,y-F],[z+E+1,y],[z+E+1,y+A]],h=z+E+H/2+F,J=C,B={x:z+E,y:y-F,width:H+F,height:F}):(H+=F,"right"!=this.dataRangeOption.x?(D=[[z,y],[z+E+F,y],[z+E+F,y-F],[z+E,y-1],[z,y-1]],I=z+E+H/2+F/2,C=y-F/2,x={x:z+E,y:y-F,width:H+F,height:F},G=[[z,y+A],[z+E+F,y+A],[z+E+F,y+F+A],[z+E,y+1+A],[z,y+A+1]],h=I,J=y+A+F/2,B={x:z+E,y:y+A,width:H+F,height:F}):(D=[[z+E,y],[z-F,y],[z-F,y-F],[z,y-1],[z+E,y-1]],I=z-H/2-F/2,C=y-F/2,x={x:z-H-F,y:y-F,width:H+F,height:F},G=[[z+E,y+A],[z-F,y+A],[z-F,y+F+A],[z,y+1+A],[z+E,y+A+1]],h=I,J=y+A+F/2,B={x:z-H-F,y:y+A,width:H+F,height:F})),this._startShape={style:{pointList:D,text:this._textFormat(this.dataRangeOption.max),textX:I,textY:C,textFont:o,color:this.getColor(this.dataRangeOption.max),rect:x,x:D[0][0],y:D[0][1],_x:D[0][0],_y:D[0][1]}},this._startShape.highlightStyle={strokeColor:this._startShape.style.color,lineWidth:1},this._endShape={style:{pointList:G,text:this._textFormat(this.dataRangeOption.min),textX:h,textY:J,textFont:o,color:this.getColor(this.dataRangeOption.min),rect:B,x:G[0][0],y:G[0][1],_x:G[0][0],_y:G[0][1]}},this._endShape.highlightStyle={strokeColor:this._endShape.style.color,lineWidth:1},this._startShape.zlevel=this._endShape.zlevel=this.getZlevelBase(),this._startShape.z=this._endShape.z=this.getZBase()+1,this._startShape.draggable=this._endShape.draggable=!0,this._startShape.ondrift=this._endShape.ondrift=this._ondrift,this._startShape.ondragend=this._endShape.ondragend=this._ondragend,this._startShape.style.textColor=this._endShape.style.textColor=this.dataRangeOption.textStyle.color,this._startShape.style.textAlign=this._endShape.style.textAlign="center",this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape.style.textBaseline=this._endShape.style.textBaseline="middle",this._startShape.style.width=this._endShape.style.width=0,this._startShape.style.height=this._endShape.style.height=0,this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape=new c(this._startShape),this._endShape=new c(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_bulidMask:function(){var l=this._calculableLocation.x,h=this._calculableLocation.y,a=this._calculableLocation.width,m=this._calculableLocation.height;this._startMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:l,y:h,width:"horizontal"==this.dataRangeOption.orient?0:a,height:"horizontal"==this.dataRangeOption.orient?m:0,color:"#ccc"},hoverable:!1},this._endMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:"horizontal"==this.dataRangeOption.orient?l+a:l,y:"horizontal"==this.dataRangeOption.orient?h:h+m,width:"horizontal"==this.dataRangeOption.orient?0:a,height:"horizontal"==this.dataRangeOption.orient?m:0,color:"#ccc"},hoverable:!1},this._startMask=new u(this._startMask),this._endMask=new u(this._endMask),this.shapeList.push(this._startMask),this.shapeList.push(this._endMask)},_buildBackground:function(){var a=this.reformCssArray(this.dataRangeOption.padding);this.shapeList.push(new u({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.dataRangeOption.borderWidth?"fill":"both",color:this.dataRangeOption.backgroundColor,strokeColor:this.dataRangeOption.borderColor,lineWidth:this.dataRangeOption.borderWidth}}))},_getItemGroupLocation:function(){var L=this._valueTextList,B=L.length,J=this.dataRangeOption.itemGap,G=this.dataRangeOption.itemWidth,O=this.dataRangeOption.itemHeight,F=0,D=0,C=this.getFont(this.dataRangeOption.textStyle),I=p.getTextHeight("国",C),H=10;if("horizontal"==this.dataRangeOption.orient){if(this.dataRangeOption.text||this._isContinuity()){F=(this._isContinuity()?G*H+J:B*(G+J))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?p.getTextWidth(this.dataRangeOption.text[0],C)+this._textGap:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?p.getTextWidth(this.dataRangeOption.text[1],C)+this._textGap:0)}else{G+=5;for(var h=0;B>h;h++){F+=G+p.getTextWidth(L[h],C)+J}}F-=J,D=Math.max(I,O)}else{var M;if(this.dataRangeOption.text||this._isContinuity()){D=(this._isContinuity()?O*H+J:B*(O+J))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?this._textGap+I:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?this._textGap+I:0),M=Math.max(p.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[0]||"",C),p.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[1]||"",C)),F=Math.max(G,M)}else{D=(O+J)*B,G+=5,M=0;for(var h=0;B>h;h++){M=Math.max(M,p.getTextWidth(L[h],C))}F=G+M}D-=J}var x,E=this.reformCssArray(this.dataRangeOption.padding),N=this.zr.getWidth();switch(this.dataRangeOption.x){case"center":x=Math.floor((N-F)/2);break;case"left":x=E[3]+this.dataRangeOption.borderWidth;break;case"right":x=N-F-E[1]-this.dataRangeOption.borderWidth;break;default:x=this.parsePercent(this.dataRangeOption.x,N),x=isNaN(x)?0:x}var A,K=this.zr.getHeight();switch(this.dataRangeOption.y){case"top":A=E[0]+this.dataRangeOption.borderWidth;break;case"bottom":A=K-D-E[2]-this.dataRangeOption.borderWidth;break;case"center":A=Math.floor((K-D)/2);break;default:A=this.parsePercent(this.dataRangeOption.y,K),A=isNaN(A)?0:A}if(this.dataRangeOption.calculable){var z=Math.max(p.getTextWidth(this.dataRangeOption.max,C),p.getTextWidth(this.dataRangeOption.min,C))+I;"horizontal"==this.dataRangeOption.orient?(z>x&&(x=z),x+F+z>N&&(x-=z)):(I>A&&(A=I),A+D+I>K&&(A-=I))}return{x:x,y:A,width:F,height:D}},_getTextShape:function(l,h,a){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:"horizontal"==this.dataRangeOption.orient?l:this._itemGroupLocation.x+this._itemGroupLocation.width/2,y:"horizontal"==this.dataRangeOption.orient?this._itemGroupLocation.y+this._itemGroupLocation.height/2:h,color:this.dataRangeOption.textStyle.color,text:a,textFont:this.getFont(this.dataRangeOption.textStyle),textBaseline:"horizontal"==this.dataRangeOption.orient?"middle":"top",textAlign:"horizontal"==this.dataRangeOption.orient?"left":"center"},hoverable:!1}},_getItemShape:function(o,m,l,r,h){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:o,y:m+1,width:l,height:r-2,color:h},highlightStyle:{strokeColor:h,lineWidth:1}}},__ondrift:function(x,m,l){var z=this._calculableLocation.x,h=this._calculableLocation.y,y=this._calculableLocation.width,s=this._calculableLocation.height;return"horizontal"==this.dataRangeOption.orient?x.style.x+m<=z?x.style.x=z:x.style.x+m+x.style.width>=z+y?x.style.x=z+y-x.style.width:x.style.x+=m:x.style.y+l<=h?x.style.y=h:x.style.y+l+x.style.height>=h+s?x.style.y=h+s-x.style.height:x.style.y+=l,"filler"==x._type?this._syncHandleShape():this._syncFillerShape(x),this.dataRangeOption.realtime&&this._dispatchDataRange(),!0},__ondragend:function(){this.isDragend=!0},ondragend:function(h,a){this.isDragend&&h.target&&(a.dragOut=!0,a.dragIn=!0,this.dataRangeOption.realtime||this._dispatchDataRange(),a.needRefresh=!1,this.isDragend=!1)},_syncShapeFromRange:function(){var o=this.dataRangeOption.range||{},m=o.start,l=o.end;if(m>l&&(m=[l,l=m][0]),this._range.end=null!=m?m:null!=this._range.end?this._range.end:0,this._range.start=null!=l?l:null!=this._range.start?this._range.start:100,100!=this._range.start||0!==this._range.end){if("horizontal"==this.dataRangeOption.orient){var r=this._fillerShape.style.width;this._fillerShape.style.x+=r*(100-this._range.start)/100,this._fillerShape.style.width=r*(this._range.start-this._range.end)/100}else{var h=this._fillerShape.style.height;this._fillerShape.style.y+=h*(100-this._range.start)/100,this._fillerShape.style.height=h*(this._range.start-this._range.end)/100}this.zr.modShape(this._fillerShape.id),this._syncHandleShape()}},_syncHandleShape:function(){var l=this._calculableLocation.x,h=this._calculableLocation.y,a=this._calculableLocation.width,m=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(this._startShape.style.x=this._fillerShape.style.x,this._startMask.style.width=this._startShape.style.x-l,this._endShape.style.x=this._fillerShape.style.x+this._fillerShape.style.width,this._endMask.style.x=this._endShape.style.x,this._endMask.style.width=l+a-this._endShape.style.x,this._range.start=Math.ceil(100-(this._startShape.style.x-l)/a*100),this._range.end=Math.floor(100-(this._endShape.style.x-l)/a*100)):(this._startShape.style.y=this._fillerShape.style.y,this._startMask.style.height=this._startShape.style.y-h,this._endShape.style.y=this._fillerShape.style.y+this._fillerShape.style.height,this._endMask.style.y=this._endShape.style.y,this._endMask.style.height=h+m-this._endShape.style.y,this._range.start=Math.ceil(100-(this._startShape.style.y-h)/m*100),this._range.end=Math.floor(100-(this._endShape.style.y-h)/m*100)),this._syncShape()},_syncFillerShape:function(x){var m,l,z=this._calculableLocation.x,h=this._calculableLocation.y,y=this._calculableLocation.width,s=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(m=this._startShape.style.x,l=this._endShape.style.x,x.id==this._startShape.id&&m>=l?(l=m,this._endShape.style.x=m):x.id==this._endShape.id&&m>=l&&(m=l,this._startShape.style.x=m),this._fillerShape.style.x=m,this._fillerShape.style.width=l-m,this._startMask.style.width=m-z,this._endMask.style.x=l,this._endMask.style.width=z+y-l,this._range.start=Math.ceil(100-(m-z)/y*100),this._range.end=Math.floor(100-(l-z)/y*100)):(m=this._startShape.style.y,l=this._endShape.style.y,x.id==this._startShape.id&&m>=l?(l=m,this._endShape.style.y=m):x.id==this._endShape.id&&m>=l&&(m=l,this._startShape.style.y=m),this._fillerShape.style.y=m,this._fillerShape.style.height=l-m,this._startMask.style.height=m-h,this._endMask.style.y=l,this._endMask.style.height=h+s-l,this._range.start=Math.ceil(100-(m-h)/s*100),this._range.end=Math.floor(100-(l-h)/s*100)),this._syncShape()},_syncShape:function(){this._startShape.position=[this._startShape.style.x-this._startShape.style._x,this._startShape.style.y-this._startShape.style._y],this._startShape.style.text=this._textFormat(this._gap*this._range.start+this.dataRangeOption.min),this._startShape.style.color=this._startShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.start+this.dataRangeOption.min),this._endShape.position=[this._endShape.style.x-this._endShape.style._x,this._endShape.style.y-this._endShape.style._y],this._endShape.style.text=this._textFormat(this._gap*this._range.end+this.dataRangeOption.min),this._endShape.style.color=this._endShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.end+this.dataRangeOption.min),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._startMask.id),this.zr.modShape(this._endMask.id),this.zr.modShape(this._fillerShape.id),this.zr.refreshNextFrame()},_dispatchDataRange:function(){this.messageCenter.dispatch(b.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart)},__dataRangeSelected:function(o){if("single"===this.dataRangeOption.selectedMode){for(var m in this._selectedMap){this._selectedMap[m]=!1}}var l=o.target._idx;this._selectedMap[l]=!this._selectedMap[l];var r,h;this._useCustomizedSplit()?(r=this._splitList[l].max,h=this._splitList[l].min):(r=(this._colorList.length-l)*this._gap+this.dataRangeOption.min,h=r-this._gap),this.messageCenter.dispatch(b.EVENT.DATA_RANGE_SELECTED,o.event,{selected:this._selectedMap,target:l,valueMax:r,valueMin:h},this.myChart),this.messageCenter.dispatch(b.EVENT.REFRESH,null,null,this.myChart)},__dispatchHoverLink:function(r){var m,l;if(this.dataRangeOption.calculable){var x,h=this.dataRangeOption.max-this.dataRangeOption.min;x="horizontal"==this.dataRangeOption.orient?(1-(g.getX(r.event)-this._calculableLocation.x)/this._calculableLocation.width)*h:(1-(g.getY(r.event)-this._calculableLocation.y)/this._calculableLocation.height)*h,m=x-0.05*h,l=x+0.05*h}else{if(this._useCustomizedSplit()){var s=r.target._idx;l=this._splitList[s].max,m=this._splitList[s].min}else{var s=r.target._idx;l=(this._colorList.length-s)*this._gap+this.dataRangeOption.min,m=l-this._gap}}this.messageCenter.dispatch(b.EVENT.DATA_RANGE_HOVERLINK,r.event,{valueMin:m,valueMax:l},this.myChart)},__onhoverlink:function(h){if(this.dataRangeOption.show&&this.dataRangeOption.hoverLink&&this._indicatorShape&&h&&null!=h.seriesIndex&&null!=h.dataIndex){var a=h.value;if(""===a||isNaN(a)){return}a<this.dataRangeOption.min?a=this.dataRangeOption.min:a>this.dataRangeOption.max&&(a=this.dataRangeOption.max),this._indicatorShape.position="horizontal"==this.dataRangeOption.orient?[(this.dataRangeOption.max-a)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.width,0]:[0,(this.dataRangeOption.max-a)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.height],this._indicatorShape.style.text=this._textFormat(h.value),this._indicatorShape.style.color=this.getColor(a),this.zr.addHoverShape(this._indicatorShape)}},_textFormat:function(l,h){var a=this.dataRangeOption;if(l!==-Number.MAX_VALUE&&(l=(+l).toFixed(a.precision)),null!=h&&h!==Number.MAX_VALUE&&(h=(+h).toFixed(a.precision)),a.formatter){if("string"==typeof a.formatter){return a.formatter.replace("{value}",l===-Number.MAX_VALUE?"min":l).replace("{value2}",h===Number.MAX_VALUE?"max":h)}if("function"==typeof a.formatter){return a.formatter.call(this.myChart,l,h)}}return null==h?l:l===-Number.MAX_VALUE?"< "+h:h===Number.MAX_VALUE?"> "+l:l+" - "+h},_isContinuity:function(){var a=this.dataRangeOption;return !(a.splitList?a.splitList.length>0:a.splitNumber>0)||a.calculable},_useCustomizedSplit:function(){var a=this.dataRangeOption;return a.splitList&&a.splitList.length>0},_buildColorList:function(r){if(this._colorList=f.getGradientColors(this.dataRangeOption.color,Math.max((r-this.dataRangeOption.color.length)/(this.dataRangeOption.color.length-1),0)+1),this._colorList.length>r){for(var m=this._colorList.length,l=[this._colorList[0]],x=m/(r-1),h=1;r-1>h;h++){l.push(this._colorList[Math.floor(h*x)])}l.push(this._colorList[m-1]),this._colorList=l}if(this._useCustomizedSplit()){for(var s=this._splitList,h=0,m=s.length;m>h;h++){s[h].color&&(this._colorList[h]=s[h].color)}}},_buildGap:function(h){if(!this._useCustomizedSplit()){var a=this.dataRangeOption.precision;for(this._gap=(this.dataRangeOption.max-this.dataRangeOption.min)/h;this._gap.toFixed(a)-0!=this._gap&&5>a;){a++}this.dataRangeOption.precision=a,this._gap=((this.dataRangeOption.max-this.dataRangeOption.min)/h).toFixed(a)-0}},_buildDataList:function(x){for(var m=this._valueTextList=[],l=this.dataRangeOption,z=this._useCustomizedSplit(),h=0;x>h;h++){this._selectedMap[h]=!0;var y="";if(z){var s=this._splitList[x-1-h];y=null!=s.label?s.label:null!=s.single?this._textFormat(s.single):this._textFormat(s.min,s.max)}else{y=this._textFormat(h*this._gap+l.min,(h+1)*this._gap+l.min)}m.unshift(y)}},_buildSplitList:function(){if(this._useCustomizedSplit()){for(var r=this.dataRangeOption.splitList,m=this._splitList=[],l=0,x=r.length;x>l;l++){var h=r[l];if(!h||null==h.start&&null==h.end){throw new Error("Empty item exists in splitList!")}var s={label:h.label,color:h.color};s.min=h.start,s.max=h.end,s.min>s.max&&(s.min=[s.max,s.max=s.min][0]),s.min===s.max&&(s.single=s.max),null==s.min&&(s.min=-Number.MAX_VALUE),null==s.max&&(s.max=Number.MAX_VALUE),m.push(s)}}},refresh:function(l){if(l){this.option=l,this.option.dataRange=this.reformOption(this.option.dataRange);var h=this.dataRangeOption=this.option.dataRange;if(!this._useCustomizedSplit()&&(null==h.min||null==h.max)){throw new Error("option.dataRange.min or option.dataRange.max has not been defined.")}this.myChart.canvasSupported||(h.realtime=!1);var a=this._isContinuity()?100:this._useCustomizedSplit()?h.splitList.length:h.splitNumber;this._buildSplitList(),this._buildColorList(a),this._buildGap(a),this._buildDataList(a)}this.clear(),this._buildShape()},getColor:function(o){if(isNaN(o)){return null}var m;if(this._useCustomizedSplit()){for(var l=this._splitList,r=0,h=l.length;h>r;r++){if(l[r].min<=o&&l[r].max>=o){m=r;break}}}else{if(this.dataRangeOption.min==this.dataRangeOption.max){return this._colorList[0]}if(o<this.dataRangeOption.min?o=this.dataRangeOption.min:o>this.dataRangeOption.max&&(o=this.dataRangeOption.max),this.dataRangeOption.calculable&&(o-(this._gap*this._range.start+this.dataRangeOption.min)>0.00005||o-(this._gap*this._range.end+this.dataRangeOption.min)<-0.00005)){return null}m=this._colorList.length-Math.ceil((o-this.dataRangeOption.min)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._colorList.length),m==this._colorList.length&&m--}return this._selectedMap[m]?this._colorList[m]:null},getColorByIndex:function(a){return a>=this._colorList.length?a=this._colorList.length-1:0>a&&(a=0),this._colorList[a]},onbeforDispose:function(){this.messageCenter.unbind(b.EVENT.HOVER,this._onhoverlink)}},w.inherits(v,j),q("../component").define("dataRange",v),v}),define("echarts/layout/WordCloudRectZero",["require"],function(){function a(b){this.defaultOption={type:"RECT"},this._init(b)}return a.prototype={RECT:"_calculateRect",_init:function(b){this._initOption(b),this._initCanvas()},_initOption:function(b){for(k in b){this.defaultOption[k]=b[k]}},_initCanvas:function(){var d=document.createElement("canvas");d.width=1,d.height=1;var c=Math.sqrt(d.getContext("2d").getImageData(0,0,1,1).data.length>>2);if(d.width=this.defaultOption.width,d.height=this.defaultOption.height,d.getContext){var b=d.getContext("2d")}this.canvas=d,this.ctx=b,this.ratio=c},calculate:function(d,c){var b=this.defaultOption.type,f=this[b];this[f].call(this,d,c)},_calculateReturn:function(d,c,b){c.call(b,d)},_calculateRect:function(f,d){var c={},g=this.defaultOption.width>>5<<5,b=this.defaultOption.height;c.initarr=this._rectZeroArray(g*b),c.area=g*b,c.maxHit=b,c.maxWit=g,c.imgboard=this._rectBoard(g,b),this._calculateReturn(c,f,d)},_rectBoard:function(f,d){for(var c=[],g=0;d>g;g++){c.push({y:g,start:0,end:f})}for(var b=[],g=0;f>g;g++){b.push({x:g,start:0,end:d})}return{row:c,cloumn:b}},_rectZeroArray:function(d){for(var c=[],b=d,f=-1;++f<b;){c[f]=0}return c}},a}),define("echarts/util/shape/HandlePolygon",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util"],function(f){function d(a){c.call(this,a)}var c=f("zrender/shape/Base"),g=f("zrender/shape/Polygon"),b=f("zrender/tool/util");return d.prototype={type:"handle-polygon",buildPath:function(h,a){g.prototype.buildPath(h,a)},isCover:function(j,h){var a=this.transformCoordToLocal(j,h);j=a[0],h=a[1];var l=this.style.rect;return j>=l.x&&j<=l.x+l.width&&h>=l.y&&h<=l.y+l.height?!0:!1}},b.inherits(d,c),d});