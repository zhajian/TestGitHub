define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(h){function d(m,l,q,i,p){c.call(this,m,l,q,i,p),this.refresh(i)}var c=h("./base"),k=h("zrender/shape/Polygon");h("../component/polar");var b=h("../config");b.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var j=h("../util/ecData"),g=h("zrender/tool/util"),f=h("zrender/tool/color");return d.prototype={type:b.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var m,l=this.series,a=this.component.legend,q=0,p=l.length;p>q;q++){l[q].type===b.CHART_TYPE_RADAR&&(this.serie=this.reformOption(l[q]),this.legendHoverLink=l[q].legendHoverLink||this.legendHoverLink,m=this.serie.name||"",this.selectedMap[m]=a?a.isSelected(m):!0,this.selectedMap[m]&&(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable")&&this._addDropBox(q),this._buildSingleRadar(q),this.buildMark(q)))}this.addShapeList()},_buildSingleRadar:function(w){for(var y,v,q,x,p=this.component.legend,m=this.serie.data,z=this.deepQuery(this._queryTarget,"calculable"),u=0;u<m.length;u++){q=m[u].name||"",this.selectedMap[q]=p?p.isSelected(q):!0,this.selectedMap[q]&&(p?(v=p.getColor(q),y=p.getItemShape(q),y&&(y.style.brushType=this.deepQuery([m[u],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",p.setItemShape(q,y))):v=this.zr.getColor(u),x=this._getPointList(this.serie.polarIndex,m[u]),this._addSymbol(x,v,u,w,this.serie.polarIndex),this._addDataShape(x,v,m[u],w,u,z),this._radarDataCounter++)}},_getPointList:function(v,p){for(var m,x,l=[],w=this.component.polar,u=0,q=p.value.length;q>u;u++){x=this.getDataFromOption(p.value[u]),m="-"!=x?w.getVector(v,u,x):!1,m&&l.push(m)}return l},_addSymbol:function(v,y,q,o,x){for(var m,z=this.series,p=this.component.polar,u=0,w=v.length;w>u;u++){m=this.getSymbolShape(this.deepMerge([z[o].data[q],z[o]]),o,z[o].data[q].value[u],u,p.getIndicatorText(x,u),v[u][0],v[u][1],this._symbol[this._radarDataCounter%this._symbol.length],y,"#fff","vertical"),m.zlevel=this.getZlevelBase(),m.z=this.getZBase()+1,j.set(m,"data",z[o].data[q]),j.set(m,"value",z[o].data[q].value),j.set(m,"dataIndex",q),j.set(m,"special",u),this.shapeList.push(m)}},_addDataShape:function(z,E,w,C,n,v){var x=this.series,A=[w,this.serie],B=this.getItemStyleColor(this.deepQuery(A,"itemStyle.normal.color"),C,n,w),o=this.deepQuery(A,"itemStyle.normal.lineStyle.width"),s=this.deepQuery(A,"itemStyle.normal.lineStyle.type"),D=this.deepQuery(A,"itemStyle.normal.areaStyle.color"),y=this.deepQuery(A,"itemStyle.normal.areaStyle"),q={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:z,brushType:y?"both":"stroke",color:D||B||("string"==typeof E?f.alpha(E,0.5):E),strokeColor:B||E,lineWidth:o,lineType:s},highlightStyle:{brushType:this.deepQuery(A,"itemStyle.emphasis.areaStyle")||y?"both":"stroke",color:this.deepQuery(A,"itemStyle.emphasis.areaStyle.color")||D||B||("string"==typeof E?f.alpha(E,0.5):E),strokeColor:this.getItemStyleColor(this.deepQuery(A,"itemStyle.emphasis.color"),C,n,w)||B||E,lineWidth:this.deepQuery(A,"itemStyle.emphasis.lineStyle.width")||o,lineType:this.deepQuery(A,"itemStyle.emphasis.lineStyle.type")||s}};j.pack(q,x[C],C,w,n,w.name,this.component.polar.getIndicator(x[C].polarIndex)),v&&(q.draggable=!0,this.setCalculable(q)),q=new k(q),this.shapeList.push(q)},_addDropBox:function(m){var l=this.series,a=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[a]){var o=this.component.polar.getDropBox(a);o.zlevel=this.getZlevelBase(),o.z=this.getZBase(),this.setCalculable(o),j.pack(o,l,m,void 0,-1),this.shapeList.push(o),this._dropBoxList[a]=!0}},ondragend:function(q,o){var m=this.series;if(this.isDragend&&q.target){var s=q.target,l=j.get(s,"seriesIndex"),p=j.get(s,"dataIndex");this.component.legend&&this.component.legend.del(m[l].data[p].name),m[l].data.splice(p,1),o.dragOut=!0,o.needRefresh=!0,this.isDragend=!1}},ondrop:function(B,w){var q=this.series;if(this.isDrop&&B.target){var A,e,C=B.target,v=B.dragged,x=j.get(C,"seriesIndex"),y=j.get(C,"dataIndex"),z=this.component.legend;if(-1===y){A={value:j.get(v,"value"),name:j.get(v,"name")},q[x].data.push(A),z&&z.add(A.name,v.style.color||v.style.strokeColor)}else{var o=h("../util/accMath");A=q[x].data[y],z&&z.del(A.name),A.name+=this.option.nameConnector+j.get(v,"name"),e=j.get(v,"value");for(var u=0;u<e.length;u++){A.value[u]=o.accAdd(A.value[u],e[u])}z&&z.add(A.name,v.style.color||v.style.strokeColor)}w.dragIn=w.dragIn||!0,this.isDrop=!1}},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},g.inherits(d,c),h("../chart").define("radar",d),d}),define("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(m){function u(i,h,r,d,l){j.call(this,i,h,r,d,l),this.refresh(d)}var j=m("./base"),f=m("zrender/shape/Text"),q=m("zrender/shape/Line"),c=m("zrender/shape/Polygon"),b=m("zrender/shape/Circle"),v=m("zrender/shape/Ring"),g=m("../config");g.polar={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,boundaryGap:[0,0],splitNumber:5,name:{show:!0,textStyle:{color:"#333"}},axisLine:{show:!0,lineStyle:{color:"#ccc",width:1,type:"solid"}},axisLabel:{show:!1,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},splitLine:{show:!0,lineStyle:{width:1,color:"#ccc"}},type:"polygon"};var k=m("zrender/tool/util"),p=m("../util/coordinates");return u.prototype={type:g.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var a=0;a<this.polar.length;a++){this._index=a,this.reformOption(this.polar[a]),this._queryTarget=[this.polar[a],this.option],this._createVector(a),this._buildSpiderWeb(a),this._buildText(a),this._adjustIndicatorValue(a),this._addAxisLabel(a)}for(var a=0;a<this.shapeList.length;a++){this.zr.addShape(this.shapeList[a])}},_createVector:function(B){for(var D,z=this.polar[B],x=this.deepQuery(this._queryTarget,"indicator"),C=x.length,w=z.startAngle,d=2*Math.PI/C,E=this._getRadius(),y=z.__ecIndicator=[],A=0;C>A;A++){D=p.polar2cartesian(E,w*Math.PI/180+d*A),y.push({vector:[D[1],-D[0]]})}},_getRadius:function(){var a=this.polar[this._index];return this.parsePercent(a.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(C){var F=this.polar[C],A=F.__ecIndicator,y=F.splitArea,E=F.splitLine,x=this.getCenter(C),w=F.splitNumber,G=E.lineStyle.color,z=E.lineStyle.width,B=E.show,D=this.deepQuery(this._queryTarget,"axisLine");this._addArea(A,w,x,y,G,z,B),D.show&&this._addLine(A,x,D)},_addAxisLabel:function(A){for(var H,N,E,C,N,B,G,K,L,D,F=m("../util/accMath"),z=this.polar[A],I=this.deepQuery(this._queryTarget,"indicator"),e=z.__ecIndicator,n=this.deepQuery(this._queryTarget,"splitNumber"),h=this.getCenter(A),J=0;J<I.length;J++){if(H=this.deepQuery([I[J],z,this.option],"axisLabel"),H.show){var O=this.deepQuery([H,z,this.option],"textStyle"),M=this.deepQuery([H,z],"formatter");if(E={},E.textFont=this.getFont(O),E.color=O.color,E=k.merge(E,H),E.lineWidth=E.width,N=e[J].vector,B=e[J].value,K=J/I.length*2*Math.PI,L=H.offset||10,D=H.interval||0,!B){return}for(var w=1;n>=w;w+=D+1){C=k.merge({},E),G=F.accAdd(B.min,F.accMul(B.step,w)),G="function"==typeof M?M(G):"string"==typeof M?M.replace("{a}","{a0}").replace("{a0}",G):this.numAddCommas(G),C.text=G,C.x=w*N[0]/n+Math.cos(K)*L+h[0],C.y=w*N[1]/n+Math.sin(K)*L+h[1],this.shapeList.push(new f({zlevel:this.getZlevelBase(),z:this.getZBase(),style:C,draggable:!1,hoverable:!1}))}}}},_buildText:function(D){for(var I,A,G,x,n,J,z,B=this.polar[D],E=B.__ecIndicator,F=this.deepQuery(this._queryTarget,"indicator"),w=this.getCenter(D),y=0,H=0,C=0;C<F.length;C++){x=this.deepQuery([F[C],B,this.option],"name"),x.show&&(z=this.deepQuery([x,B,this.option],"textStyle"),A={},A.textFont=this.getFont(z),A.color=z.color,A.text="function"==typeof x.formatter?x.formatter.call(this.myChart,F[C].text,C):"string"==typeof x.formatter?x.formatter.replace("{value}",F[C].text):F[C].text,E[C].text=A.text,I=E[C].vector,G=Math.round(I[0])>0?"left":Math.round(I[0])<0?"right":"center",null==x.margin?I=this._mapVector(I,w,1.1):(J=x.margin,y=I[0]>0?J:-J,H=I[1]>0?J:-J,y=0===I[0]?0:y,H=0===I[1]?0:H,I=this._mapVector(I,w,1)),A.textAlign=G,A.x=I[0]+y,A.y=I[1]+H,n=x.rotate?[x.rotate/180*Math.PI,I[0],I[1]]:[0,0,0],this.shapeList.push(new f({zlevel:this.getZlevelBase(),z:this.getZBase(),style:A,draggable:!1,hoverable:!1,rotation:n})))}},getIndicatorText:function(d,a){return this.polar[d]&&this.polar[d].__ecIndicator[a]&&this.polar[d].__ecIndicator[a].text},getDropBox:function(B){var D,z,B=B||0,x=this.polar[B],C=this.getCenter(B),w=x.__ecIndicator,d=w.length,E=[],y=x.type;if("polygon"==y){for(var A=0;d>A;A++){D=w[A].vector,E.push(this._mapVector(D,C,1.2))}z=this._getShape(E,"fill","rgba(0,0,0,0)","",1)}else{"circle"==y&&(z=this._getCircle("",1,1.2,C,"fill","rgba(0,0,0,0)"))}return z},_addArea:function(D,H,B,z,G,y,w){for(var I,A,C,E,F=this.deepQuery(this._queryTarget,"type"),x=0;H>x;x++){A=(H-x)/H,w&&("polygon"==F?(E=this._getPointList(D,A,B),I=this._getShape(E,"stroke","",G,y)):"circle"==F&&(I=this._getCircle(G,y,A,B,"stroke")),this.shapeList.push(I)),z.show&&(C=(H-x-1)/H,this._addSplitArea(D,z,A,C,B,x))}},_getCircle:function(w,l,h,y,d,x){var r=this._getRadius();return new b({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:y[0],y:y[1],r:r*h,brushType:d,strokeColor:w,lineWidth:l,color:x},hoverable:!1,draggable:!1})},_getRing:function(o,l,h,r){var d=this._getRadius();return new v({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:r[0],y:r[1],r:l*d,r0:h*d,color:o,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(w,l,h){for(var y,d=[],x=w.length,s=0;x>s;s++){y=w[s].vector,d.push(this._mapVector(y,h,l))}return d},_getShape:function(o,l,h,r,d){return new c({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:o,brushType:l,color:h,strokeColor:r,lineWidth:d},hoverable:!1,draggable:!1})},_addSplitArea:function(F,K,C,z,I,y){var w,L,B,D,G,H=F.length,x=K.areaStyle.color,A=[],H=F.length,J=this.deepQuery(this._queryTarget,"type");if("string"==typeof x&&(x=[x]),L=x.length,w=x[y%L],"polygon"==J){for(var E=0;H>E;E++){A=[],B=F[E].vector,D=F[(E+1)%H].vector,A.push(this._mapVector(B,I,C)),A.push(this._mapVector(B,I,z)),A.push(this._mapVector(D,I,z)),A.push(this._mapVector(D,I,C)),G=this._getShape(A,"fill",w,"",1),this.shapeList.push(G)}}else{"circle"==J&&(G=this._getRing(w,C,z,I),this.shapeList.push(G))}},_mapVector:function(h,d,a){return[h[0]*a+d[0],h[1]*a+d[1]]},getCenter:function(a){var a=a||0;return this.parseCenter(this.zr,this.polar[a].center)},_addLine:function(C,F,A){for(var y,E,x=C.length,w=A.lineStyle,G=w.color,z=w.width,B=w.type,D=0;x>D;D++){E=C[D].vector,y=this._getLine(F[0],F[1],E[0]+F[0],E[1]+F[1],G,z,B),this.shapeList.push(y)}},_getLine:function(w,d,a,y,x,l,h){return new q({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:w,yStart:d,xEnd:a,yEnd:y,strokeColor:x,lineWidth:l,lineType:h},hoverable:!1})},_adjustIndicatorValue:function(J){for(var C,y,H,x=this.polar[J],e=this.deepQuery(this._queryTarget,"indicator"),K=e.length,B=x.__ecIndicator,D=this._getSeriesData(J),F=x.boundaryGap,G=x.splitNumber,w=x.scale,A=m("../util/smartSteps"),I=0;K>I;I++){if("number"==typeof e[I].max){C=e[I].max,y=e[I].min||0,H={max:C,min:y}}else{var E=this._findValue(D,I,G,F);y=E.min,C=E.max}!w&&y>=0&&C>=0&&(y=0),!w&&0>=y&&0>=C&&(C=0);var z=A(y,C,G,H);B[I].value={min:z.min,max:z.max,step:z.step}}},_getSeriesData:function(y){for(var l,h,A,d=[],z=this.component.legend,x=0;x<this.series.length;x++){if(l=this.series[x],l.type==g.CHART_TYPE_RADAR){h=l.data||[];for(var w=0;w<h.length;w++){A=this.deepQuery([h[w],l,this.option],"polarIndex")||0,A!=y||z&&!z.isSelected(h[w].name)||d.push(h[w])}}}return d},_findValue:function(B,D,z,x){function C(a){(a>w||void 0===w)&&(w=a),(d>a||void 0===d)&&(d=a)}var w,d,E;if(B&&0!==B.length){if(1==B.length&&(d=0),1!=B.length){for(var y=0;y<B.length;y++){C(this.getDataFromOption(B[y].value[D]))}}else{E=B[0];for(var y=0;y<E.value.length;y++){C(this.getDataFromOption(E.value[y]))}}var A=Math.abs(w-d);return d-=Math.abs(A*x[0]),w+=Math.abs(A*x[1]),d===w&&(0===w?w=1:w>0?d=w/z:w/=z),{max:w,min:d}}},getVector:function(B,D,z){B=B||0,D=D||0;var x=this.polar[B].__ecIndicator;if(!(D>=x.length)){var C,w=this.polar[B].__ecIndicator[D],d=this.getCenter(B),E=w.vector,y=w.value.max,A=w.value.min;if("undefined"==typeof z){return d}switch(z){case"min":z=A;break;case"max":z=y;break;case"center":z=(y+A)/2}return C=y!=A?(z-A)/(y-A):0.5,this._mapVector(E,d,C)}},isInside:function(d){var a=this.getNearestIndex(d);return a?a.polarIndex:-1},getNearestIndex:function(B){for(var E,z,x,D,w,d,F,y,A,C=0;C<this.polar.length;C++){if(E=this.polar[C],z=this.getCenter(C),B[0]==z[0]&&B[1]==z[1]){return{polarIndex:C,valueIndex:0}}if(x=this._getRadius(),w=E.startAngle,d=E.indicator,F=d.length,y=2*Math.PI/F,D=p.cartesian2polar(B[0]-z[0],z[1]-B[1]),B[0]-z[0]<0&&(D[1]+=Math.PI),D[1]<0&&(D[1]+=2*Math.PI),A=D[1]-w/180*Math.PI+2*Math.PI,Math.abs(Math.cos(A%(y/2)))*x>D[0]){return{polarIndex:C,valueIndex:Math.floor((A+y/2)/y)%F}}}},getIndicator:function(a){var a=a||0;return this.polar[a].indicator},refresh:function(a){a&&(this.option=a,this.polar=this.option.polar,this.series=this.option.series),this.clear(),this._buildShape()}},k.inherits(u,j),m("../component").define("polar",u),u}),define("echarts/util/coordinates",["require","zrender/tool/math"],function(c){function b(g,f){return[g*d.sin(f),g*d.cos(f)]}function a(g,f){return[Math.sqrt(g*g+f*f),Math.atan(f/g)]}var d=c("zrender/tool/math");return{polar2cartesian:b,cartesian2polar:a}});