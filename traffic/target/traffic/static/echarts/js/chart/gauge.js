define("echarts/chart/gauge",["require","./base","../util/shape/GaugePointer","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","zrender/shape/Circle","zrender/shape/Sector","../config","../util/ecData","../util/accMath","zrender/tool/util","../chart"],function(u){function w(l,i,r,h,m){p.call(this,l,i,r,h,m),this.refresh(h)}var p=u("./base"),d=u("../util/shape/GaugePointer"),v=u("zrender/shape/Text"),c=u("zrender/shape/Line"),b=u("zrender/shape/Rectangle"),x=u("zrender/shape/Circle"),k=u("zrender/shape/Sector"),q=u("../config");q.gauge={zlevel:0,z:2,center:["50%","50%"],clickable:!0,legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[0.2,"#228b22"],[0.8,"#48b"],[1,"#ff4500"]],width:30}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,textStyle:{color:"auto"}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},pointer:{show:!0,length:"80%",width:8,color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}};var g=u("../util/ecData"),f=u("../util/accMath"),j=u("zrender/tool/util");return w.prototype={type:q.CHART_TYPE_GAUGE,_buildShape:function(){var l=this.series;this._paramsMap={},this.selectedMap={};for(var h=0,a=l.length;a>h;h++){l[h].type===q.CHART_TYPE_GAUGE&&(this.selectedMap[l[h].name]=!0,l[h]=this.reformOption(l[h]),this.legendHoverLink=l[h].legendHoverLink||this.legendHoverLink,this._buildSingleGauge(h),this.buildMark(h))}this.addShapeList()},_buildSingleGauge:function(h){var a=this.series[h];this._paramsMap[h]={center:this.parseCenter(this.zr,a.center),radius:this.parseRadius(this.zr,a.radius),startAngle:a.startAngle.toFixed(2)-0,endAngle:a.endAngle.toFixed(2)-0},this._paramsMap[h].totalAngle=this._paramsMap[h].startAngle-this._paramsMap[h].endAngle,this._colorMap(h),this._buildAxisLine(h),this._buildSplitLine(h),this._buildAxisTick(h),this._buildAxisLabel(h),this._buildPointer(h),this._buildTitle(h),this._buildDetail(h)},_buildAxisLine:function(M){var C=this.series[M];if(C.axisLine.show){for(var J,H,P=C.min,G=C.max-P,E=this._paramsMap[M],D=E.center,I=E.startAngle,K=E.totalAngle,m=E.colorArray,z=C.axisLine.lineStyle,N=this.parsePercent(z.width,E.radius[1]),F=E.radius[1],O=F-N,B=I,A=0,L=m.length;L>A;A++){H=I-K*(m[A][0]-P)/G,J=this._getSector(D,O,F,H,B,m[A][1],z,C.zlevel,C.z),B=H,J._animationAdd="r",g.set(J,"seriesIndex",M),g.set(J,"dataIndex",A),this.shapeList.push(J)}}},_buildSplitLine:function(M){var C=this.series[M];if(C.splitLine.show){for(var J,G,Q,E=this._paramsMap[M],D=C.splitNumber,I=C.min,K=C.max-I,H=C.splitLine,o=this.parsePercent(H.length,E.radius[1]),z=H.lineStyle,N=z.color,F=E.center,O=E.startAngle*Math.PI/180,B=E.totalAngle*Math.PI/180,A=E.radius[1],L=A-o,P=0;D>=P;P++){J=O-B/D*P,G=Math.sin(J),Q=Math.cos(J),this.shapeList.push(new c({zlevel:C.zlevel,z:C.z+1,hoverable:!1,style:{xStart:F[0]+Q*A,yStart:F[1]-G*A,xEnd:F[0]+Q*L,yEnd:F[1]-G*L,strokeColor:"auto"===N?this._getColor(M,I+K/D*P):N,lineType:z.type,lineWidth:z.width,shadowColor:z.shadowColor,shadowBlur:z.shadowBlur,shadowOffsetX:z.shadowOffsetX,shadowOffsetY:z.shadowOffsetY}}))}}},_buildAxisTick:function(O){var C=this.series[O];if(C.axisTick.show){for(var K,G,S,E=this._paramsMap[O],D=C.splitNumber,I=C.min,L=C.max-I,H=C.axisTick,o=H.splitNumber,z=this.parsePercent(H.length,E.radius[1]),P=H.lineStyle,F=P.color,Q=E.center,B=E.startAngle*Math.PI/180,A=E.totalAngle*Math.PI/180,M=E.radius[1],R=M-z,N=0,J=D*o;J>=N;N++){N%o!==0&&(K=B-A/J*N,G=Math.sin(K),S=Math.cos(K),this.shapeList.push(new c({zlevel:C.zlevel,z:C.z+1,hoverable:!1,style:{xStart:Q[0]+S*M,yStart:Q[1]-G*M,xEnd:Q[0]+S*R,yEnd:Q[1]-G*R,strokeColor:"auto"===F?this._getColor(O,I+L/J*N):F,lineType:P.type,lineWidth:P.width,shadowColor:P.shadowColor,shadowBlur:P.shadowBlur,shadowOffsetX:P.shadowOffsetX,shadowOffsetY:P.shadowOffsetY}})))}}},_buildAxisLabel:function(M){var B=this.series[M];if(B.axisLabel.show){for(var J,G,F,D,C=B.splitNumber,I=B.min,K=B.max-I,H=B.axisLabel.textStyle,a=this.getFont(H),N=H.color,E=this._paramsMap[M],O=E.center,A=E.startAngle,z=E.totalAngle,L=E.radius[1]-this.parsePercent(B.splitLine.length,E.radius[1])-5,P=0;C>=P;P++){D=f.accAdd(I,f.accMul(f.accDiv(K,C),P)),J=A-z/C*P,G=Math.sin(J*Math.PI/180),F=Math.cos(J*Math.PI/180),J=(J+360)%360,this.shapeList.push(new v({zlevel:B.zlevel,z:B.z+1,hoverable:!1,style:{x:O[0]+F*L,y:O[1]-G*L,color:"auto"===N?this._getColor(M,D):N,text:this._getLabelText(B.axisLabel.formatter,D),textAlign:J>=110&&250>=J?"left":70>=J||J>=290?"right":"center",textBaseline:J>=10&&170>=J?"top":J>=190&&350>=J?"bottom":"middle",textFont:a,shadowColor:H.shadowColor,shadowBlur:H.shadowBlur,shadowOffsetX:H.shadowOffsetX,shadowOffsetY:H.shadowOffsetY}}))}}},_buildPointer:function(D){var G=this.series[D];if(G.pointer.show){var B=G.max-G.min,F=G.pointer,s=this._paramsMap[D],m=this.parsePercent(F.length,s.radius[1]),A=this.parsePercent(F.width,s.radius[1]),C=s.center,y=this._getValue(D);y=y<G.max?y:G.max;var z=(s.startAngle-s.totalAngle/B*(y-G.min))*Math.PI/180,E="auto"===F.color?this._getColor(D,y):F.color,n=new d({zlevel:G.zlevel,z:G.z+1,clickable:this.query(G,"clickable"),style:{x:C[0],y:C[1],r:m,startAngle:s.startAngle*Math.PI/180,angle:z,color:E,width:A,shadowColor:F.shadowColor,shadowBlur:F.shadowBlur,shadowOffsetX:F.shadowOffsetX,shadowOffsetY:F.shadowOffsetY},highlightStyle:{brushType:"fill",width:A>2?2:A/2,color:"#fff"}});g.pack(n,this.series[D],D,this.series[D].data[0],0,this.series[D].data[0].name,y),this.shapeList.push(n),this.shapeList.push(new x({zlevel:G.zlevel,z:G.z+2,hoverable:!1,style:{x:C[0],y:C[1],r:F.width/2.5,color:"#fff"}}))}},_buildTitle:function(F){var G=this.series[F];if(G.title.show){var D=G.data[0],z=null!=D.name?D.name:"";if(""!==z){var y=G.title,a=y.offsetCenter,H=y.textStyle,C=H.color,E=this._paramsMap[F],B=E.center[0]+this.parsePercent(a[0],E.radius[1]),A=E.center[1]+this.parsePercent(a[1],E.radius[1]);this.shapeList.push(new v({zlevel:G.zlevel,z:G.z+(Math.abs(B-E.center[0])+Math.abs(A-E.center[1])<2*H.fontSize?2:1),hoverable:!1,style:{x:B,y:A,color:"auto"===C?this._getColor(F):C,text:z,textAlign:"center",textFont:this.getFont(H),shadowColor:H.shadowColor,shadowBlur:H.shadowBlur,shadowOffsetX:H.shadowOffsetX,shadowOffsetY:H.shadowOffsetY}}))}}},_buildDetail:function(E){var G=this.series[E];if(G.detail.show){var C=G.detail,y=C.offsetCenter,F=C.backgroundColor,r=C.textStyle,H=r.color,B=this._paramsMap[E],D=this._getValue(E),A=B.center[0]-C.width/2+this.parsePercent(y[0],B.radius[1]),z=B.center[1]+this.parsePercent(y[1],B.radius[1]);this.shapeList.push(new b({zlevel:G.zlevel,z:G.z+(Math.abs(A+C.width/2-B.center[0])+Math.abs(z+C.height/2-B.center[1])<r.fontSize?2:1),hoverable:!1,style:{x:A,y:z,width:C.width,height:C.height,brushType:"both",color:"auto"===F?this._getColor(E,D):F,lineWidth:C.borderWidth,strokeColor:C.borderColor,shadowColor:C.shadowColor,shadowBlur:C.shadowBlur,shadowOffsetX:C.shadowOffsetX,shadowOffsetY:C.shadowOffsetY,text:this._getLabelText(C.formatter,D),textFont:this.getFont(r),textPosition:"inside",textColor:"auto"===H?this._getColor(E,D):H}}))}},_getValue:function(a){return this.getDataFromOption(this.series[a].data[0])},_colorMap:function(A){var m=this.series[A],l=m.min,C=m.max-l,h=m.axisLine.lineStyle.color;h instanceof Array||(h=[[1,h]]);for(var B=[],z=0,y=h.length;y>z;z++){B.push([h[z][0]*C+l,h[z][1]])}this._paramsMap[A].colorArray=B},_getColor:function(o,m){null==m&&(m=this._getValue(o));for(var l=this._paramsMap[o].colorArray,r=0,h=l.length;h>r;r++){if(l[r][0]>=m){return l[r][1]}}return l[l.length-1][1]},_getSector:function(B,D,z,y,C,m,l,E,A){return new k({zlevel:E,z:A,hoverable:!1,style:{x:B[0],y:B[1],r0:D,r:z,startAngle:y,endAngle:C,brushType:"fill",color:m,shadowColor:l.shadowColor,shadowBlur:l.shadowBlur,shadowOffsetX:l.shadowOffsetX,shadowOffsetY:l.shadowOffsetY}})},_getLabelText:function(h,a){if(h){if("function"==typeof h){return h.call(this.myChart,a)}if("string"==typeof h){return h.replace("{value}",a)}}return a},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},j.inherits(w,p),u("../chart").define("gauge",w),w}),define("echarts/util/shape/GaugePointer",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(c){function b(f){a.call(this,f)}var a=c("zrender/shape/Base"),d=c("zrender/tool/util");return b.prototype={type:"gauge-pointer",buildPath:function(k,h){var g=h.r,m=h.width,f=h.angle,l=h.x-Math.cos(f)*m*(m>=g/3?1:2),j=h.y+Math.sin(f)*m*(m>=g/3?1:2);f=h.angle-Math.PI/2,k.moveTo(l,j),k.lineTo(h.x+Math.cos(f)*m,h.y-Math.sin(f)*m),k.lineTo(h.x+Math.cos(h.angle)*g,h.y-Math.sin(h.angle)*g),k.lineTo(h.x-Math.cos(f)*m,h.y+Math.sin(f)*m),k.lineTo(l,j)},getRect:function(j){if(j.__rect){return j.__rect}var h=2*j.width,g=j.x,l=j.y,f=g+Math.cos(j.angle)*j.r,k=l-Math.sin(j.angle)*j.r;return j.__rect={x:Math.min(g,f)-h,y:Math.min(l,k)-h,width:Math.abs(g-f)+h,height:Math.abs(l-k)+h},j.__rect},isCover:c("./normalIsCover")},d.inherits(b,a),b});