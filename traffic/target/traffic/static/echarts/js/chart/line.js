define("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(m){function u(n,l,h,d,r){f.call(this,n,l,h,d,r),this.refresh(d)}function j(C,G,A){var x=G.x,F=G.y,o=G.width,H=G.height,z=H/2;G.symbol.match("empty")&&(C.fillStyle="#fff"),G.brushType="both";var B=G.symbol.replace("empty","").toLowerCase();B.match("star")?(z=B.replace("star","")-0||5,F-=1,B="star"):("rectangle"===B||"arrow"===B)&&(x+=(o-H)/2,o=H);var D="";if(B.match("image")&&(D=B.replace(new RegExp("^image:\\/\\/"),""),B="image",x+=Math.round((o-H)/2)-1,o=H+=2),B=c.prototype.iconLibrary[B]){var E=G.x,y=G.y;C.moveTo(E,y+z),C.lineTo(E+5,y+z),C.moveTo(E+G.width-5,y+z),C.lineTo(E+G.width,y+z);var w=this;B(C,{x:x+4,y:F+4,width:o-8,height:H-8,n:z,image:D},function(){w.modSelf(),A()})}else{C.moveTo(x,F+z),C.lineTo(x+o,F+z)}}var f=m("./base"),q=m("zrender/shape/Polyline"),c=m("../util/shape/Icon"),b=m("../util/shape/HalfSmoothPolygon");m("../component/axis"),m("../component/grid"),m("../component/dataZoom");var v=m("../config");v.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,dataFilter:"nearest",itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var g=m("../util/ecData"),k=m("zrender/tool/util"),p=m("zrender/tool/color");return u.prototype={type:v.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(T,F,P,K){for(var Z,J,H,G,N,Q,W,X,M,I=this.series,E=P[0][0],w=I[E],z=this.component.xAxis.getAxis(w.xAxisIndex||0),R={},S=0,B=F;B>S&&null!=z.getNameByIndex(S);S++){J=z.getCoordByIndex(S);for(var Y=0,aa=P.length;aa>Y;Y++){Z=this.component.yAxis.getAxis(I[P[Y][0]].yAxisIndex||0),N=G=W=Q=Z.getCoord(0);for(var C=0,O=P[Y].length;O>C;C++){E=P[Y][C],w=I[E],X=w.data[S],M=this.getDataFromOption(X,"-"),R[E]=R[E]||[],K[E]=K[E]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==M?(M>=0?(G-=C>0?Z.getCoordSize(M):N-Z.getCoord(M),H=G):0>M&&(Q+=C>0?Z.getCoordSize(M):Z.getCoord(M)-W,H=Q),R[E].push([J,H,S,z.getNameByIndex(S),J,N]),K[E].min>M&&(K[E].min=M,K[E].minY=H,K[E].minX=J),K[E].max<M&&(K[E].max=M,K[E].maxY=H,K[E].maxX=J),K[E].sum+=M,K[E].counter++):R[E].length>0&&(this.finalPLMap[E]=this.finalPLMap[E]||[],this.finalPLMap[E].push(R[E]),R[E]=[])}}G=this.component.grid.getY();for(var D,Y=0,aa=P.length;aa>Y;Y++){for(var C=0,O=P[Y].length;O>C;C++){E=P[Y][C],w=I[E],X=w.data[S],M=this.getDataFromOption(X,"-"),"-"==M&&this.deepQuery([X,w,this.option],"calculable")&&(D=this.deepQuery([X,w],"symbolSize"),G+=2*D+5,H=G,this.shapeList.push(this._getCalculableItem(E,S,z.getNameByIndex(S),J,H,"horizontal")))}}}for(var A in R){R[A].length>0&&(this.finalPLMap[A]=this.finalPLMap[A]||[],this.finalPLMap[A].push(R[A]),R[A]=[])}this._calculMarkMapXY(K,P,"y"),this._buildBorkenLine(T,this.finalPLMap,z,"horizontal")},_buildVertical:function(T,F,P,K){for(var Z,J,H,G,N,Q,W,X,M,I=this.series,E=P[0][0],w=I[E],z=this.component.yAxis.getAxis(w.yAxisIndex||0),R={},S=0,B=F;B>S&&null!=z.getNameByIndex(S);S++){H=z.getCoordByIndex(S);for(var Y=0,aa=P.length;aa>Y;Y++){Z=this.component.xAxis.getAxis(I[P[Y][0]].xAxisIndex||0),N=G=W=Q=Z.getCoord(0);for(var C=0,O=P[Y].length;O>C;C++){E=P[Y][C],w=I[E],X=w.data[S],M=this.getDataFromOption(X,"-"),R[E]=R[E]||[],K[E]=K[E]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==M?(M>=0?(G+=C>0?Z.getCoordSize(M):Z.getCoord(M)-N,J=G):0>M&&(Q-=C>0?Z.getCoordSize(M):W-Z.getCoord(M),J=Q),R[E].push([J,H,S,z.getNameByIndex(S),N,H]),K[E].min>M&&(K[E].min=M,K[E].minX=J,K[E].minY=H),K[E].max<M&&(K[E].max=M,K[E].maxX=J,K[E].maxY=H),K[E].sum+=M,K[E].counter++):R[E].length>0&&(this.finalPLMap[E]=this.finalPLMap[E]||[],this.finalPLMap[E].push(R[E]),R[E]=[])}}G=this.component.grid.getXend();for(var D,Y=0,aa=P.length;aa>Y;Y++){for(var C=0,O=P[Y].length;O>C;C++){E=P[Y][C],w=I[E],X=w.data[S],M=this.getDataFromOption(X,"-"),"-"==M&&this.deepQuery([X,w,this.option],"calculable")&&(D=this.deepQuery([X,w],"symbolSize"),G-=2*D+5,J=G,this.shapeList.push(this._getCalculableItem(E,S,z.getNameByIndex(S),J,H,"vertical")))}}}for(var A in R){R[A].length>0&&(this.finalPLMap[A]=this.finalPLMap[A]||[],this.finalPLMap[A].push(R[A]),R[A]=[])}this._calculMarkMapXY(K,P,"x"),this._buildBorkenLine(T,this.finalPLMap,z,"vertical")},_buildOther:function(N,B,J,G){for(var R,F=this.series,D={},C=0,I=J.length;I>C;C++){for(var K=0,O=J[C].length;O>K;K++){var P=J[C][K],H=F[P];R=this.component.xAxis.getAxis(H.xAxisIndex||0);var E=this.component.yAxis.getAxis(H.yAxisIndex||0),A=E.getCoord(0);D[P]=D[P]||[],G[P]=G[P]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var w=0,x=H.data.length;x>w;w++){var L=H.data[w],M=this.getDataFromOption(L,"-");if(M instanceof Array){var z=R.getCoord(M[0]),Q=E.getCoord(M[1]);D[P].push([z,Q,w,M[0],z,A]),G[P].min0>M[0]&&(G[P].min0=M[0],G[P].minY0=Q,G[P].minX0=z),G[P].max0<M[0]&&(G[P].max0=M[0],G[P].maxY0=Q,G[P].maxX0=z),G[P].sum0+=M[0],G[P].counter0++,G[P].min1>M[1]&&(G[P].min1=M[1],G[P].minY1=Q,G[P].minX1=z),G[P].max1<M[1]&&(G[P].max1=M[1],G[P].maxY1=Q,G[P].maxX1=z),G[P].sum1+=M[1],G[P].counter1++}}}}for(var S in D){D[S].length>0&&(this.finalPLMap[S]=this.finalPLMap[S]||[],this.finalPLMap[S].push(D[S]),D[S]=[])}this._calculMarkMapXY(G,J,"xy"),this._buildBorkenLine(N,this.finalPLMap,R,"other")},_buildBorkenLine:function(Z,H,R,O){for(var N,J="other"==O?"horizontal":O,aa=this.series,P=Z.length-1;P>=0;P--){var M=Z[P],G=aa[M],h=H[M];if(G.type===this.type&&null!=h){for(var l=this._getBbox(M,J),T=this._sIndex2ColorMap[M],Y=this.query(G,"itemStyle.normal.lineStyle.width"),B=this.query(G,"itemStyle.normal.lineStyle.type"),ab=this.query(G,"itemStyle.normal.lineStyle.color"),ac=this.getItemStyleColor(this.query(G,"itemStyle.normal.color"),M,-1),D=null!=this.query(G,"itemStyle.normal.areaStyle"),Q=this.query(G,"itemStyle.normal.areaStyle.color"),F=0,z=h.length;z>F;F++){var E=h[F],d="other"!=O&&this._isLarge(J,E);if(d){E=this._getLargePointList(J,E,G.dataFilter)}else{for(var a=0,C=E.length;C>a;a++){N=G.data[E[a][2]],(this.deepQuery([N,G,this.option],"calculable")||this.deepQuery([N,G],"showAllSymbol")||"categoryAxis"===R.type&&R.isMainAxis(E[a][2])&&"none"!=this.deepQuery([N,G],"symbol"))&&this.shapeList.push(this._getSymbol(M,E[a][2],E[a][3],E[a][0],E[a][1],J))}}var r=new q({zlevel:G.zlevel,z:G.z,style:{miterLimit:Y,pointList:E,strokeColor:ab||ac||T,lineWidth:Y,lineType:B,smooth:this._getSmooth(G.smooth),smoothConstraint:l,shadowColor:this.query(G,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(G,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(G,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(G,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:M,_orient:J});if(g.pack(r,aa[M],M,0,F,aa[M].name),this.shapeList.push(r),D){var A=new b({zlevel:G.zlevel,z:G.z,style:{miterLimit:Y,pointList:k.clone(E).concat([[E[E.length-1][4],E[E.length-1][5]],[E[0][4],E[0][5]]]),brushType:"fill",smooth:this._getSmooth(G.smooth),smoothConstraint:l,color:Q?Q:p.alpha(T,0.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:M,_orient:J});g.pack(A,aa[M],M,0,F,aa[M].name),this.shapeList.push(A)}}}}},_getBbox:function(h,d){var a=this.component.grid.getBbox(),l=this.xMarkMap[h];return null!=l.minX0?[[Math.min(l.minX0,l.maxX0,l.minX1,l.maxX1),Math.min(l.minY0,l.maxY0,l.minY1,l.maxY1)],[Math.max(l.minX0,l.maxX0,l.minX1,l.maxX1),Math.max(l.minY0,l.maxY0,l.minY1,l.maxY1)]]:("horizontal"===d?(a[0][1]=Math.min(l.minY,l.maxY),a[1][1]=Math.max(l.minY,l.maxY)):(a[0][0]=Math.min(l.minX,l.maxX),a[1][0]=Math.max(l.minX,l.maxX)),a)},_isLarge:function(d,a){return a.length<2?!1:"horizontal"===d?Math.abs(a[0][0]-a[1][0])<0.5:Math.abs(a[0][1]-a[1][1])<0.5},_getLargePointList:function(G,L,E){var z;z="horizontal"===G?this.component.grid.getWidth():this.component.grid.getHeight();var J=L.length,y=[];if("function"!=typeof E){switch(E){case"min":E=function(a){return Math.max.apply(null,a)};break;case"max":E=function(a){return Math.min.apply(null,a)};break;case"average":E=function(h){for(var d=0,a=0;a<h.length;a++){d+=h[a]}return d/h.length};break;default:E=function(a){return a[0]}}}for(var w=[],M=0;z>M;M++){var D=Math.floor(J/z*M),F=Math.min(Math.floor(J/z*(M+1)),J);if(!(D>=F)){for(var H=D;F>H;H++){w[H-D]="horizontal"===G?L[H][1]:L[H][0]}w.length=F-D;for(var I=E(w),B=-1,x=1/0,H=D;F>H;H++){var K="horizontal"===G?L[H][1]:L[H][0],A=Math.abs(K-I);x>A&&(B=H,x=A)}var C=L[B].slice();"horizontal"===G?C[1]=I:C[0]=I,y.push(C)}}return y},_getSmooth:function(a){return a?0.3:0},_getCalculableItem:function(A,C,y,w,B,s){var d=this.series,x=d[A].calculableHolderColor||this.ecTheme.calculableHolderColor||v.calculableHolderColor,z=this._getSymbol(A,C,y,w,B,s);return z.style.color=x,z.style.strokeColor=x,z.rotation=[0,0],z.hoverable=!1,z.draggable=!1,z.style.text=void 0,z},_getSymbol:function(B,D,z,x,C,w){var d=this.series,E=d[B],y=E.data[D],A=this.getSymbolShape(E,B,y,D,z,x,C,this._sIndex2ShapeMap[B],this._sIndex2ColorMap[B],"#fff","vertical"===w?"horizontal":"vertical");return A.zlevel=E.zlevel,A.z=E.z+1,this.deepQuery([y,E,this.option],"calculable")&&(this.setCalculable(A),A.draggable=!0),A},getMarkCoord:function(w,l){var h=this.series[w],y=this.xMarkMap[w],d=this.component.xAxis.getAxis(h.xAxisIndex),x=this.component.yAxis.getAxis(h.yAxisIndex);if(l.type&&("max"===l.type||"min"===l.type||"average"===l.type)){var s=null!=l.valueIndex?l.valueIndex:null!=y.maxX0?"1":"";return[y[l.type+"X"+s],y[l.type+"Y"+s],y[l.type+"Line"+s],y[l.type+s]]}return["string"!=typeof l.xAxis&&d.getCoordByIndex?d.getCoordByIndex(l.xAxis||0):d.getCoord(l.xAxis||0),"string"!=typeof l.yAxis&&x.getCoordByIndex?x.getCoordByIndex(l.yAxis||0):x.getCoord(l.yAxis||0)]},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(C,F){for(var A,y,E=C.seriesIndex,x=C.dataIndex,w=E.length;w--;){if(A=this.finalPLMap[E[w]]){for(var G=0,z=A.length;z>G;G++){y=A[G];for(var B=0,D=y.length;D>B;B++){x===y[B][2]&&F.push(this._getSymbol(E[w],y[B][2],y[B][3],y[B][0],y[B][1],"horizontal"))}}}}},addDataAnimation:function(K,z){function H(){w--,0===w&&z&&z()}function E(a){a.style.controlPointList=null}for(var N=this.series,D={},B=0,A=K.length;A>B;B++){D[K[B][0]]=K[B]}for(var G,I,L,M,F,C,y,w=0,B=this.shapeList.length-1;B>=0;B--){if(F=this.shapeList[B]._seriesIndex,D[F]&&!D[F][3]){if(this.shapeList[B]._main&&this.shapeList[B].style.pointList.length>1){if(C=this.shapeList[B].style.pointList,I=Math.abs(C[0][0]-C[1][0]),M=Math.abs(C[0][1]-C[1][1]),y="horizontal"===this.shapeList[B]._orient,D[F][2]){if("half-smooth-polygon"===this.shapeList[B].type){var x=C.length;this.shapeList[B].style.pointList[x-3]=C[x-2],this.shapeList[B].style.pointList[x-3][y?0:1]=C[x-4][y?0:1],this.shapeList[B].style.pointList[x-2]=C[x-1]}this.shapeList[B].style.pointList.pop(),y?(G=I,L=0):(G=0,L=-M)}else{if(this.shapeList[B].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[B].type){var J=this.shapeList[B].style.pointList.pop();y?J[0]=C[0][0]:J[1]=C[0][1],this.shapeList[B].style.pointList.push(J)}y?(G=-I,L=0):(G=0,L=M)}this.shapeList[B].style.controlPointList=null,this.zr.modShape(this.shapeList[B])}else{if(D[F][2]&&this.shapeList[B]._dataIndex===N[F].data.length-1){this.zr.delShape(this.shapeList[B].id);continue}if(!D[F][2]&&0===this.shapeList[B]._dataIndex){this.zr.delShape(this.shapeList[B].id);continue}}this.shapeList[B].position=[0,0],w++,this.zr.animate(this.shapeList[B].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[G,L]}).during(E).done(H).start()}}w||z&&z()}},c.prototype.iconLibrary.legendLineIcon=j,k.inherits(u,f),m("../chart").define("line",u),u}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(f){function d(a){c.call(this,a)}var c=f("zrender/shape/Base"),g=f("zrender/shape/util/smoothBezier"),b=f("zrender/tool/util");return d.prototype={type:"half-smooth-polygon",buildPath:function(u,m){var q=m.pointList;if(!(q.length<2)){if(m.smooth){var j=g(q.slice(0,-2),m.smooth,!1,m.smoothConstraint);u.moveTo(q[0][0],q[0][1]);for(var e,v,k,n=q.length,p=0;n-3>p;p++){e=j[2*p],v=j[2*p+1],k=q[p+1],u.bezierCurveTo(e[0],e[1],v[0],v[1],k[0],k[1])}u.lineTo(q[n-2][0],q[n-2][1]),u.lineTo(q[n-1][0],q[n-1][1]),u.lineTo(q[0][0],q[0][1])}else{f("zrender/shape/Polygon").prototype.buildPath(u,m)}}}},b.inherits(d,c),d});